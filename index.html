<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Quality Monitor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .lang-selector {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Login Page Styles */
        .login-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            margin: 30px auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Welcome Section */
        .welcome-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            text-align: center;
        }

        .welcome-title {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .role-greeting {
            font-size: 16px;
            opacity: 0.9;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .quick-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 8px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .quick-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Enhanced Stats */
        .stat-growth {
            font-size: 12px;
            margin-top: 5px;
            opacity: 0.8;
        }

        .growth-positive { color: #4CAF50; }
        .growth-negative { color: #f44336; }

        /* Disease Map */
        .disease-map {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .map-legend {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .map-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .map-refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .case-count {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 8px;
            font-weight: bold;
            color: white;
        }

        .map-stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            display: block;
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 11px;
            color: #666;
        }

        /* Dashboard Content Highlighting */
        .dashboard {
            position: relative;
            overflow: hidden;
        }

        .dashboard::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .welcome-section {
            animation: glow 2s ease-in-out infinite alternate;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); }
            to { box-shadow: 0 0 30px rgba(102, 126, 234, 0.6); }
        }

        .stat-card {
            position: relative;
            overflow: hidden;
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover::after {
            left: 100%;
        }

        .alerts-bar {
            position: relative;
            overflow: hidden;
        }

        .alerts-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24, #ff6b6b);
            background-size: 200% 200%;
            animation: alertGradient 2s ease infinite;
            z-index: -1;
        }

        @keyframes alertGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .widget {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .widget:hover {
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        .chart-container {
            position: relative;
        }

        .chart-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #667eea, #764ba2, #667eea);
            background-size: 200% 200%;
            animation: borderGlow 3s ease infinite;
            border-radius: 17px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .chart-container:hover::before {
            opacity: 1;
        }

        @keyframes borderGlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .disease-map {
            position: relative;
        }

        .interactive-map {
            box-shadow: inset 0 0 20px rgba(102, 126, 234, 0.1);
            transition: box-shadow 0.3s;
        }

        .interactive-map:hover {
            box-shadow: inset 0 0 30px rgba(102, 126, 234, 0.2);
        }

        .village-dot {
            animation: pulse 2s infinite;
        }

        .village-dot.risk {
            animation: urgentPulse 1s infinite;
        }

        @keyframes urgentPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(244, 67, 54, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(244, 67, 54, 0); }
        }

        .safe { background: #4CAF50; }
        .risk { background: #f44336; }
        .warning { background: #FF9800; }

        /* Widgets */
        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .widget {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .widget-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        /* Alerts Bar */
        .alerts-bar {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Inline Feedback */
        .inline-feedback {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .feedback-options {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .feedback-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        /* Enhanced Learning Section */
        .learning-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .learning-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .learning-tab {
            background: none;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s;
            font-weight: 500;
        }

        .learning-tab.active {
            background: #667eea;
            color: white;
        }

        .learning-content {
            display: none;
        }

        .learning-content.active {
            display: block;
        }

        .learning-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .learning-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .learning-item:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .learning-item.video {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }

        .learning-item.infographic {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .learning-item.quiz {
            background: linear-gradient(135deg, #FF9800 0%, #f57c00 100%);
            color: white;
        }

        .learning-item.tips {
            background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
            color: white;
        }

        .learning-icon {
            font-size: 40px;
            margin-bottom: 15px;
            display: block;
        }

        .learning-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .learning-desc {
            font-size: 12px;
            opacity: 0.9;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: rgba(255,255,255,0.8);
            border-radius: 3px;
            transition: width 0.3s;
        }

        .login-title {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        /* Dashboard Styles */
        .dashboard {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-status {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 5px;
        }

        .action-count {
            font-size: 10px;
            background: rgba(255,255,255,0.3);
            padding: 2px 6px;
            border-radius: 10px;
            margin-top: 3px;
        }

        .stat-detail {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 3px;
        }

        .stat-card {
            cursor: pointer;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .stat-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .chart {
            height: 200px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chart:hover {
            background: #e9ecef;
            transform: scale(1.02);
        }

        .chart-interactive {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
        }

        .disease-chart {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            height: 100%;
            align-items: center;
        }

        .disease-item {
            background: rgba(255,255,255,0.1);
            padding: 8px;
            border-radius: 5px;
            text-align: center;
            font-size: 12px;
        }

        .cases-chart {
            display: flex;
            justify-content: space-around;
            align-items: end;
            height: 100%;
            padding: 20px;
        }

        .bar {
            width: 40px;
            background: linear-gradient(to top, #ff6b6b, #ee5a24);
            border-radius: 5px 5px 0 0;
            display: flex;
            align-items: end;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .bar.resolved {
            background: linear-gradient(to top, #4CAF50, #45a049);
        }

        /* Enhanced Map */
        .interactive-map {
            height: 200px;
            background: linear-gradient(135deg, #4CAF50 0%, #FF9800 50%, #f44336 100%);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .village-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid white;
        }

        .village-dot:hover {
            transform: scale(1.5);
            z-index: 10;
        }

        .village-tooltip {
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            display: none;
            z-index: 20;
        }

        /* Water Sources */
        .water-sources {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .water-source {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .water-source:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .water-source.unsafe {
            border-left-color: #f44336;
        }

        .water-source.warning {
            border-left-color: #FF9800;
        }

        .gps-info {
            font-size: 10px;
            color: #666;
            margin-top: 5px;
        }

        /* GPS Map Widget */
        .gps-map-widget {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .map-container {
            width: 100%;
            height: 300px;
            background: linear-gradient(45deg, #e8f5e8 0%, #f0f8ff 50%, #fff5f5 100%);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            border: 2px solid #ddd;
        }

        .water-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 3px solid white;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .water-marker:hover {
            transform: scale(1.3);
            z-index: 10;
        }

        .water-marker.safe {
            background: #4CAF50;
        }

        .water-marker.warning {
            background: #FF9800;
        }

        .water-marker.unsafe {
            background: #f44336;
        }

        .marker-popup {
            position: absolute;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            display: none;
            z-index: 20;
            min-width: 150px;
        }

        .marker-popup::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border: 5px solid transparent;
            border-top-color: rgba(0,0,0,0.9);
        }

        .map-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        .map-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .map-btn:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }

        .distance-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 12px;
        }

        /* Health Assistant Chat Styles */
        .chat-container {
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .chat-messages {
            height: 150px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
        }

        .bot-message, .user-message {
            margin: 8px 0;
            padding: 8px 12px;
            border-radius: 15px;
            max-width: 80%;
            font-size: 13px;
        }

        .bot-message {
            background: #e3f2fd;
            color: #1976d2;
        }

        .user-message {
            background: #667eea;
            color: white;
            margin-left: auto;
            text-align: right;
        }

        .chat-input-container {
            display: flex;
            padding: 10px;
            background: white;
        }

        .chat-input-container input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        .chat-send-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            margin-left: 8px;
            cursor: pointer;
        }

        .quick-questions {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .quick-q-btn {
            background: #f0f0f0;
            border: 1px solid #ddd;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-q-btn:hover {
            background: #667eea;
            color: white;
        }

        /* Enhanced Water Sources Styles */
        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .source-controls {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .filter-btn {
            background: #f0f0f0;
            border: 1px solid #ddd;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .refresh-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            cursor: pointer;
        }

        .sources-stats {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }

        .stat-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: bold;
        }

        .safe-count {
            background: #d4edda;
            color: #155724;
        }

        .warning-count {
            background: #fff3cd;
            color: #856404;
        }

        .unsafe-count {
            background: #f8d7da;
            color: #721c24;
        }

        .source-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3px;
        }

        .source-name {
            font-weight: bold;
            font-size: 13px;
        }

        .source-rating {
            font-size: 11px;
            color: #ff9800;
        }

        .source-details {
            font-size: 11px;
            color: #666;
            margin-bottom: 3px;
        }

        .source-actions {
            display: flex;
            gap: 5px;
            margin-top: 8px;
        }

        .action-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 3px 8px;
            border-radius: 8px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: #5a6fd8;
        }

        .action-btn.danger {
            background: #dc3545;
        }

        .sources-footer {
            margin-top: 10px;
            text-align: center;
        }

        .view-all-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
        }

        .view-all-btn:hover {
            background: #e9ecef;
        }

        /* Enhanced Quick Report Styles */
        .report-counter {
            font-size: 12px;
            background: rgba(102, 126, 234, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 10px;
        }

        .form-row-quick {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }

        .quick-select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 13px;
        }

        .report-details textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            resize: vertical;
            font-family: inherit;
        }

        .additional-fields {
            margin-top: 10px;
        }

        .field-group {
            margin: 8px 0;
        }

        .field-group label {
            display: block;
            font-size: 12px;
            margin-bottom: 3px;
            color: #666;
        }

        .field-group input, .field-group select {
            width: 100%;
            padding: 6px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 12px;
        }

        .attachment-section {
            margin: 10px 0;
        }

        .attachment-preview {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .attachment-item {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .remove-attachment {
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            font-size: 10px;
            cursor: pointer;
        }

        .submit-btn {
            background: #28a745 !important;
        }

        .report-progress {
            margin-top: 10px;
        }

        .progress-bar-report {
            width: 100%;
            height: 6px;
            background: #f0f0f0;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill-report {
            height: 100%;
            background: #28a745;
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            font-size: 12px;
            text-align: center;
            margin-top: 5px;
            color: #666;
        }

        /* Enhanced Quick Report */
        .quick-report-form {
            display: grid;
            gap: 10px;
        }

        .report-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .report-type {
            background: #f8f9fa;
            border: 2px solid #ddd;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
            position: relative;
        }

        .report-type.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .report-type.emergency {
            background: #ff4444;
            color: white;
            border-color: #ff4444;
            animation: emergencyBlink 1s infinite;
        }

        @keyframes emergencyBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.7; }
        }

        /* Prevention Tips Carousel */
        .tips-carousel {
            position: relative;
            overflow: hidden;
            height: 80px;
        }

        .tip-slide {
            position: absolute;
            width: 100%;
            opacity: 0;
            transition: opacity 0.5s;
            padding: 10px;
            text-align: center;
        }

        .tip-slide.active {
            opacity: 1;
        }

        .tip-nav {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 10px;
        }

        .tip-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: background 0.3s;
        }

        .tip-dot.active {
            background: #667eea;
        }

        .recent-activity {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 18px;
        }

        .activity-safe { background: #d4edda; color: #155724; }
        .activity-unsafe { background: #f8d7da; color: #721c24; }
        .activity-report { background: #fff3cd; color: #856404; }
        
        .activity-item {
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .activity-item:hover {
            background: #f8f9fa;
            border-left-color: #667eea;
            transform: translateX(3px);
        }
        
        .activity-item.urgent {
            border-left-color: #f44336;
            background: rgba(244, 67, 54, 0.05);
        }
        
        .activity-item.resolved {
            border-left-color: #4CAF50;
            background: rgba(76, 175, 80, 0.05);
        }
        
        .activity-status {
            font-size: 18px;
            margin-left: 10px;
        }
        
        .activity-status.urgent {
            animation: pulse 2s infinite;
        }

        /* Feedback Form Styles */
        .feedback-form {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .file-upload {
            border: 2px dashed #667eea;
            padding: 30px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .file-upload:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .rating {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .star {
            font-size: 30px;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.active, .star:hover {
            color: #ffd700;
        }

        /* Prevention Tips */
        .prevention-tips {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-top: 20px;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .tip-card {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .tip-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        /* Navigation */
        .nav-menu {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .nav-btn.active, .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üíß Water Quality Monitor</div>
            <select class="lang-selector" id="languageSelect" onchange="changeLanguage()">
                <option value="en">English</option>
                <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                <option value="as">‡¶Ö‡¶∏‡¶Æ‡ßÄ‡¶Ø‡¶º‡¶æ</option>
                <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
                <option value="mni">‡¶Æ‡¶£‡¶ø‡¶™‡ßÅ‡¶∞‡ßÄ</option>
            </select>
        </div>

        <!-- Login Page -->
        <div id="loginPage" class="page active">
            <div class="login-container">
                <h2 class="login-title" data-translate="login_title">üîë Complete Registration</h2>
                <form id="loginForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="first_name">First Name:</label>
                            <input type="text" id="firstName" placeholder="Enter first name" required>
                        </div>
                        <div class="form-group">
                            <label data-translate="last_name">Last Name:</label>
                            <input type="text" id="lastName" placeholder="Enter last name" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="age">Age:</label>
                            <input type="number" id="age" placeholder="Age" min="1" max="120" required>
                        </div>
                        <div class="form-group">
                            <label data-translate="gender">Gender:</label>
                            <select id="gender" required>
                                <option value="">Select Gender</option>
                                <option value="male" data-translate="male">Male</option>
                                <option value="female" data-translate="female">Female</option>
                                <option value="other" data-translate="other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label data-translate="village">Village/Area:</label>
                        <input type="text" id="village" placeholder="Enter your village or area" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="login_method">Login Method:</label>
                            <select id="loginMethod" required>
                                <option value="phone" data-translate="phone_otp">Phone OTP</option>
                                <option value="aadhaar" data-translate="aadhaar_id">Aadhaar ID</option>
                                <option value="email" data-translate="email">Email</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label data-translate="user_role">User Role:</label>
                            <select id="userRole" required>
                                <option value="citizen" data-translate="citizen">Citizen</option>
                                <option value="health_worker" data-translate="health_worker">Health Worker</option>
                                <option value="admin" data-translate="admin">Admin</option>
                                <option value="researcher" data-translate="researcher">Researcher</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label data-translate="contact_info">Contact Information:</label>
                        <input type="text" id="contactInput" placeholder="Enter phone/email/aadhaar" required>
                    </div>
                    
                    <button type="submit" class="btn" data-translate="login_btn">Complete Registration</button>
                </form>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page">
            <div class="nav-menu">
                <button class="nav-btn active" onclick="showSection('dashboard')" data-translate="dashboard">Dashboard</button>
                <button class="nav-btn" onclick="showSection('feedback')" data-translate="feedback">Feedback</button>
                <button class="nav-btn" onclick="showSection('prevention')" data-translate="prevention">Prevention</button>
                <button class="nav-btn" onclick="logout()" data-translate="logout">Logout</button>
            </div>

            <div id="dashboardSection" class="dashboard">
                <!-- Enhanced Welcome Section -->
                <div class="welcome-section">
                    <div class="welcome-title">
                        <span data-translate="welcome_back">üëã Welcome back,</span> <span id="userName">User</span>!
                        <div class="user-status">üü¢ Online ‚Ä¢ Last active: Now</div>
                    </div>
                    <div class="role-greeting" id="roleGreeting">Stay informed about water safety in your community</div>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="showSection('feedback')">
                            <div>üì§</div>
                            <div data-translate="report_issue">Report Issue</div>
                            <div class="action-count">3 pending</div>
                        </button>
                        <button class="quick-btn" onclick="showAlerts()">
                            <div>üö®</div>
                            <div data-translate="view_alerts">View Alerts</div>
                            <div class="action-count">2 new</div>
                        </button>
                        <button class="quick-btn" onclick="showHealth()">
                            <div>üè•</div>
                            <div data-translate="my_health">My Health</div>
                            <div class="action-count">Updated</div>
                        </button>
                        <button class="quick-btn" onclick="showSettings()">
                            <div>‚öôÔ∏è</div>
                            <div data-translate="settings">Settings</div>
                        </button>
                        <button class="quick-btn" onclick="showNotifications()">
                            <div>üîî</div>
                            <div>Notifications</div>
                            <div class="action-count">5</div>
                        </button>
                        <button class="quick-btn" onclick="showAnalytics()">
                            <div>üìä</div>
                            <div>Analytics</div>
                        </button>
                    </div>
                </div>

                <!-- Live Alerts Bar -->
                <div class="alerts-bar">
                    <strong>üö® ALERT:</strong> <span id="liveAlert">Unsafe water detected in Village Kamrup - Boil water before use</span>
                </div>

                <!-- Enhanced Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card" onclick="showUserDetails()">
                        <div class="stat-icon">üë•</div>
                        <div class="stat-number">5,247</div>
                        <div class="stat-label" data-translate="total_users">Total Users</div>
                        <div class="stat-growth growth-positive">‚Üó +12% from last month</div>
                        <div class="stat-detail">Click for breakdown</div>
                    </div>
                    <div class="stat-card" onclick="showReportsDetails()">
                        <div class="stat-icon">üìå</div>
                        <div class="stat-number">89</div>
                        <div class="stat-label" data-translate="active_reports">Active Reports</div>
                        <div class="stat-growth growth-negative">‚Üò -5% from yesterday</div>
                        <div class="stat-detail">23 urgent, 66 normal</div>
                    </div>
                    <div class="stat-card" onclick="showTestPoints()">
                        <div class="stat-icon">üíß</div>
                        <div class="stat-number">156</div>
                        <div class="stat-label" data-translate="test_points">Test Points</div>
                        <div class="stat-growth">üìÖ 23 tested today</div>
                        <div class="stat-detail">134 safe, 22 unsafe</div>
                    </div>
                    <div class="stat-card" onclick="showHealthCases()">
                        <div class="stat-icon">ü¶†</div>
                        <div class="stat-number">23</div>
                        <div class="stat-label" data-translate="health_cases">Health Cases</div>
                        <div class="stat-growth growth-positive">‚Üó +3 new cases</div>
                        <div class="stat-detail">15 resolved, 8 active</div>
                    </div>
                    <div class="stat-card" onclick="showWaterQuality()">
                        <div class="stat-icon">üîç</div>
                        <div class="stat-number">87%</div>
                        <div class="stat-label">Water Quality</div>
                        <div class="stat-growth growth-positive">‚Üó +2% improvement</div>
                        <div class="stat-detail">Regional average</div>
                    </div>
                    <div class="stat-card" onclick="showResponseTime()">
                        <div class="stat-icon">‚è±Ô∏è</div>
                        <div class="stat-number">2.3h</div>
                        <div class="stat-label">Avg Response</div>
                        <div class="stat-growth growth-positive">‚Üó 15min faster</div>
                        <div class="stat-detail">Emergency response</div>
                    </div>
                </div>

                <!-- Enhanced GPS Water Sources Map -->
                <div class="gps-map-widget">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div class="widget-title">üó∫Ô∏è Interactive Water Sources Map</div>
                        <div style="display: flex; gap: 5px;">
                            <select id="mapFilter" onchange="filterMapSources()" style="font-size: 11px; padding: 3px;">
                                <option value="all">All Sources</option>
                                <option value="safe">Safe Only</option>
                                <option value="warning">Caution</option>
                                <option value="unsafe">Unsafe</option>
                            </select>
                            <button class="refresh-btn" onclick="refreshMapData()" style="font-size: 11px; padding: 3px 6px;">üîÑ</button>
                        </div>
                    </div>
                    <div class="map-container" id="waterSourcesMap">
                        <div class="water-marker safe" style="top: 25%; left: 20%;" data-type="safe"
                             onmouseover="showMarkerPopup(event, 'Tube Well A', '26.1445¬∞N, 91.7362¬∞E', 'Safe - pH: 7.2 | Last Test: 2 days ago')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('tube-well-a')"><span style="font-size: 8px; color: white; font-weight: bold;">A</span></div>
                        
                        <div class="water-marker warning" style="top: 45%; left: 60%;" data-type="warning"
                             onmouseover="showMarkerPopup(event, 'Hand Pump B', '26.1523¬∞N, 91.7445¬∞E', 'Caution - pH: 6.8 | Iron: High')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('hand-pump-b')"><span style="font-size: 8px; color: white; font-weight: bold;">B</span></div>
                        
                        <div class="water-marker unsafe" style="top: 70%; left: 35%;" data-type="unsafe"
                             onmouseover="showMarkerPopup(event, 'River Source', '26.1398¬∞N, 91.7298¬∞E', 'Unsafe - E.coli Present | Avoid Use')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('river-source')"><span style="font-size: 8px; color: white; font-weight: bold;">R</span></div>
                        
                        <div class="water-marker safe" style="top: 15%; left: 75%;" data-type="safe"
                             onmouseover="showMarkerPopup(event, 'Community Well', '26.1567¬∞N, 91.7523¬∞E', 'Safe - Tested Today | pH: 7.1')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('community-well')"><span style="font-size: 8px; color: white; font-weight: bold;">C</span></div>
                        
                        <div class="water-marker safe" style="top: 85%; left: 80%;" data-type="safe"
                             onmouseover="showMarkerPopup(event, 'Government Tank', '26.1234¬∞N, 91.7654¬∞E', 'Safe - Treated Water | Chlorinated')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('gov-tank')"><span style="font-size: 8px; color: white; font-weight: bold;">G</span></div>
                        
                        <div class="water-marker warning" style="top: 55%; left: 15%;" data-type="warning"
                             onmouseover="showMarkerPopup(event, 'Bore Well D', '26.1389¬∞N, 91.7201¬∞E', 'Caution - High TDS | Needs Treatment')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('bore-well-d')"><span style="font-size: 8px; color: white; font-weight: bold;">D</span></div>
                        
                        <div class="water-marker safe" style="top: 35%; left: 90%;" data-type="safe"
                             onmouseover="showMarkerPopup(event, 'Spring Water', '26.1612¬∞N, 91.7678¬∞E', 'Safe - Natural Spring | Excellent Quality')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('spring-water')"><span style="font-size: 8px; color: white; font-weight: bold;">S</span></div>
                        
                        <div class="marker-popup" id="markerPopup"></div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin: 10px 0; font-size: 11px;">
                        <span style="color: #4CAF50;">‚úÖ Safe: 4 sources</span>
                        <span style="color: #FF9800;">‚ö†Ô∏è Caution: 2 sources</span>
                        <span style="color: #f44336;">‚ùå Unsafe: 1 source</span>
                        <span style="color: #666;">üìä Coverage: 95%</span>
                    </div>
                    
                    <div class="map-controls">
                        <button class="map-btn" onclick="getCurrentLocation()">üìç My Location</button>
                        <button class="map-btn" onclick="findNearestSafe()">üîç Nearest Safe</button>
                        <button class="map-btn" onclick="showAllDirections()">üß≠ Directions</button>
                        <button class="map-btn" onclick="showMapLegend()">‚ÑπÔ∏è Legend</button>
                    </div>
                    
                    <div class="distance-info" id="distanceInfo">
                        üìç Click "My Location" to see distances to water sources
                    </div>
                </div>

                <!-- Enhanced Disease Spread Map -->
                <div class="disease-map">
                    <div class="map-header">
                        <div class="chart-title">üó∫Ô∏è Interactive Disease Spread Map</div>
                        <div class="map-controls">
                            <select id="diseaseFilter" onchange="filterByDisease()">
                                <option value="all">All Diseases</option>
                                <option value="cholera">Cholera</option>
                                <option value="typhoid">Typhoid</option>
                                <option value="diarrhea">Diarrhea</option>
                            </select>
                            <button class="map-refresh-btn" onclick="refreshMapData()">üîÑ Refresh</button>
                        </div>
                    </div>
                    <div class="interactive-map" onclick="showMapDetails()">
                        <!-- Village dots with enhanced data -->
                        <div class="village-dot safe" style="top: 20%; left: 15%;" 
                             onclick="showVillageDetails('Kamrup')" 
                             onmouseover="showTooltip(event, 'Kamrup: Safe - 0 cases | Pop: 12,450')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">0</div>
                        </div>
                        <div class="village-dot safe" style="top: 40%; left: 25%;" 
                             onclick="showVillageDetails('Jorhat')" 
                             onmouseover="showTooltip(event, 'Jorhat: Safe - 0 cases | Pop: 8,920')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">0</div>
                        </div>
                        <div class="village-dot warning" style="top: 60%; left: 45%;" 
                             onclick="showVillageDetails('Dibrugarh')" 
                             onmouseover="showTooltip(event, 'Dibrugarh: Warning - 2 cases | Pop: 15,670')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">2</div>
                        </div>
                        <div class="village-dot risk" style="top: 30%; left: 70%;" 
                             onclick="showVillageDetails('Tezpur')" 
                             onmouseover="showTooltip(event, 'Tezpur: High Risk - 8 cases | Pop: 22,340')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">8</div>
                        </div>
                        <div class="village-dot safe" style="top: 80%; left: 20%;" 
                             onclick="showVillageDetails('Guwahati')" 
                             onmouseover="showTooltip(event, 'Guwahati: Safe - 0 cases | Pop: 45,890')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">0</div>
                        </div>
                        <div class="village-dot warning" style="top: 50%; left: 80%;" 
                             onclick="showVillageDetails('Silchar')" 
                             onmouseover="showTooltip(event, 'Silchar: Warning - 3 cases | Pop: 18,230')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">3</div>
                        </div>
                        <div class="village-dot risk" style="top: 70%; left: 60%;" 
                             onclick="showVillageDetails('Nagaon')" 
                             onmouseover="showTooltip(event, 'Nagaon: High Risk - 12 cases | Pop: 28,450')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">12</div>
                        </div>
                        <div class="village-tooltip" id="villageTooltip"></div>
                    </div>
                    <div class="map-stats">
                        <div class="stat-item">
                            <span class="stat-value">102</span>
                            <span class="stat-label">Total Villages</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">25</span>
                            <span class="stat-label">Active Cases</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">87%</span>
                            <span class="stat-label">Recovery Rate</span>
                        </div>
                    </div>
                    <div class="map-legend">
                        <div class="legend-item">
                            <div class="legend-color safe"></div>
                            <span>Safe (67 villages) - 0 cases</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color warning"></div>
                            <span>Warning (23 villages) - 1-5 cases</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color risk"></div>
                            <span>High Risk (12 villages) - 6+ cases</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Access Widgets -->
                <div class="widgets-grid">
                    <div class="widget">
                        <div class="widget-title">üîç Best Water Sources Nearby</div>
                        <div class="water-sources">
                            <div class="water-source" onclick="showWaterSource('safe')">
                                <div style="font-weight: bold;">‚úÖ Tube Well A</div>
                                <div style="font-size: 12px;">1.2 km ‚Ä¢ pH: 7.2 ‚Ä¢ Safe</div>
                                <div class="gps-info">üìç 26.1445¬∞N, 91.7362¬∞E</div>
                            </div>
                            <div class="water-source warning" onclick="showWaterSource('warning')">
                                <div style="font-weight: bold;">‚ö†Ô∏è Hand Pump B</div>
                                <div style="font-size: 12px;">2.1 km ‚Ä¢ pH: 6.8 ‚Ä¢ Caution</div>
                                <div class="gps-info">üìç 26.1523¬∞N, 91.7445¬∞E</div>
                            </div>
                            <div class="water-source unsafe" onclick="showWaterSource('unsafe')">
                                <div style="font-weight: bold;">‚ùå River Source</div>
                                <div style="font-size: 12px;">0.8 km ‚Ä¢ High Bacteria</div>
                                <div class="gps-info">üìç 26.1398¬∞N, 91.7298¬∞E</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">üõ°Ô∏è Prevention Tips</div>
                        </div>
                        <div class="tips-carousel">
                            <div class="tip-slide active">
                                <div>üßº Wash hands with soap for 20 seconds before eating and after using toilet</div>
                            </div>
                            <div class="tip-slide">
                                <div>üî• Boil water for at least 1 minute to kill harmful bacteria and viruses</div>
                            </div>
                            <div class="tip-slide">
                                <div>üíä Use water purification tablets when boiling is not possible</div>
                            </div>
                            <div class="tip-slide">
                                <div>üè∫ Store treated water in clean, covered containers away from contamination</div>
                            </div>
                            <div class="tip-slide">
                                <div>üö∞ Avoid drinking from unknown sources, especially during monsoon season</div>
                            </div>
                            <div class="tip-slide">
                                <div>üßΩ Clean water storage containers weekly with soap and hot water</div>
                            </div>
                        </div>
                        <div class="tip-nav">
                            <span class="tip-dot active" onclick="showTip(0)"></span>
                            <span class="tip-dot" onclick="showTip(1)"></span>
                            <span class="tip-dot" onclick="showTip(2)"></span>
                            <span class="tip-dot" onclick="showTip(3)"></span>
                            <span class="tip-dot" onclick="showTip(4)"></span>
                            <span class="tip-dot" onclick="showTip(5)"></span>
                        </div>
                    </div>
                    
                    <div class="widget">
                        <div class="widget-title">ü§ñ AI Health Assistant</div>
                        <div class="chat-container">
                            <div class="chat-messages" id="chatMessages">
                                <div class="bot-message">üëã Hi! I'm your health assistant. Ask me about water safety, symptoms, or prevention tips!</div>
                            </div>
                            <div class="chat-input-container">
                                <input type="text" id="chatInput" placeholder="Type your question..." onkeypress="handleChatEnter(event)">
                                <button class="chat-send-btn" onclick="sendMessage()">Send</button>
                            </div>
                        </div>
                        <div class="quick-questions">
                            <button class="quick-q-btn" onclick="askQuickQuestion('water-safe')">Is my water safe?</button>
                            <button class="quick-q-btn" onclick="askQuickQuestion('symptoms')">Check symptoms</button>
                            <button class="quick-q-btn" onclick="askQuickQuestion('prevention')">Prevention tips</button>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Quick Report Form -->
                <div class="inline-feedback">
                    <div class="widget-title">üì§ Quick Report <span class="report-counter">Reports today: 12</span></div>
                    <div class="quick-report-form">
                        <div class="report-type-selector">
                            <div class="report-type active" onclick="selectReportType('water')">üíß Water Issue</div>
                            <div class="report-type" onclick="selectReportType('health')">üè• Health Case</div>
                            <div class="report-type" onclick="selectReportType('suggestion')">üí° Suggestion</div>
                            <div class="report-type" onclick="selectReportType('emergency')">üö® Emergency</div>
                        </div>
                        
                        <div class="form-row-quick">
                            <select id="locationSelect" class="quick-select">
                                <option>Select Location</option>
                                <option>Village Kamrup</option>
                                <option>Village Jorhat</option>
                                <option>Village Dibrugarh</option>
                                <option>Village Tezpur</option>
                                <option>Village Guwahati</option>
                                <option>Village Silchar</option>
                                <option>Village Nagaon</option>
                            </select>
                            <select id="prioritySelect" class="quick-select">
                                <option value="normal">Normal Priority</option>
                                <option value="urgent">Urgent</option>
                                <option value="emergency">Emergency</option>
                            </select>
                        </div>
                        
                        <div class="report-details" id="reportDetails">
                            <textarea id="quickReportText" placeholder="Describe the issue in detail..." rows="3"></textarea>
                            <div class="additional-fields" id="additionalFields"></div>
                        </div>
                        
                        <div class="attachment-section">
                            <div class="attachment-preview" id="attachmentPreview"></div>
                        </div>
                        
                        <div class="feedback-options">
                            <button class="feedback-btn" onclick="addVoiceNote()">üé§ Voice</button>
                            <button class="feedback-btn" onclick="addPhoto()">üì∑ Photo</button>
                            <button class="feedback-btn" onclick="getCurrentLocationForReport()">üìç GPS</button>
                            <button class="feedback-btn submit-btn" onclick="submitQuickReport()">üì§ Submit Report</button>
                        </div>
                        
                        <div class="report-progress" id="reportProgress" style="display: none;">
                            <div class="progress-bar-report">
                                <div class="progress-fill-report"></div>
                            </div>
                            <div class="progress-text">Submitting report...</div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Charts Section -->
                <div class="charts-section">
                    <div class="chart-container">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div class="chart-title">üìà Cases Analytics Dashboard</div>
                            <div style="display: flex; gap: 5px;">
                                <select id="casesTimeFilter" onchange="filterCasesData()" style="font-size: 11px; padding: 3px;">
                                    <option>Last 7 days</option>
                                    <option>Last 30 days</option>
                                    <option>This month</option>
                                </select>
                                <button class="refresh-btn" onclick="refreshCasesData()" style="font-size: 11px; padding: 3px 6px;">üîÑ</button>
                            </div>
                        </div>
                        <div class="chart chart-interactive">
                            <div class="cases-chart" style="display: flex; justify-content: space-around; align-items: end; height: 120px; padding: 15px;">
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Mon')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 60px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">15</span>
                                        </div>
                                        <div class="bar resolved" style="height: 45px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">12</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Mon</div>
                                    <div style="font-size: 8px; color: #666;">‚Üë +3</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Tue')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 75px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">20</span>
                                        </div>
                                        <div class="bar resolved" style="height: 64px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">17</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Tue</div>
                                    <div style="font-size: 8px; color: #666;">‚Üì -3</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Wed')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 53px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">14</span>
                                        </div>
                                        <div class="bar resolved" style="height: 68px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">18</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Wed</div>
                                    <div style="font-size: 8px; color: #4CAF50;">‚Üë +4</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Thu')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 38px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">10</span>
                                        </div>
                                        <div class="bar resolved" style="height: 57px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">15</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Thu</div>
                                    <div style="font-size: 8px; color: #4CAF50;">‚Üë +5</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Fri')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 45px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">12</span>
                                        </div>
                                        <div class="bar resolved" style="height: 49px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">13</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Fri</div>
                                    <div style="font-size: 8px; color: #4CAF50;">‚Üë +1</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Sat')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 30px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">8</span>
                                        </div>
                                        <div class="bar resolved" style="height: 41px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">11</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Sat</div>
                                    <div style="font-size: 8px; color: #4CAF50;">‚Üë +3</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Sun')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 23px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">6</span>
                                        </div>
                                        <div class="bar resolved" style="height: 34px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">9</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Sun</div>
                                    <div style="font-size: 8px; color: #4CAF50;">‚Üë +3</div>
                                </div>
                            </div>
                            <div style="margin-top: 10px; font-size: 11px; text-align: center; color: #666; display: flex; justify-content: space-around;">
                                <span style="color: #ff6b6b;">üî¥ New Cases: 85</span>
                                <span style="color: #4CAF50;">‚úÖ Resolved: 95</span>
                                <span style="color: #667eea;">üìà Resolution Rate: 89%</span>
                                <span style="color: #666;">üîÑ Updated: 5 min ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div class="chart-title">ü¶† Disease Analytics Dashboard</div>
                            <div style="display: flex; gap: 5px;">
                                <select id="diseaseTimeFilter" onchange="filterDiseaseData()" style="font-size: 11px; padding: 3px;">
                                    <option>Last 7 days</option>
                                    <option>Last 30 days</option>
                                    <option>Last 3 months</option>
                                </select>
                                <button class="refresh-btn" onclick="refreshDiseaseData()" style="font-size: 11px; padding: 3px 6px;">üîÑ</button>
                            </div>
                        </div>
                        <div class="chart chart-interactive">
                            <div class="disease-chart">
                                <div class="disease-item" style="background: linear-gradient(135deg, rgba(255,107,107,0.9), rgba(244,67,54,0.7)); cursor: pointer;" onclick="showDiseaseDetails('diarrhea')">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>üî¥ Diarrhea</div>
                                        <div style="font-size: 10px; background: rgba(255,255,255,0.3); padding: 1px 4px; border-radius: 8px;">‚Üë +3</div>
                                    </div>
                                    <div style="font-weight: bold;">40% (18 cases)</div>
                                    <div style="font-size: 9px; opacity: 0.8;">Peak: Monsoon season</div>
                                </div>
                                <div class="disease-item" style="background: linear-gradient(135deg, rgba(255,193,7,0.9), rgba(255,152,0,0.7)); cursor: pointer;" onclick="showDiseaseDetails('typhoid')">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>üü° Typhoid</div>
                                        <div style="font-size: 10px; background: rgba(255,255,255,0.3); padding: 1px 4px; border-radius: 8px;">‚Üì -1</div>
                                    </div>
                                    <div style="font-weight: bold;">25% (12 cases)</div>
                                    <div style="font-size: 9px; opacity: 0.8;">Trend: Stable</div>
                                </div>
                                <div class="disease-item" style="background: linear-gradient(135deg, rgba(255,152,0,0.9), rgba(239,108,0,0.7)); cursor: pointer;" onclick="showDiseaseDetails('cholera')">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>üü† Cholera</div>
                                        <div style="font-size: 10px; background: rgba(255,255,255,0.3); padding: 1px 4px; border-radius: 8px;">‚Üí 0</div>
                                    </div>
                                    <div style="font-weight: bold;">20% (9 cases)</div>
                                    <div style="font-size: 9px; opacity: 0.8;">Status: Controlled</div>
                                </div>
                                <div class="disease-item" style="background: linear-gradient(135deg, rgba(76,175,80,0.9), rgba(56,142,60,0.7)); cursor: pointer;" onclick="showDiseaseDetails('jaundice')">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>üü¢ Jaundice</div>
                                        <div style="font-size: 10px; background: rgba(255,255,255,0.3); padding: 1px 4px; border-radius: 8px;">‚Üì -2</div>
                                    </div>
                                    <div style="font-weight: bold;">15% (7 cases)</div>
                                    <div style="font-size: 9px; opacity: 0.8;">Trend: Decreasing</div>
                                </div>
                            </div>
                            <div style="margin-top: 10px; font-size: 11px; text-align: center; color: #666;">
                                üìä Total Active Cases: 46 ‚Ä¢ üìà Recovery Rate: 87% ‚Ä¢ üîÑ Updated: 2 min ago
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Activity Timeline -->
                <div class="recent-activity">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3>üìã Live Activity Feed</h3>
                        <div style="display: flex; gap: 5px;">
                            <button class="filter-btn active" onclick="filterActivity('all')">All</button>
                            <button class="filter-btn" onclick="filterActivity('urgent')">Urgent</button>
                            <button class="filter-btn" onclick="filterActivity('resolved')">Resolved</button>
                            <button class="refresh-btn" onclick="refreshActivity()">üîÑ</button>
                        </div>
                    </div>
                    
                    <div class="activity-item urgent" data-type="urgent" onclick="viewActivityDetails('water-test-1')">
                        <div class="activity-icon activity-unsafe">‚ö†Ô∏è</div>
                        <div style="flex: 1;">
                            <div><strong>URGENT: Water contamination detected</strong></div>
                            <div style="font-size: 12px; color: #666;">Village Kamrup ‚Ä¢ 15 min ago</div>
                            <div style="font-size: 11px; color: #f44336;">üìä pH: 5.8, E.coli: High ‚Ä¢ üè• Health team dispatched</div>
                        </div>
                        <div class="activity-status urgent">üö®</div>
                    </div>
                    
                    <div class="activity-item resolved" data-type="resolved" onclick="viewActivityDetails('health-case-1')">
                        <div class="activity-icon activity-safe">‚úÖ</div>
                        <div style="flex: 1;">
                            <div><strong>Cholera case resolved successfully</strong></div>
                            <div style="font-size: 12px; color: #666;">Village Jorhat ‚Ä¢ 1 hour ago</div>
                            <div style="font-size: 11px; color: #4CAF50;">üë®‚öïÔ∏è Patient recovered ‚Ä¢ üíä Treatment completed</div>
                        </div>
                        <div class="activity-status resolved">‚úÖ</div>
                    </div>
                    
                    <div class="activity-item normal" data-type="normal" onclick="viewActivityDetails('report-1')">
                        <div class="activity-icon activity-report">üì§</div>
                        <div style="flex: 1;">
                            <div><strong>Community feedback submitted</strong></div>
                            <div style="font-size: 12px; color: #666;">Village Dibrugarh ‚Ä¢ 2 hours ago</div>
                            <div style="font-size: 11px; color: #666;">‚≠ê Rating: 4/5 ‚Ä¢ üìù "Water quality improved"</div>
                        </div>
                        <div class="activity-status normal">üìã</div>
                    </div>
                    
                    <div class="activity-item urgent" data-type="urgent" onclick="viewActivityDetails('outbreak-1')">
                        <div class="activity-icon activity-unsafe">ü¶†</div>
                        <div style="flex: 1;">
                            <div><strong>Disease outbreak alert issued</strong></div>
                            <div style="font-size: 12px; color: #666;">Village Tezpur ‚Ä¢ 3 hours ago</div>
                            <div style="font-size: 11px; color: #FF9800;">üö® 3 new cases ‚Ä¢ üì¢ Prevention measures activated</div>
                        </div>
                        <div class="activity-status urgent">‚ö†Ô∏è</div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px;">
                        <button class="view-all-btn" onclick="viewAllActivity()">üìú View Complete Timeline</button>
                    </div>
                </div>

                <!-- Enhanced Learning Section -->
                <div class="learning-section">
                    <div class="widget-title">üéì Interactive Learning Hub <span style="font-size: 12px; background: #4CAF50; color: white; padding: 2px 8px; border-radius: 10px; margin-left: 10px;">New Content</span></div>
                    
                    <div class="learning-tabs">
                        <button class="learning-tab active" onclick="showLearningTab('courses')">üìñ Courses</button>
                        <button class="learning-tab" onclick="showLearningTab('interactive')">üéÆ Interactive</button>
                        <button class="learning-tab" onclick="showLearningTab('community')">üë• Community</button>
                        <button class="learning-tab" onclick="showLearningTab('certificates')">üèÖ Certificates</button>
                    </div>

                    <!-- Courses Tab -->
                    <div id="courses" class="learning-content active">
                        <div class="learning-grid">
                            <div class="learning-item video" onclick="startCourse('water-basics')">
                                <span class="learning-icon">üíß</span>
                                <div class="learning-title">Water Safety Fundamentals</div>
                                <div class="learning-desc">6 lessons ‚Ä¢ 45 min ‚Ä¢ Beginner</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 75%;"></div></div>
                                <div style="font-size: 10px; margin-top: 5px; color: #666;">‚≠ê 4.8/5 ‚Ä¢ 1,234 learners</div>
                            </div>
                            <div class="learning-item infographic" onclick="startCourse('disease-master')">
                                <span class="learning-icon">ü¶†</span>
                                <div class="learning-title">Disease Prevention Mastery</div>
                                <div class="learning-desc">8 lessons ‚Ä¢ 1.2 hrs ‚Ä¢ Intermediate</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 30%;"></div></div>
                                <div style="font-size: 10px; margin-top: 5px; color: #666;">‚≠ê 4.9/5 ‚Ä¢ 892 learners</div>
                            </div>
                            <div class="learning-item quiz" onclick="startCourse('emergency-response')">
                                <span class="learning-icon">üö®</span>
                                <div class="learning-title">Emergency Response</div>
                                <div class="learning-desc">5 lessons ‚Ä¢ 30 min ‚Ä¢ Advanced</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%;"></div></div>
                                <div style="font-size: 10px; margin-top: 5px; color: #666;">‚≠ê 4.7/5 ‚Ä¢ 567 learners</div>
                            </div>
                            <div class="learning-item tips" onclick="startCourse('community-health')">
                                <span class="learning-icon">üèòÔ∏è</span>
                                <div class="learning-title">Community Health Leader</div>
                                <div class="learning-desc">12 lessons ‚Ä¢ 2 hrs ‚Ä¢ Expert</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%;"></div></div>
                                <div style="font-size: 10px; margin-top: 5px; color: #666;">‚≠ê 5.0/5 ‚Ä¢ 234 learners</div>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Tab -->
                    <div id="interactive" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item video" onclick="startSimulation('water-test')">
                                <span class="learning-icon">üî¨</span>
                                <div class="learning-title">Virtual Water Testing Lab</div>
                                <div class="learning-desc">Hands-on simulation ‚Ä¢ 15 min</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #4CAF50;">üéØ Try different test methods</div>
                            </div>
                            <div class="learning-item infographic" onclick="startGame('outbreak-control')">
                                <span class="learning-icon">üéÆ</span>
                                <div class="learning-title">Outbreak Control Game</div>
                                <div class="learning-desc">Strategy game ‚Ä¢ 20 min</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #FF9800;">üèÜ Beat your high score: 850</div>
                            </div>
                            <div class="learning-item quiz" onclick="startAR('water-sources')">
                                <span class="learning-icon">üì±</span>
                                <div class="learning-title">AR Water Source Finder</div>
                                <div class="learning-desc">Augmented reality ‚Ä¢ Real-time</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #9C27B0;">üìç Use your camera</div>
                            </div>
                            <div class="learning-item tips" onclick="startVR('village-tour')">
                                <span class="learning-icon">ü•Ω</span>
                                <div class="learning-title">Virtual Village Tour</div>
                                <div class="learning-desc">360¬∞ experience ‚Ä¢ 10 min</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #f44336;">üåü New: Monsoon scenario</div>
                            </div>
                        </div>
                    </div>

                    <!-- Community Tab -->
                    <div id="community" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item video" onclick="joinDiscussion('water-safety')">
                                <span class="learning-icon">üí¨</span>
                                <div class="learning-title">Water Safety Discussion</div>
                                <div class="learning-desc">45 active members ‚Ä¢ 12 new posts</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #2196F3;">üí° Latest: Monsoon preparation tips</div>
                            </div>
                            <div class="learning-item infographic" onclick="viewSuccess('local-heroes')">
                                <span class="learning-icon">üåü</span>
                                <div class="learning-title">Local Success Stories</div>
                                <div class="learning-desc">8 inspiring stories ‚Ä¢ Updated daily</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #4CAF50;">üìñ New: Village Kamrup's journey</div>
                            </div>
                            <div class="learning-item quiz" onclick="joinChallenge('weekly')">
                                <span class="learning-icon">üèÉ</span>
                                <div class="learning-title">Weekly Health Challenge</div>
                                <div class="learning-desc">234 participants ‚Ä¢ 3 days left</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #FF9800;">üéØ Goal: Test 5 water sources</div>
                            </div>
                            <div class="learning-item tips" onclick="mentorProgram()">
                                <span class="learning-icon">üë®‚Äçüè´</span>
                                <div class="learning-title">Peer Mentorship</div>
                                <div class="learning-desc">Connect with experts ‚Ä¢ 1-on-1 help</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #9C27B0;">‚ú® 15 mentors available now</div>
                            </div>
                        </div>
                    </div>

                    <!-- Certificates Tab -->
                    <div id="certificates" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item video" onclick="viewCertificate('water-safety')">
                                <span class="learning-icon">üèÜ</span>
                                <div class="learning-title">Water Safety Expert</div>
                                <div class="learning-desc">Earned ‚Ä¢ Valid until Dec 2024</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #4CAF50;">‚úÖ Verified by WHO standards</div>
                            </div>
                            <div class="learning-item infographic" onclick="startCertification('disease-prev')">
                                <span class="learning-icon">üìú</span>
                                <div class="learning-title">Disease Prevention Specialist</div>
                                <div class="learning-desc">In progress ‚Ä¢ 75% complete</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #FF9800;">‚è∞ 2 modules remaining</div>
                            </div>
                            <div class="learning-item quiz" onclick="startCertification('community-leader')">
                                <span class="learning-icon">üëë</span>
                                <div class="learning-title">Community Health Leader</div>
                                <div class="learning-desc">Available ‚Ä¢ Prerequisites met</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #2196F3;">üéì Advanced certification</div>
                            </div>
                            <div class="learning-item tips" onclick="viewBadges()">
                                <span class="learning-icon">üéñÔ∏è</span>
                                <div class="learning-title">Achievement Badges</div>
                                <div class="learning-desc">12 earned ‚Ä¢ 8 available</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #9C27B0;">üåü Next: Water Testing Pro</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>iv class="progress-bar"><div class="progress-fill" style="width: 25%;"></div></div>
                            </div>
                        </div>
                    </div>

                    <!-- Infographics Tab -->
                    <div id="infographics" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item infographic" onclick="viewInfographic('cholera')">
                                <span class="learning-icon">üìä</span>
                                <div class="learning-title" data-translate="cholera_info">Cholera Prevention Guide</div>
                                <div class="learning-desc">Visual Guide ‚Ä¢ PDF</div>
                            </div>
                            <div class="learning-item infographic" onclick="viewInfographic('typhoid')">
                                <span class="learning-icon">üìà</span>
                                <div class="learning-title" data-translate="typhoid_info">Typhoid Awareness</div>
                                <div class="learning-desc">Symptoms & Prevention</div>
                            </div>
                            <div class="learning-item infographic" onclick="viewInfographic('diarrhea')">
                                <span class="learning-icon">üìã</span>
                                <div class="learning-title" data-translate="diarrhea_info">Diarrhea Prevention</div>
                                <div class="learning-desc">Quick Reference</div>
                            </div>
                            <div class="learning-item infographic" onclick="viewInfographic('water-testing')">
                                <span class="learning-icon">üî¨</span>
                                <div class="learning-title" data-translate="water_testing">Water Testing Guide</div>
                                <div class="learning-desc">Step-by-step Process</div>
                            </div>
                        </div>
                    </div>

                    <!-- Quiz Tab -->
                    <div id="quiz" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item quiz" onclick="startQuiz('weekly')">
                                <span class="learning-icon">üèÜ</span>
                                <div class="learning-title" data-translate="weekly_quiz">Weekly Health Quiz</div>
                                <div class="learning-desc">10 Questions ‚Ä¢ 5 min</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 80%;"></div></div>
                            </div>
                            <div class="learning-item quiz" onclick="startQuiz('water')">
                                <span class="learning-icon">üíß</span>
                                <div class="learning-title" data-translate="water_quiz">Water Safety Quiz</div>
                                <div class="learning-desc">15 Questions ‚Ä¢ 8 min</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 100%;"></div></div>
                            </div>
                            <div class="learning-item quiz" onclick="startQuiz('disease')">
                                <span class="learning-icon">ü¶†</span>
                                <div class="learning-title" data-translate="disease_quiz">Disease Prevention Quiz</div>
                                <div class="learning-desc">12 Questions ‚Ä¢ 6 min</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 40%;"></div></div>
                            </div>
                            <div class="learning-item quiz" onclick="startQuiz('safety')">
                                <span class="learning-icon">üõ°Ô∏è</span>
                                <div class="learning-title" data-translate="safety_quiz">Community Safety Quiz</div>
                                <div class="learning-desc">8 Questions ‚Ä¢ 4 min</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%;"></div></div>
                            </div>
                        </div>
                    </div>

                    <!-- Resources Tab -->
                    <div id="resources" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item tips" onclick="viewResource('who-guidelines')">
                                <span class="learning-icon">üåç</span>
                                <div class="learning-title" data-translate="who_guidelines">WHO Water Guidelines</div>
                                <div class="learning-desc">Official Guidelines</div>
                            </div>
                            <div class="learning-item tips" onclick="viewResource('emergency')">
                                <span class="learning-icon">üö®</span>
                                <div class="learning-title" data-translate="emergency_contacts">Emergency Contacts</div>
                                <div class="learning-desc">24/7 Helplines</div>
                            </div>
                            <div class="learning-item tips" onclick="viewResource('health-centers')">
                                <span class="learning-icon">üè•</span>
                                <div class="learning-title" data-translate="health_centers">Nearby Health Centers</div>
                                <div class="learning-desc">Location & Timings</div>
                            </div>
                            <div class="learning-item tips" onclick="viewResource('water-sources')">
                                <span class="learning-icon">üíß</span>
                                <div class="learning-title" data-translate="water_sources">Safe Water Sources</div>
                                <div class="learning-desc">Verified Locations</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Feedback Form Section -->
            <div id="feedbackSection" class="feedback-form" style="display: none;">
                <h2 data-translate="feedback_title">üì§ Enhanced Water Quality Report</h2>
                <form id="feedbackForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="location">Location:</label>
                            <select id="locationDropdown" required>
                                <option value="">Select Village/Area</option>
                                <option>Village Kamrup</option>
                                <option>Village Jorhat</option>
                                <option>Village Dibrugarh</option>
                                <option>Village Tezpur</option>
                                <option>Village Guwahati</option>
                                <option>Village Silchar</option>
                                <option>Village Nagaon</option>
                                <option>Other (specify below)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Issue Type:</label>
                            <select id="issueType" required>
                                <option value="">Select Issue Type</option>
                                <option>Water Quality</option>
                                <option>Health Emergency</option>
                                <option>Infrastructure Problem</option>
                                <option>General Feedback</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="water_source">Water Source:</label>
                            <select id="waterSource">
                                <option>Tube Well</option>
                                <option>Hand Pump</option>
                                <option>River</option>
                                <option>Pond</option>
                                <option>Government Tank</option>
                                <option>Community Well</option>
                                <option>Bore Well</option>
                                <option>Spring Water</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Priority Level:</label>
                            <select id="priorityLevel">
                                <option>Normal</option>
                                <option>Urgent</option>
                                <option>Emergency</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label data-translate="description">Detailed Description:</label>
                        <textarea id="issueDescription" rows="4" placeholder="Describe the issue in detail..." required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Affected People:</label>
                            <input type="number" id="affectedCount" placeholder="Number of people affected" min="1">
                        </div>
                        <div class="form-group">
                            <label>Contact Number:</label>
                            <input type="tel" id="contactNumber" placeholder="Your phone number">
                        </div>
                    </div>

                    <div class="form-group">
                        <label data-translate="water_rating">Water Quality Rating:</label>
                        <div class="rating">
                            <span class="star" onclick="setRating(1)">‚≠ê</span>
                            <span class="star" onclick="setRating(2)">‚≠ê</span>
                            <span class="star" onclick="setRating(3)">‚≠ê</span>
                            <span class="star" onclick="setRating(4)">‚≠ê</span>
                            <span class="star" onclick="setRating(5)">‚≠ê</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="file-upload" onclick="document.getElementById('photoUpload').click()">
                            <div>üì∑ Upload Photos (Multiple allowed)</div>
                            <div style="font-size: 12px; margin-top: 10px;">Click to select images</div>
                            <input type="file" id="photoUpload" accept="image/*" multiple style="display: none;">
                        </div>
                        <div id="photoPreview" style="margin-top: 10px;"></div>
                    </div>

                    <div class="form-row">
                        <button type="button" class="btn" onclick="getCurrentLocationForFeedback()" style="background: #28a745;">üìç Add GPS Location</button>
                        <button type="submit" class="btn" data-translate="submit_report">üì§ Submit Enhanced Report</button>
                    </div>
                </form>
            </div>

            <!-- Enhanced Prevention Section -->
            <div id="preventionSection" class="prevention-tips" style="display: none;">
                <h2 data-translate="prevention_title">üõ°Ô∏è Comprehensive Water Safety & Prevention Guide</h2>
                
                <!-- Prevention Categories -->
                <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                    <button class="filter-btn active" onclick="showPreventionCategory('all')">All Tips</button>
                    <button class="filter-btn" onclick="showPreventionCategory('water')">Water Safety</button>
                    <button class="filter-btn" onclick="showPreventionCategory('hygiene')">Hygiene</button>
                    <button class="filter-btn" onclick="showPreventionCategory('emergency')">Emergency</button>
                    <button class="filter-btn" onclick="showPreventionCategory('seasonal')">Seasonal</button>
                </div>

                <div class="tips-grid">
                    <!-- Water Safety Tips -->
                    <div class="tip-card" data-category="water">
                        <div class="tip-icon">üî•</div>
                        <h3 data-translate="boil_water">Boil Water Properly</h3>
                        <p data-translate="boil_water_tip">Boil water for 1 minute (3 minutes at high altitude) to kill harmful bacteria and viruses</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">‚úÖ Kills 99.9% of pathogens</div>
                    </div>
                    
                    <div class="tip-card" data-category="water">
                        <div class="tip-icon">üíä</div>
                        <h3 data-translate="chlorine_tablets">Water Purification</h3>
                        <p data-translate="chlorine_tip">Use chlorine tablets (1 tablet per liter) or add 2 drops of bleach per liter of clear water</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">‚è∞ Wait 30 minutes before drinking</div>
                    </div>
                    
                    <div class="tip-card" data-category="water">
                        <div class="tip-icon">üè∫</div>
                        <h3 data-translate="safe_storage">Safe Water Storage</h3>
                        <p data-translate="storage_tip">Store treated water in clean, covered containers. Clean storage weekly with soap</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üîÑ Replace every 3 days</div>
                    </div>
                    
                    <div class="tip-card" data-category="water">
                        <div class="tip-icon">üîç</div>
                        <h3>Water Quality Check</h3>
                        <p>Before drinking: Check color (clear), smell (odorless), taste (no metallic/chemical flavor)</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">‚ö†Ô∏è When in doubt, don't drink</div>
                    </div>

                    <!-- Hygiene Tips -->
                    <div class="tip-card" data-category="hygiene">
                        <div class="tip-icon">üßº</div>
                        <h3 data-translate="handwashing">Proper Hand Washing</h3>
                        <p data-translate="handwashing_tip">Wash hands with soap for 20 seconds before eating, after toilet, and after handling animals</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üéµ Sing "Happy Birthday" twice</div>
                    </div>
                    
                    <div class="tip-card" data-category="hygiene">
                        <div class="tip-icon">üçΩÔ∏è</div>
                        <h3>Food Safety</h3>
                        <p>Eat hot, freshly cooked food. Avoid raw vegetables, street food, and ice during outbreaks</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üå°Ô∏è Cook it, peel it, or forget it</div>
                    </div>
                    
                    <div class="tip-card" data-category="hygiene">
                        <div class="tip-icon">üß¥</div>
                        <h3>Personal Hygiene</h3>
                        <p>Keep fingernails short, bathe daily, wear clean clothes, and avoid touching face with dirty hands</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üí™ Builds immunity</div>
                    </div>
                    
                    <div class="tip-card" data-category="hygiene">
                        <div class="tip-icon">üè†</div>
                        <h3>Home Sanitation</h3>
                        <p>Keep surroundings clean, dispose waste properly, maintain clean toilets, control flies and mosquitoes</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üö´ Prevents disease spread</div>
                    </div>

                    <!-- Emergency Tips -->
                    <div class="tip-card" data-category="emergency">
                        <div class="tip-icon">üå°Ô∏è</div>
                        <h3>Fever Management</h3>
                        <p>For fever: Rest, drink fluids, use ORS, take paracetamol. Seek medical help if fever persists >3 days</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üå°Ô∏è Normal: 98.6¬∞F (37¬∞C)</div>
                    </div>
                    
                    <div class="tip-card" data-category="emergency">
                        <div class="tip-icon">üíß</div>
                        <h3>Dehydration Signs</h3>
                        <p>Watch for: Dry mouth, less urination, dizziness, weakness. Drink ORS immediately</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üéØ 8-10 glasses daily</div>
                    </div>
                    
                    <div class="tip-card" data-category="emergency">
                        <div class="tip-icon">üìû</div>
                        <h3>Emergency Contacts</h3>
                        <p>Health Emergency: 108 | Ambulance: 102 | Poison Control: 1066 | Local Health Center</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üîÑ Available 24/7</div>
                    </div>
                    
                    <div class="tip-card" data-category="emergency">
                        <div class="tip-icon">üéÜ</div>
                        <h3>ORS Preparation</h3>
                        <p>Mix 1 packet ORS in 1 liter clean water. If unavailable: 1 tsp salt + 2 tbsp sugar in 1 liter water</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">‚è∞ Use within 24 hours</div>
                    </div>

                    <!-- Seasonal Tips -->
                    <div class="tip-card" data-category="seasonal">
                        <div class="tip-icon">üåßÔ∏è</div>
                        <h3>Monsoon Precautions</h3>
                        <p>Extra vigilant during rains: Boil all water, avoid flooded areas, check water sources regularly</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üìà Risk increases 3x</div>
                    </div>
                    
                    <div class="tip-card" data-category="seasonal">
                        <div class="tip-icon">‚òÄÔ∏è</div>
                        <h3>Summer Care</h3>
                        <p>Drink more water, avoid direct sun, keep water cool but not with ice, check for algae growth</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üå°Ô∏è Stay hydrated</div>
                    </div>
                    
                    <div class="tip-card" data-category="seasonal">
                        <div class="tip-icon">üçÅ</div>
                        <h3>Festival Season</h3>
                        <p>During festivals: Be extra careful with street food, carry your own water, wash hands frequently</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">üéâ Enjoy safely</div>
                    </div>
                </div>
                
                <!-- Quick Action Buttons -->
                <div style="margin-top: 30px; text-align: center;">
                    <button class="btn" onclick="downloadPreventionGuide()" style="margin: 5px;">üì± Download Guide</button>
                    <button class="btn" onclick="sharePreventionTips()" style="margin: 5px;">üì§ Share Tips</button>
                    <button class="btn" onclick="setReminders()" style="margin: 5px;">‚è∞ Set Reminders</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                login_title: "üîë Complete Registration",
                first_name: "First Name:",
                last_name: "Last Name:",
                age: "Age:",
                gender: "Gender:",
                male: "Male",
                female: "Female",
                other: "Other",
                village: "Village/Area:",
                login_method: "Login Method:",
                phone_otp: "Phone OTP",
                aadhaar_id: "Aadhaar ID",
                email: "Email",
                user_role: "User Role:",
                citizen: "Citizen",
                health_worker: "Health Worker",
                admin: "Admin",
                researcher: "Researcher",
                contact_info: "Contact Information:",
                login_btn: "Complete Registration",
                welcome_back: "üëã Welcome back,",
                report_issue: "Report Issue",
                view_alerts: "View Alerts",
                my_health: "My Health",
                settings: "Settings",
                activity_timeline: "üìã Activity Timeline",
                daily_cases: "üìà Daily Cases vs Resolved (Click to view details)",
                dashboard: "Dashboard",
                feedback: "Feedback",
                prevention: "Prevention",
                logout: "Logout",
                dashboard_title: "üìä Dashboard",
                welcome: "Welcome,",
                total_users: "Total Users",
                active_reports: "Active Reports",
                test_points: "Test Points",
                health_cases: "Health Cases",
                recent_activity: "üìà Recent Activity",
                disease_distribution: "ü¶† Disease Distribution",
                learning_title: "üìö Awareness & Learning Hub",
                videos_tab: "Videos",
                infographics_tab: "Infographics",
                quiz_tab: "Quiz",
                resources_tab: "Resources",
                gps_map_title: "üó∫Ô∏è GPS Water Sources Map",
                my_location: "My Location",
                nearest_safe: "Nearest Safe",
                directions: "Directions",
                refresh: "Refresh",
                water_safety_video: "Water Safety Basics",
                disease_prevention: "Disease Prevention",
                proper_handwashing: "Proper Handwashing",
                water_treatment: "Water Treatment Methods",
                cholera_info: "Cholera Prevention Guide",
                typhoid_info: "Typhoid Awareness",
                diarrhea_info: "Diarrhea Prevention",
                water_testing: "Water Testing Guide",
                weekly_quiz: "Weekly Health Quiz",
                water_quiz: "Water Safety Quiz",
                disease_quiz: "Disease Prevention Quiz",
                safety_quiz: "Community Safety Quiz",
                who_guidelines: "WHO Water Guidelines",
                emergency_contacts: "Emergency Contacts",
                health_centers: "Nearby Health Centers",
                water_sources: "Safe Water Sources",
                latest_complaints: "Latest Complaints",
                feedback_title: "üì§ Report Water Quality Issue",
                location: "Location:",
                water_source: "Water Source:",
                description: "Description:",
                water_rating: "Water Quality Rating:",
                submit_report: "Submit Report",
                prevention_title: "üõ°Ô∏è Water Safety & Prevention Tips",
                handwashing: "Hand Washing",
                handwashing_tip: "Wash hands with soap for 20 seconds before eating and after using toilet",
                boil_water: "Boil Water",
                boil_water_tip: "Boil water for 1 minute before drinking to kill harmful bacteria",
                chlorine_tablets: "Chlorine Tablets",
                chlorine_tip: "Use water purification tablets as directed for safe drinking water",
                safe_storage: "Safe Storage",
                storage_tip: "Store treated water in clean, covered containers"
            },
            hi: {
                login_title: "üîë ‡§≤‡•â‡§ó‡§ø‡§® / ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£",
                login_method: "‡§≤‡•â‡§ó‡§ø‡§® ‡§µ‡§ø‡§ß‡§ø:",
                phone_otp: "‡§´‡•ã‡§® OTP",
                aadhaar_id: "‡§Ü‡§ß‡§æ‡§∞ ID",
                email: "‡§à‡§Æ‡•á‡§≤",
                user_role: "‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ:",
                citizen: "‡§®‡§æ‡§ó‡§∞‡§ø‡§ï",
                health_worker: "‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡§∞‡•ç‡§§‡§æ",
                admin: "‡§™‡•ç‡§∞‡§∂‡§æ‡§∏‡§ï",
                researcher: "‡§∂‡•ã‡§ß‡§ï‡§∞‡•ç‡§§‡§æ",
                contact_info: "‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä:",
                login_btn: "‡§≤‡•â‡§ó‡§ø‡§® / ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£",
                dashboard: "‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
                feedback: "‡§´‡•Ä‡§°‡§¨‡•à‡§ï",
                prevention: "‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ",
                logout: "‡§≤‡•â‡§ó‡§Ü‡§â‡§ü",
                dashboard_title: "üìä ‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°",
                welcome: "‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à,",
                total_users: "‡§ï‡•Å‡§≤ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ",
                active_reports: "‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü",
                test_points: "‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§¨‡§ø‡§Ç‡§¶‡•Å",
                health_cases: "‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§Æ‡§æ‡§Æ‡§≤‡•á",
                recent_activity: "üìà ‡§π‡§æ‡§≤ ‡§ï‡•Ä ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø",
                disease_distribution: "ü¶† ‡§∞‡•ã‡§ó ‡§µ‡§ø‡§§‡§∞‡§£",
                learning_title: "üìö ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ ‡§î‡§∞ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞",
                videos_tab: "‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã",
                infographics_tab: "‡§á‡§®‡•ç‡§´‡•ã‡§ó‡•ç‡§∞‡§æ‡§´‡§ø‡§ï‡•ç‡§∏",
                quiz_tab: "‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä",
                resources_tab: "‡§∏‡§Ç‡§∏‡§æ‡§ß‡§®",
                water_safety_video: "‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§Æ‡•Ç‡§≤ ‡§¨‡§æ‡§§‡•á‡§Ç",
                disease_prevention: "‡§∞‡•ã‡§ó ‡§ï‡•Ä ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ",
                proper_handwashing: "‡§â‡§ö‡§ø‡§§ ‡§π‡§æ‡§• ‡§ß‡•ã‡§®‡§æ",
                water_treatment: "‡§™‡§æ‡§®‡•Ä ‡§â‡§™‡§ö‡§æ‡§∞ ‡§ï‡•á ‡§§‡§∞‡•Ä‡§ï‡•á",
                cholera_info: "‡§π‡•à‡§ú‡§æ ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§ó‡§æ‡§á‡§°",
                typhoid_info: "‡§ü‡§æ‡§á‡§´‡§æ‡§á‡§° ‡§ú‡§æ‡§ó‡§∞‡•Ç‡§ï‡§§‡§æ",
                diarrhea_info: "‡§¶‡§∏‡•ç‡§§ ‡§ï‡•Ä ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ",
                water_testing: "‡§™‡§æ‡§®‡•Ä ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ó‡§æ‡§á‡§°",
                weekly_quiz: "‡§∏‡§æ‡§™‡•ç‡§§‡§æ‡§π‡§ø‡§ï ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä",
                water_quiz: "‡§™‡§æ‡§®‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä",
                disease_quiz: "‡§∞‡•ã‡§ó ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä",
                safety_quiz: "‡§∏‡§æ‡§Æ‡•Å‡§¶‡§æ‡§Ø‡§ø‡§ï ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§§‡•ç‡§§‡§∞‡•Ä",
                who_guidelines: "WHO ‡§™‡§æ‡§®‡•Ä ‡§¶‡§ø‡§∂‡§æ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂",
                emergency_contacts: "‡§Ü‡§™‡§æ‡§§‡§ï‡§æ‡§≤‡•Ä‡§® ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï",
                health_centers: "‡§®‡§ú‡§¶‡•Ä‡§ï‡•Ä ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞",
                water_sources: "‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§™‡§æ‡§®‡•Ä ‡§ï‡•á ‡§∏‡•ç‡§∞‡•ã‡§§",
                latest_complaints: "‡§®‡§µ‡•Ä‡§®‡§§‡§Æ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§‡•á‡§Ç",
                feedback_title: "üì§ ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§ï‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç",
                location: "‡§∏‡•ç‡§•‡§æ‡§®:",
                water_source: "‡§™‡§æ‡§®‡•Ä ‡§ï‡§æ ‡§∏‡•ç‡§∞‡•ã‡§§:",
                description: "‡§µ‡§ø‡§µ‡§∞‡§£:",
                water_rating: "‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó:",
                submit_report: "‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç",
                prevention_title: "üõ°Ô∏è ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§∞‡•ã‡§ï‡§•‡§æ‡§Æ ‡§ï‡•á ‡§∏‡•Å‡§ù‡§æ‡§µ",
                handwashing: "‡§π‡§æ‡§• ‡§ß‡•ã‡§®‡§æ",
                handwashing_tip: "‡§ñ‡§æ‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§î‡§∞ ‡§∂‡•å‡§ö‡§æ‡§≤‡§Ø ‡§ï‡•á ‡§¨‡§æ‡§¶ 20 ‡§∏‡•á‡§ï‡§Ç‡§° ‡§§‡§ï ‡§∏‡§æ‡§¨‡•Å‡§® ‡§∏‡•á ‡§π‡§æ‡§• ‡§ß‡•ã‡§è‡§Ç",
                boil_water: "‡§™‡§æ‡§®‡•Ä ‡§â‡§¨‡§æ‡§≤‡•á‡§Ç",
                boil_water_tip: "‡§π‡§æ‡§®‡§ø‡§ï‡§æ‡§∞‡§ï ‡§¨‡•à‡§ï‡•ç‡§ü‡•Ä‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•ã ‡§Æ‡§æ‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•Ä‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á 1 ‡§Æ‡§ø‡§®‡§ü ‡§§‡§ï ‡§™‡§æ‡§®‡•Ä ‡§â‡§¨‡§æ‡§≤‡•á‡§Ç",
                chlorine_tablets: "‡§ï‡•ç‡§≤‡•ã‡§∞‡•Ä‡§® ‡§ï‡•Ä ‡§ó‡•ã‡§≤‡§ø‡§Ø‡§æ‡§Ç",
                chlorine_tip: "‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§™‡•á‡§Ø‡§ú‡§≤ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂‡§æ‡§®‡•Å‡§∏‡§æ‡§∞ ‡§™‡§æ‡§®‡•Ä ‡§∂‡•Å‡§¶‡•ç‡§ß‡•Ä‡§ï‡§∞‡§£ ‡§ó‡•ã‡§≤‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç",
                safe_storage: "‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§≠‡§Ç‡§°‡§æ‡§∞‡§£",
                storage_tip: "‡§â‡§™‡§ö‡§æ‡§∞‡§ø‡§§ ‡§™‡§æ‡§®‡•Ä ‡§ï‡•ã ‡§∏‡§æ‡§´, ‡§¢‡§ï‡•á ‡§π‡•Å‡§è ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§ü‡•ã‡§∞ ‡§ï‡§∞‡•á‡§Ç"
            }
        };

        let currentLanguage = 'en';
        let currentRating = 0;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                login();
            });

            if (document.getElementById('feedbackForm')) {
                document.getElementById('feedbackForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    submitFeedback();
                });
                
                document.getElementById('photoUpload').addEventListener('change', function(e) {
                    const files = e.target.files;
                    const preview = document.getElementById('photoPreview');
                    preview.innerHTML = '';
                    
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        const div = document.createElement('div');
                        div.style.cssText = 'display: inline-block; margin: 5px; padding: 5px; background: #f0f0f0; border-radius: 5px; font-size: 12px;';
                        div.textContent = `üì∑ ${file.name}`;
                        preview.appendChild(div);
                    }
                });
            }
            
            // Initialize quick report
            updateAdditionalFields('water');
            
            updateTranslations();
        });

        function changeLanguage() {
            currentLanguage = document.getElementById('languageSelect').value;
            updateTranslations();
        }

        function updateTranslations() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translations[currentLanguage][key];
                    } else if (element.tagName === 'OPTION') {
                        element.textContent = translations[currentLanguage][key];
                    } else {
                        element.textContent = translations[currentLanguage][key];
                    }
                }
            });
            updateDynamicContent();
        }

        function updateDynamicContent() {
            const roleGreetings = {
                en: {
                    citizen: "Stay informed about water safety in your community",
                    health_worker: "Monitor health reports and assist your community",
                    admin: "Oversee system statistics and manage operations",
                    researcher: "Analyze data patterns and health trends"
                },
                hi: {
                    citizen: "‡§Ö‡§™‡§®‡•á ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç",
                    health_worker: "‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡•Ä ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§∏‡§Æ‡•Å‡§¶‡§æ‡§Ø ‡§ï‡•Ä ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡§∞‡•á‡§Ç",
                    admin: "‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§Ü‡§Ç‡§ï‡§°‡§º‡•ã‡§Ç ‡§ï‡•Ä ‡§¶‡•á‡§ñ‡§∞‡•á‡§ñ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§® ‡§ï‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§® ‡§ï‡§∞‡•á‡§Ç",
                    researcher: "‡§°‡•á‡§ü‡§æ ‡§™‡•à‡§ü‡§∞‡•ç‡§® ‡§î‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∞‡•Å‡§ù‡§æ‡§®‡•ã‡§Ç ‡§ï‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç"
                }
            };
            
            const alerts = {
                en: [
                    'Unsafe water detected in Village Kamrup - Boil water before use',
                    'Health camp scheduled tomorrow in Village Jorhat - Free checkups',
                    'Water quality improved in Village Tezpur - Safe for consumption'
                ],
                hi: [
                    '‡§ó‡§æ‡§Ç‡§µ ‡§ï‡§æ‡§Æ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§Ö‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§™‡§æ‡§®‡•Ä - ‡§â‡§™‡§Ø‡•ã‡§ó ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§™‡§æ‡§®‡•Ä ‡§â‡§¨‡§æ‡§≤‡•á‡§Ç',
                    '‡§ó‡§æ‡§Ç‡§µ ‡§ú‡•ã‡§∞‡§π‡§æ‡§ü ‡§Æ‡•á‡§Ç ‡§ï‡§≤ ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§∂‡§ø‡§µ‡§ø‡§∞ - ‡§Æ‡•Å‡§´‡•ç‡§§ ‡§ú‡§æ‡§Ç‡§ö',
                    '‡§ó‡§æ‡§Ç‡§µ ‡§§‡•á‡§ú‡§™‡•Å‡§∞ ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§®‡•Ä ‡§ï‡•Ä ‡§ó‡•Å‡§£‡§µ‡§§‡•ç‡§§‡§æ ‡§Æ‡•á‡§Ç ‡§∏‡•Å‡§ß‡§æ‡§∞'
                ]
            };
            
            const alertElement = document.getElementById('liveAlert');
            if (alertElement && alerts[currentLanguage]) {
                const currentAlert = alerts[currentLanguage][Math.floor(Math.random() * alerts[currentLanguage].length)];
                alertElement.textContent = currentAlert;
            }
        }

        function login() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const age = document.getElementById('age').value;
            const gender = document.getElementById('gender').value;
            const village = document.getElementById('village').value;
            const loginMethod = document.getElementById('loginMethod').value;
            const userRole = document.getElementById('userRole').value;
            const contactInput = document.getElementById('contactInput').value;

            if (!firstName || !lastName || !age || !gender || !village || !contactInput) {
                alert('Please fill in all required fields');
                return;
            }

            // Store user data
            const userData = {
                firstName, lastName, age, gender, village, loginMethod, userRole, contactInput
            };
            localStorage.setItem('userData', JSON.stringify(userData));

            // Update UI with user info
            document.getElementById('userName').textContent = firstName + ' ' + lastName;
            updateRoleGreeting(userRole);
            
            // Switch to dashboard
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById('dashboardPage').classList.add('active');
        }

        function updateRoleGreeting(role) {
            const greetings = {
                citizen: "Stay informed about water safety in your community",
                health_worker: "Monitor health reports and assist your community",
                admin: "Oversee system statistics and manage operations",
                researcher: "Analyze data patterns and health trends"
            };
            document.getElementById('roleGreeting').textContent = greetings[role] || greetings.citizen;
        }

        function showAlerts() {
            alert('üö® Current Alerts:\n‚Ä¢ Unsafe water in Village Kamrup\n‚Ä¢ Health camp tomorrow in Village Jorhat\n‚Ä¢ Cholera outbreak warning in District 3');
        }

        function showHealth() {
            alert('üè• Your Health Status:\n‚Ä¢ No recent reports\n‚Ä¢ Last checkup: 2 weeks ago\n‚Ä¢ Recommended: Water quality test');
        }

        function showSettings() {
            alert('‚öôÔ∏è Settings:\n‚Ä¢ Language: ' + currentLanguage.toUpperCase() + '\n‚Ä¢ Notifications: Enabled\n‚Ä¢ Location: Auto-detect');
        }




        // Enhanced Cases Chart Functions
        function filterCasesData() {
            const filter = document.getElementById('casesTimeFilter').value;
            alert('üîç Cases Data Filtered\n\nüìÖ Time Period: ' + filter + '\n\nüìä Updated Analytics:\n‚Ä¢ Data refreshed for selected period\n‚Ä¢ Trends recalculated\n‚Ä¢ Resolution rates updated\n‚Ä¢ Comparative analysis refreshed\n\nFiltered view now active.');
        }
        
        function refreshCasesData() {
            alert('üîÑ Cases Data Refreshed!\n\n‚Ä¢ Latest case reports loaded\n‚Ä¢ Real-time statistics updated\n‚Ä¢ Resolution tracking refreshed\n‚Ä¢ Trend analysis recalculated\n\nLast update: Just now');
        }
        
        function showDayDetails(day) {
            const dayData = {
                'Mon': {
                    newCases: 15,
                    resolved: 12,
                    pending: 3,
                    types: ['Diarrhea: 8', 'Typhoid: 4', 'Cholera: 3'],
                    villages: ['Tezpur: 6', 'Nagaon: 5', 'Silchar: 4'],
                    responseTime: '2.1 hours'
                },
                'Tue': {
                    newCases: 20,
                    resolved: 17,
                    pending: 3,
                    types: ['Diarrhea: 12', 'Typhoid: 5', 'Jaundice: 3'],
                    villages: ['Tezpur: 8', 'Dibrugarh: 7', 'Nagaon: 5'],
                    responseTime: '1.8 hours'
                },
                'Wed': {
                    newCases: 14,
                    resolved: 18,
                    pending: -4,
                    types: ['Diarrhea: 7', 'Typhoid: 4', 'Cholera: 3'],
                    villages: ['Silchar: 6', 'Tezpur: 4', 'Jorhat: 4'],
                    responseTime: '2.3 hours'
                },
                'Thu': {
                    newCases: 10,
                    resolved: 15,
                    pending: -5,
                    types: ['Diarrhea: 5', 'Typhoid: 3', 'Jaundice: 2'],
                    villages: ['Nagaon: 4', 'Dibrugarh: 3', 'Tezpur: 3'],
                    responseTime: '1.9 hours'
                },
                'Fri': {
                    newCases: 12,
                    resolved: 13,
                    pending: -1,
                    types: ['Diarrhea: 6', 'Typhoid: 4', 'Cholera: 2'],
                    villages: ['Silchar: 5', 'Tezpur: 4', 'Nagaon: 3'],
                    responseTime: '2.0 hours'
                },
                'Sat': {
                    newCases: 8,
                    resolved: 11,
                    pending: -3,
                    types: ['Diarrhea: 4', 'Typhoid: 2', 'Jaundice: 2'],
                    villages: ['Dibrugarh: 3', 'Jorhat: 3', 'Silchar: 2'],
                    responseTime: '1.7 hours'
                },
                'Sun': {
                    newCases: 6,
                    resolved: 9,
                    pending: -3,
                    types: ['Diarrhea: 3', 'Typhoid: 2', 'Cholera: 1'],
                    villages: ['Tezpur: 2', 'Nagaon: 2', 'Silchar: 2'],
                    responseTime: '1.5 hours'
                }
            };
            
            const data = dayData[day];
            let message = `üìä ${day} - Detailed Case Analysis:\n\n`;
            message += `üìà New Cases: ${data.newCases}\n`;
            message += `‚úÖ Resolved: ${data.resolved}\n`;
            message += `üìã Net Change: ${data.pending > 0 ? '+' + data.pending : data.pending}\n`;
            message += `‚è±Ô∏è Avg Response: ${data.responseTime}\n\n`;
            
            message += `ü¶† Disease Breakdown:\n`;
            data.types.forEach(type => {
                message += `‚Ä¢ ${type}\n`;
            });
            
            message += `\nüìç Village Distribution:\n`;
            data.villages.forEach(village => {
                message += `‚Ä¢ ${village}\n`;
            });
            
            const resolutionRate = Math.round((data.resolved / (data.newCases + data.resolved)) * 100);
            message += `\nüìä Resolution Rate: ${resolutionRate}%`;
            
            alert(message);
        }

        function showDiseaseChart() {
            alert('ü¶† Disease Distribution Details:\n\nüî¥ Diarrhea: 18 cases (40%)\n   - Age group: 5-45 years\n   - Peak: Monsoon season\n\nüü° Typhoid: 12 cases (25%)\n   - Age group: 15-60 years\n   - Source: Contaminated water\n\nüü† Cholera: 9 cases (20%)\n   - Age group: All ages\n   - Status: Under control\n\nüü¢ Jaundice: 7 cases (15%)\n   - Age group: 20-50 years\n   - Trend: Decreasing');
        }

        function showMapDetails() {
            alert('üó∫Ô∏è Interactive Map Details:\n\nüìç Click on village dots for details:\n‚Ä¢ Green: Safe areas (0 cases)\n‚Ä¢ Yellow: Warning areas (1-5 cases)\n‚Ä¢ Red: High risk areas (6+ cases)\n\nTotal Villages: 102\nAffected Villages: 35\nRecovery Rate: 87%');
        }

        function showVillageDetails(villageName) {
            const villageData = {
                'Kamrup': {
                    cases: 0,
                    population: 12450,
                    status: 'Safe',
                    lastTest: '2 days ago',
                    waterSources: 8,
                    healthWorkers: 3
                },
                'Jorhat': {
                    cases: 0,
                    population: 8920,
                    status: 'Safe',
                    lastTest: '1 day ago',
                    waterSources: 5,
                    healthWorkers: 2
                },
                'Dibrugarh': {
                    cases: 2,
                    population: 15670,
                    status: 'Warning',
                    lastTest: '6 hours ago',
                    waterSources: 12,
                    healthWorkers: 4,
                    diseases: ['Diarrhea: 1', 'Typhoid: 1']
                },
                'Tezpur': {
                    cases: 8,
                    population: 22340,
                    status: 'High Risk',
                    lastTest: '3 hours ago',
                    waterSources: 18,
                    healthWorkers: 6,
                    diseases: ['Cholera: 3', 'Diarrhea: 4', 'Typhoid: 1']
                },
                'Guwahati': {
                    cases: 0,
                    population: 45890,
                    status: 'Safe',
                    lastTest: '4 hours ago',
                    waterSources: 35,
                    healthWorkers: 12
                },
                'Silchar': {
                    cases: 3,
                    population: 18230,
                    status: 'Warning',
                    lastTest: '8 hours ago',
                    waterSources: 14,
                    healthWorkers: 5,
                    diseases: ['Diarrhea: 2', 'Jaundice: 1']
                },
                'Nagaon': {
                    cases: 12,
                    population: 28450,
                    status: 'High Risk',
                    lastTest: '2 hours ago',
                    waterSources: 22,
                    healthWorkers: 8,
                    diseases: ['Cholera: 5', 'Diarrhea: 4', 'Typhoid: 2', 'Jaundice: 1']
                }
            };
            
            const data = villageData[villageName];
            let message = `üè° ${villageName} Village Details:\n\n`;
            message += `üü¢ Status: ${data.status}\n`;
            message += `ü¶† Active Cases: ${data.cases}\n`;
            message += `üë• Population: ${data.population.toLocaleString()}\n`;
            message += `üíß Water Sources: ${data.waterSources}\n`;
            message += `üë©‚Äç‚öïÔ∏è Health Workers: ${data.healthWorkers}\n`;
            message += `üï∞Ô∏è Last Test: ${data.lastTest}\n`;
            
            if (data.diseases) {
                message += `\nü¶† Disease Breakdown:\n`;
                data.diseases.forEach(disease => {
                    message += `‚Ä¢ ${disease}\n`;
                });
            }
            
            alert(message);
        }

        function filterByDisease() {
            const filter = document.getElementById('diseaseFilter').value;
            alert(`üîç Filtering map by: ${filter.toUpperCase()}\n\nThis would show only villages affected by ${filter === 'all' ? 'all diseases' : filter}.\n\nFiltered results would highlight relevant villages and update statistics accordingly.`);
        }

        function refreshMapData() {
            alert('üîÑ Map Data Refreshed!\n\n‚Ä¢ Latest case reports loaded\n‚Ä¢ Village status updated\n‚Ä¢ Real-time data synchronized\n‚Ä¢ Health worker locations updated\n\nLast update: Just now');
            
            // Simulate data refresh with slight changes
            const dots = document.querySelectorAll('.village-dot');
            dots.forEach(dot => {
                dot.style.animation = 'pulse 0.5s';
            });
        }

        function showTooltip(event, text) {
            const tooltip = document.getElementById('villageTooltip');
            tooltip.textContent = text;
            tooltip.style.display = 'block';
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY - 30 + 'px';
        }

        function hideTooltip() {
            document.getElementById('villageTooltip').style.display = 'none';
        }

        function filterSources(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const sources = document.querySelectorAll('.water-source');
            sources.forEach(source => {
                if (type === 'all' || source.dataset.type === type) {
                    source.style.display = 'block';
                } else {
                    source.style.display = 'none';
                }
            });
        }

        function refreshSources() {
            alert('üîÑ Water Sources Refreshed!\n\n‚Ä¢ Latest test results loaded\n‚Ä¢ Distance calculations updated\n‚Ä¢ Availability status verified\n‚Ä¢ New sources added to database\n\nLast update: Just now');
        }

        function getDirections(lat, lng, sourceName) {
            const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
            
            if (confirm(`üß≠ Get directions to ${sourceName}?\n\nThis will open in your maps app.`)) {
                window.open(googleMapsUrl, '_blank');
            }
        }

        function reportIssue(sourceName) {
            alert(`üì¢ Report Issue - ${sourceName}\n\nIssue types:\n1. Water quality changed\n2. Source not working\n3. Contamination suspected\n4. Maintenance needed\n\nYour report will be sent to local authorities.`);
        }

        function viewAllSources() {
            alert('üó∫Ô∏è All Water Sources Map\n\n‚Ä¢ Interactive map with all 156 sources\n‚Ä¢ Real-time status updates\n‚Ä¢ Filter by safety level\n‚Ä¢ Get directions to any source\n\nOpening full map view...');
        }

        // Water source functions
        function showWaterSource(type) {
            const messages = {
                safe: '‚úÖ Tube Well A - SAFE\n\nüìä Test Results:\n‚Ä¢ pH Level: 7.2 (Good)\n‚Ä¢ Bacteria: None detected\n‚Ä¢ Chlorine: 0.5 ppm\n‚Ä¢ Last tested: 2 days ago\n\nüìç GPS: 26.1445¬∞N, 91.7362¬∞E\nüìç Distance: 1.2 km North\nüïí Available: 24/7\n\nüß≠ Get Directions?',
                warning: '‚ö†Ô∏è Hand Pump B - CAUTION\n\nüìä Test Results:\n‚Ä¢ pH Level: 6.8 (Slightly acidic)\n‚Ä¢ Bacteria: Low levels\n‚Ä¢ Iron content: High\n‚Ä¢ Last tested: 1 week ago\n\nüìç GPS: 26.1523¬∞N, 91.7445¬∞E\nüìç Distance: 2.1 km East\nüí° Recommendation: Boil before use\n\nüß≠ Get Directions?',
                unsafe: '‚ùå River Source - UNSAFE\n\nüìä Test Results:\n‚Ä¢ pH Level: 5.9 (Acidic)\n‚Ä¢ Bacteria: High levels detected\n‚Ä¢ E.coli: Present\n‚Ä¢ Last tested: 3 days ago\n\nüìç GPS: 26.1398¬∞N, 91.7298¬∞E\nüìç Distance: 0.8 km South\nüö´ DO NOT USE for drinking'
            };
            alert(messages[type]);
        }

        // GPS Map Functions
        let userLocation = null;
        const waterSources = [
            { name: 'Tube Well A', lat: 26.1445, lng: 91.7362, status: 'safe', distance: 1.2 },
            { name: 'Hand Pump B', lat: 26.1523, lng: 91.7445, status: 'warning', distance: 2.1 },
            { name: 'River Source', lat: 26.1398, lng: 91.7298, status: 'unsafe', distance: 0.8 },
            { name: 'Community Well', lat: 26.1567, lng: 91.7523, status: 'safe', distance: 3.2 },
            { name: 'Government Tank', lat: 26.1234, lng: 91.7654, status: 'safe', distance: 4.1 }
        ];

        function showMarkerPopup(event, name, coords, status) {
            const popup = document.getElementById('markerPopup');
            popup.innerHTML = `<strong>${name}</strong><br>${coords}<br>${status}`;
            popup.style.display = 'block';
            popup.style.left = event.pageX - popup.offsetWidth/2 + 'px';
            popup.style.top = event.pageY - popup.offsetHeight - 10 + 'px';
        }

        function hideMarkerPopup() {
            document.getElementById('markerPopup').style.display = 'none';
        }

        function openGPSLocation(lat, lng, name) {
            const googleMapsUrl = `https://www.google.com/maps?q=${lat},${lng}`;
            const appleMapsUrl = `http://maps.apple.com/?q=${lat},${lng}`;
            
            if (confirm(`Open ${name} location in maps?\n\nGPS: ${lat}¬∞N, ${lng}¬∞E`)) {
                if (navigator.userAgent.includes('iPhone') || navigator.userAgent.includes('iPad')) {
                    window.open(appleMapsUrl, '_blank');
                } else {
                    window.open(googleMapsUrl, '_blank');
                }
            }
        }

        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        updateDistances();
                        alert(`üìç Your Location Found!\n\nGPS: ${userLocation.lat.toFixed(4)}¬∞N, ${userLocation.lng.toFixed(4)}¬∞E\n\nDistances updated below.`);
                    },
                    (error) => {
                        alert('‚ö†Ô∏è Location access denied or unavailable.\nUsing approximate location for distance calculations.');
                        userLocation = { lat: 26.1400, lng: 91.7350 }; // Default Guwahati location
                        updateDistances();
                    }
                );
            } else {
                alert('üö´ Geolocation not supported by this browser.');
            }
        }

        function updateDistances() {
            if (!userLocation) return;
            
            const distanceInfo = document.getElementById('distanceInfo');
            let html = 'üìç Distances from your location:\n';
            
            waterSources.forEach(source => {
                const distance = calculateDistance(userLocation.lat, userLocation.lng, source.lat, source.lng);
                const statusIcon = source.status === 'safe' ? '‚úÖ' : source.status === 'warning' ? '‚ö†Ô∏è' : '‚ùå';
                html += `\n${statusIcon} ${source.name}: ${distance.toFixed(1)} km`;
            });
            
            distanceInfo.textContent = html;
        }

        function calculateDistance(lat1, lng1, lat2, lng2) {
            const R = 6371; // Earth's radius in km
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLng/2) * Math.sin(dLng/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function findNearestSafe() {
            if (!userLocation) {
                alert('üìç Please get your location first!');
                return;
            }
            
            const safeWaterSources = waterSources.filter(source => source.status === 'safe');
            let nearest = safeWaterSources[0];
            let minDistance = calculateDistance(userLocation.lat, userLocation.lng, nearest.lat, nearest.lng);
            
            safeWaterSources.forEach(source => {
                const distance = calculateDistance(userLocation.lat, userLocation.lng, source.lat, source.lng);
                if (distance < minDistance) {
                    minDistance = distance;
                    nearest = source;
                }
            });
            
            alert(`üîç Nearest Safe Water Source:\n\n‚úÖ ${nearest.name}\nDistance: ${minDistance.toFixed(1)} km\nGPS: ${nearest.lat}¬∞N, ${nearest.lng}¬∞E\n\nOpen in maps?`);
            
            if (confirm('Get directions?')) {
                openGPSLocation(nearest.lat, nearest.lng, nearest.name);
            }
        }

        function showAllDirections() {
            if (!userLocation) {
                alert('üìç Please get your location first!');
                return;
            }
            
            let directionsText = 'üß≠ Directions to All Water Sources:\n\n';
            
            waterSources.forEach(source => {
                const distance = calculateDistance(userLocation.lat, userLocation.lng, source.lat, source.lng);
                const statusIcon = source.status === 'safe' ? '‚úÖ' : source.status === 'warning' ? '‚ö†Ô∏è' : '‚ùå';
                const bearing = calculateBearing(userLocation.lat, userLocation.lng, source.lat, source.lng);
                directionsText += `${statusIcon} ${source.name}\n   ${distance.toFixed(1)} km ${bearing}\n   GPS: ${source.lat}¬∞N, ${source.lng}¬∞E\n\n`;
            });
            
            alert(directionsText);
        }

        function calculateBearing(lat1, lng1, lat2, lng2) {
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const lat1Rad = lat1 * Math.PI / 180;
            const lat2Rad = lat2 * Math.PI / 180;
            
            const y = Math.sin(dLng) * Math.cos(lat2Rad);
            const x = Math.cos(lat1Rad) * Math.sin(lat2Rad) - Math.sin(lat1Rad) * Math.cos(lat2Rad) * Math.cos(dLng);
            
            let bearing = Math.atan2(y, x) * 180 / Math.PI;
            bearing = (bearing + 360) % 360;
            
            const directions = ['North', 'Northeast', 'East', 'Southeast', 'South', 'Southwest', 'West', 'Northwest'];
            return directions[Math.round(bearing / 45) % 8];
        }

        function refreshMap() {
            alert('üîÑ Map refreshed!\n\nLatest water source data loaded.\nAll GPS coordinates updated.');
            if (userLocation) {
                updateDistances();
            }
        }

        // Enhanced Map Functions
        function filterMapSources() {
            const filter = document.getElementById('mapFilter').value;
            const markers = document.querySelectorAll('.water-marker');
            
            markers.forEach(marker => {
                if (filter === 'all' || marker.dataset.type === filter) {
                    marker.style.display = 'block';
                } else {
                    marker.style.display = 'none';
                }
            });
            
            alert(`üîç Map filtered to show: ${filter === 'all' ? 'All water sources' : filter + ' sources only'}\n\nVisible markers updated on map.`);
        }

        function refreshMapData() {
            alert('üîÑ Map Data Refreshed!\n\n‚Ä¢ Latest test results loaded\n‚Ä¢ New water sources added\n‚Ä¢ GPS coordinates verified\n‚Ä¢ Safety status updated\n\nLast update: Just now');
        }

        function showSourceDetails(sourceId) {
            const sources = {
                'tube-well-a': '‚úÖ Tube Well A - Detailed Report\n\nüìç Location: 26.1445¬∞N, 91.7362¬∞E\nüìä Distance: 1.2 km North\n\nüóìÔ∏è Test Results (2 days ago):\n‚Ä¢ pH Level: 7.2 (Excellent)\n‚Ä¢ TDS: 180 ppm (Good)\n‚Ä¢ Bacteria: None detected\n‚Ä¢ Chlorine: 0.5 ppm\n‚Ä¢ Fluoride: 0.8 ppm\n\nüï∞Ô∏è Availability: 24/7\nüë• Daily Users: ~150 people\nüîß Last Maintenance: 1 week ago\n\nüéØ Recommendation: Safe for direct consumption',
                'hand-pump-b': '‚ö†Ô∏è Hand Pump B - Detailed Report\n\nüìç Location: 26.1523¬∞N, 91.7445¬∞E\nüìä Distance: 2.1 km East\n\nüóìÔ∏è Test Results (1 week ago):\n‚Ä¢ pH Level: 6.8 (Slightly acidic)\n‚Ä¢ TDS: 420 ppm (High)\n‚Ä¢ Iron: 2.1 ppm (High)\n‚Ä¢ Bacteria: Low levels\n‚Ä¢ Turbidity: 8 NTU\n\nüï∞Ô∏è Availability: 6 AM - 8 PM\nüë• Daily Users: ~80 people\nüîß Maintenance Needed: Iron filter\n\nüéØ Recommendation: Boil before use or use iron removal filter',
                'river-source': '‚ùå River Source - Detailed Report\n\nüìç Location: 26.1398¬∞N, 91.7298¬∞E\nüìä Distance: 0.8 km South\n\nüóìÔ∏è Test Results (3 days ago):\n‚Ä¢ pH Level: 5.9 (Acidic)\n‚Ä¢ E.coli: 1,200 CFU/ml (Very High)\n‚Ä¢ Coliform: Present\n‚Ä¢ Turbidity: 25 NTU (High)\n‚Ä¢ Heavy metals: Detected\n\nüö´ Status: UNSAFE - DO NOT USE\nüö® Health Risk: High\nüîß Action Required: Source isolation\n\nüéØ Recommendation: Avoid completely - seek alternative sources',
                'community-well': '‚úÖ Community Well - Detailed Report\n\nüìç Location: 26.1567¬∞N, 91.7523¬∞E\nüìä Distance: 3.2 km Northeast\n\nüóìÔ∏è Test Results (Today):\n‚Ä¢ pH Level: 7.1 (Good)\n‚Ä¢ TDS: 220 ppm (Acceptable)\n‚Ä¢ Bacteria: None detected\n‚Ä¢ Nitrates: 15 ppm (Safe)\n‚Ä¢ Hardness: 180 ppm (Moderate)\n\nüï∞Ô∏è Availability: 24/7\nüë• Daily Users: ~300 people\nüîß Last Cleaned: 3 days ago\n\nüéØ Recommendation: Safe for consumption',
                'gov-tank': '‚úÖ Government Tank - Detailed Report\n\nüìç Location: 26.1234¬∞N, 91.7654¬∞E\nüìä Distance: 4.1 km Southwest\n\nüóìÔ∏è Test Results (1 day ago):\n‚Ä¢ pH Level: 7.3 (Excellent)\n‚Ä¢ Chlorine: 1.2 ppm (Treated)\n‚Ä¢ TDS: 150 ppm (Low)\n‚Ä¢ Bacteria: None (Chlorinated)\n‚Ä¢ Turbidity: 2 NTU (Clear)\n\nüï∞Ô∏è Availability: 6 AM - 10 PM\nüë• Daily Users: ~500 people\nüîß Treatment: Chlorination system\n\nüéØ Recommendation: Excellent quality, treated water',
                'bore-well-d': '‚ö†Ô∏è Bore Well D - Detailed Report\n\nüìç Location: 26.1389¬∞N, 91.7201¬∞E\nüìä Distance: 2.8 km West\n\nüóìÔ∏è Test Results (5 days ago):\n‚Ä¢ pH Level: 7.0 (Good)\n‚Ä¢ TDS: 850 ppm (Very High)\n‚Ä¢ Salinity: High\n‚Ä¢ Bacteria: None detected\n‚Ä¢ Minerals: Excess dissolved solids\n\nüï∞Ô∏è Availability: 24/7\nüë• Daily Users: ~120 people\nüîß Treatment Needed: RO filtration\n\nüéØ Recommendation: Install RO system or use for non-drinking purposes',
                'spring-water': '‚úÖ Spring Water - Detailed Report\n\nüìç Location: 26.1612¬∞N, 91.7678¬∞E\nüìä Distance: 4.5 km Northeast\n\nüóìÔ∏è Test Results (1 day ago):\n‚Ä¢ pH Level: 7.4 (Excellent)\n‚Ä¢ TDS: 120 ppm (Low)\n‚Ä¢ Natural minerals: Balanced\n‚Ä¢ Bacteria: None detected\n‚Ä¢ Purity: 99.2%\n\nüï∞Ô∏è Availability: 24/7 (Natural flow)\nüë• Daily Users: ~200 people\nüåø Source: Natural mountain spring\n\nüéØ Recommendation: Premium quality natural water'
            };
            
            alert(sources[sourceId] || 'Source details not available.');
        }

        function showMapLegend() {
            alert('‚ÑπÔ∏è Map Legend & Information\n\nüü¢ Green Markers (Safe):\n‚Ä¢ pH: 6.5-8.5\n‚Ä¢ No harmful bacteria\n‚Ä¢ Safe for direct consumption\n\nüü° Yellow Markers (Caution):\n‚Ä¢ Minor quality issues\n‚Ä¢ Treatment recommended\n‚Ä¢ Boiling advised\n\nüî¥ Red Markers (Unsafe):\n‚Ä¢ Contaminated water\n‚Ä¢ Health risk present\n‚Ä¢ Avoid consumption\n\nüìç Marker Labels:\nA=Tube Well, B=Hand Pump, C=Community Well\nG=Government Tank, D=Bore Well, R=River, S=Spring\n\nüìä Coverage Area: 15 km radius\nüîÑ Update Frequency: Every 6 hours');
        }

        // Prevention tips carousel
        let currentTip = 0;
        const tips = document.querySelectorAll('.tip-slide');
        const tipDots = document.querySelectorAll('.tip-dot');

        function showTip(index) {
            tips[currentTip].classList.remove('active');
            tipDots[currentTip].classList.remove('active');
            currentTip = index;
            tips[currentTip].classList.add('active');
            tipDots[currentTip].classList.add('active');
        }

        // Auto-rotate tips every 5 seconds
        setInterval(() => {
            const nextTip = (currentTip + 1) % tips.length;
            showTip(nextTip);
        }, 5000);

        // Enhanced Quick report functions
        let selectedReportType = 'water';
        let attachments = [];
        let currentLocation = null;

        function selectReportType(type) {
            selectedReportType = type;
            document.querySelectorAll('.report-type').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateAdditionalFields(type);
        }



        function updateAdditionalFields(type) {
            const fieldsContainer = document.getElementById('additionalFields');
            fieldsContainer.innerHTML = '';
            
            const fields = {
                water: [
                    { label: 'Water Source Type', type: 'select', options: ['Tube Well', 'Hand Pump', 'River', 'Pond', 'Tank', 'Other'] },
                    { label: 'Affected People Count', type: 'number', placeholder: 'Number of people affected' }
                ],
                health: [
                    { label: 'Patient Age', type: 'number', placeholder: 'Age in years' },
                    { label: 'Symptoms Duration', type: 'select', options: ['< 1 day', '1-3 days', '3-7 days', '> 1 week'] },
                    { label: 'Severity', type: 'select', options: ['Mild', 'Moderate', 'Severe', 'Critical'] }
                ],
                emergency: [
                    { label: 'Emergency Type', type: 'select', options: ['Water Contamination', 'Disease Outbreak', 'Infrastructure Failure', 'Other'] },
                    { label: 'People at Risk', type: 'number', placeholder: 'Number of people at risk' }
                ]
            };
            
            if (fields[type]) {
                fields[type].forEach(field => {
                    const fieldDiv = document.createElement('div');
                    fieldDiv.className = 'field-group';
                    
                    const label = document.createElement('label');
                    label.textContent = field.label;
                    fieldDiv.appendChild(label);
                    
                    if (field.type === 'select') {
                        const select = document.createElement('select');
                        field.options.forEach(option => {
                            const optionEl = document.createElement('option');
                            optionEl.value = option;
                            optionEl.textContent = option;
                            select.appendChild(optionEl);
                        });
                        fieldDiv.appendChild(select);
                    } else {
                        const input = document.createElement('input');
                        input.type = field.type;
                        input.placeholder = field.placeholder || '';
                        fieldDiv.appendChild(input);
                    }
                    
                    fieldsContainer.appendChild(fieldDiv);
                });
            }
        }

        function getCurrentLocationForReport() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        currentLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        addAttachment('üìç GPS Location', 'location');
                    },
                    () => {
                        alert('‚ö†Ô∏è Location access denied. Please enable location services.');
                    }
                );
            } else {
                alert('üö´ Geolocation not supported by this browser.');
            }
        }

        function addAttachment(name, type) {
            attachments.push({ name, type });
            updateAttachmentPreview();
        }

        function updateAttachmentPreview() {
            const preview = document.getElementById('attachmentPreview');
            preview.innerHTML = '';
            
            attachments.forEach((attachment, index) => {
                const item = document.createElement('div');
                item.className = 'attachment-item';
                item.innerHTML = `
                    <span>${attachment.name}</span>
                    <button class="remove-attachment" onclick="removeAttachment(${index})">√ó</button>
                `;
                preview.appendChild(item);
            });
        }

        function removeAttachment(index) {
            attachments.splice(index, 1);
            updateAttachmentPreview();
        }

        function addVoiceNote() {
            addAttachment('üé§ Voice Note (2:30)', 'voice');
            alert('üé§ Voice Recording Started\n\nRecording... (Max 2 minutes)\nPress stop when finished.');
        }

        function addPhoto() {
            addAttachment('üì∑ Photo Evidence', 'photo');
            alert('üì∑ Photo Captured\n\nImage added to report.\nYou can add multiple photos.');
        }

        function submitQuickReport() {
            const location = document.getElementById('locationSelect').value;
            const priority = document.getElementById('prioritySelect').value;
            const description = document.getElementById('quickReportText').value;
            
            if (!location || location === 'Select Location') {
                alert('Please select a location');
                return;
            }
            
            if (!description.trim()) {
                alert('Please describe the issue');
                return;
            }
            
            // Show progress
            const progressDiv = document.getElementById('reportProgress');
            const progressFill = document.querySelector('.progress-fill-report');
            const progressText = document.querySelector('.progress-text');
            
            progressDiv.style.display = 'block';
            
            // Simulate submission progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 20;
                progressFill.style.width = progress + '%';
                
                if (progress === 20) progressText.textContent = 'Validating data...';
                else if (progress === 40) progressText.textContent = 'Uploading attachments...';
                else if (progress === 60) progressText.textContent = 'Notifying health workers...';
                else if (progress === 80) progressText.textContent = 'Generating report ID...';
                else if (progress === 100) {
                    progressText.textContent = 'Report submitted successfully!';
                    clearInterval(interval);
                    
                    setTimeout(() => {
                        const reportId = 'WQ' + Date.now().toString().slice(-6);
                        const priorityIcon = priority === 'emergency' ? 'üö®' : priority === 'urgent' ? '‚ö†Ô∏è' : 'üìã';
                        
                        alert(`‚úÖ Report Submitted Successfully!\n\n${priorityIcon} Priority: ${priority.toUpperCase()}\nüìç Location: ${location}\nüìù Type: ${selectedReportType.toUpperCase()}\nüìé Attachments: ${attachments.length}\n${currentLocation ? 'üó∫Ô∏è GPS: Included' : ''}\n\nüì± SMS alert sent to health workers\nüìß Email confirmation sent\nüÜî Report ID: ${reportId}\n‚è∞ ETA Response: ${priority === 'emergency' ? '15 min' : priority === 'urgent' ? '1 hour' : '4 hours'}`);
                        
                        // Reset form
                        document.getElementById('quickReportText').value = '';
                        document.getElementById('locationSelect').value = 'Select Location';
                        document.getElementById('prioritySelect').value = 'normal';
                        attachments = [];
                        currentLocation = null;
                        updateAttachmentPreview();
                        document.getElementById('additionalFields').innerHTML = '';
                        progressDiv.style.display = 'none';
                        progressFill.style.width = '0%';
                    }, 1000);
                }
            }, 500);
        }



        // Learning section functions
        function showLearningTab(tabName) {
            document.querySelectorAll('.learning-content').forEach(content => content.classList.remove('active'));
            document.querySelectorAll('.learning-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function playVideo(videoType) {
            const videos = {
                'water-safety': 'üé• Water Safety Basics\n\n‚Ä¢ Always boil water for 1 minute\n‚Ä¢ Use clean containers for storage\n‚Ä¢ Check water color and smell\n‚Ä¢ Avoid stagnant water sources\n\nDuration: 5 minutes\nProgress: 100% Complete',
                'disease-prevention': 'ü¶† Disease Prevention\n\n‚Ä¢ Wash hands frequently\n‚Ä¢ Drink only safe water\n‚Ä¢ Eat properly cooked food\n‚Ä¢ Maintain hygiene\n\nDuration: 8 minutes\nProgress: 60% Complete',
                'handwashing': 'üßº Proper Handwashing Technique\n\n‚Ä¢ Wet hands with clean water\n‚Ä¢ Apply soap and lather\n‚Ä¢ Scrub for 20 seconds\n‚Ä¢ Rinse and dry\n\nDuration: 3 minutes\nProgress: Not started',
                'water-treatment': 'üíß Water Treatment Methods\n\n‚Ä¢ Boiling method\n‚Ä¢ Chlorination process\n‚Ä¢ UV treatment\n‚Ä¢ Filtration systems\n\nDuration: 12 minutes\nProgress: 25% Complete'
            };
            alert(videos[videoType]);
        }

        function viewInfographic(type) {
            const infographics = {
                'cholera': 'üìä Cholera Prevention Guide\n\n‚Ä¢ Symptoms: Severe diarrhea, vomiting\n‚Ä¢ Prevention: Safe water, good hygiene\n‚Ä¢ Treatment: ORS, medical care\n‚Ä¢ High-risk areas: Flood-prone regions\n\nDownload PDF available',
                'typhoid': 'üìà Typhoid Awareness\n\n‚Ä¢ Symptoms: High fever, headache\n‚Ä¢ Transmission: Contaminated food/water\n‚Ä¢ Prevention: Vaccination, safe practices\n‚Ä¢ Duration: 2-4 weeks if untreated\n\nView detailed infographic',
                'diarrhea': 'üìã Diarrhea Prevention\n\n‚Ä¢ Causes: Contaminated water, poor hygiene\n‚Ä¢ Prevention: Clean water, handwashing\n‚Ä¢ Treatment: ORS, fluids\n‚Ä¢ When to seek help: Severe dehydration\n\nQuick reference guide',
                'water-testing': 'üî¨ Water Testing Guide\n\n‚Ä¢ Visual inspection\n‚Ä¢ pH testing\n‚Ä¢ Bacteria testing\n‚Ä¢ Chemical analysis\n\nStep-by-step process with images'
            };
            alert(infographics[type]);
        }

        function startQuiz(quizType) {
            const quizzes = {
                'weekly': 'üèÜ Weekly Health Quiz\n\nQuestions: 10\nTime: 5 minutes\nYour Score: 8/10 (80%)\nBest Score: 9/10\n\nTopics: Water safety, hygiene, disease prevention\n\nReady to retake?',
                'water': 'üíß Water Safety Quiz\n\nQuestions: 15\nTime: 8 minutes\nYour Score: 15/15 (100%)\nBadge Earned: Water Safety Expert\n\nCongratulations! Perfect score!',
                'disease': 'ü¶† Disease Prevention Quiz\n\nQuestions: 12\nTime: 6 minutes\nYour Score: 5/12 (42%)\nStatus: Needs improvement\n\nRecommended: Review disease prevention videos',
                'safety': 'üõ°Ô∏è Community Safety Quiz\n\nQuestions: 8\nTime: 4 minutes\nStatus: Not attempted\n\nTopics: Emergency response, community health\n\nStart quiz now?'
            };
            alert(quizzes[quizType]);
        }

        function viewResource(resourceType) {
            const resources = {
                'who-guidelines': 'üåç WHO Water Quality Guidelines\n\n‚Ä¢ Safe drinking water standards\n‚Ä¢ Water treatment recommendations\n‚Ä¢ Health-based targets\n‚Ä¢ Monitoring protocols\n\nOfficial WHO document available',
                'emergency': 'üö® Emergency Contacts\n\n‚Ä¢ Health Emergency: 108\n‚Ä¢ Water Contamination: 1800-XXX-XXXX\n‚Ä¢ District Health Officer: +91-XXXXX-XXXXX\n‚Ä¢ Nearest Hospital: +91-XXXXX-XXXXX\n\n24/7 Available',
                'health-centers': 'üè• Nearby Health Centers\n\n‚Ä¢ Primary Health Center - 2.5 km\n  Timing: 8 AM - 8 PM\n‚Ä¢ Community Health Center - 5.2 km\n  Timing: 24/7\n‚Ä¢ District Hospital - 12.8 km\n  Timing: 24/7 Emergency',
                'water-sources': 'üíß Verified Safe Water Sources\n\n‚Ä¢ Tube Well A - 1.2 km (Safe)\n‚Ä¢ Government Tank - 2.1 km (Treated)\n‚Ä¢ Community Well - 3.5 km (Tested)\n‚Ä¢ Bottled Water Vendor - 0.8 km\n\nUpdated: Today'
            };
            alert(resources[resourceType]);
        }

        // New Learning Hub Functions
        function startCourse(courseType) {
            const courses = {
                'water-basics': 'üìö Water Safety Fundamentals\n\nLesson 5/6: Water Storage Methods\n‚Ä¢ Progress: 75% complete\n‚Ä¢ Next: Final assessment\n‚Ä¢ Estimated time: 8 minutes\n\nContinue learning?',
                'disease-master': 'ü¶† Disease Prevention Mastery\n\nLesson 3/8: Cholera Prevention\n‚Ä¢ Progress: 30% complete\n‚Ä¢ Current topic: Transmission routes\n‚Ä¢ Estimated time: 12 minutes\n\nStart lesson?',
                'emergency-response': 'üö® Emergency Response Course\n\nNot started\n‚Ä¢ 5 interactive lessons\n‚Ä¢ Real-world scenarios\n‚Ä¢ Certificate upon completion\n\nBegin course?',
                'community-health': 'üèòÔ∏è Community Health Leader\n\nAdvanced certification program\n‚Ä¢ 12 comprehensive modules\n‚Ä¢ Mentorship included\n‚Ä¢ WHO recognized certificate\n\nEnroll now?'
            };
            alert(courses[courseType]);
        }

        function startSimulation(simType) {
            alert('üî¨ Virtual Water Testing Lab\n\nInteractive simulation starting...\n\n‚Ä¢ Test pH levels\n‚Ä¢ Check for bacteria\n‚Ä¢ Analyze chemical content\n‚Ä¢ Generate test report\n\nUse mouse to interact with lab equipment!');
        }

        function startGame(gameType) {
            alert('üéÆ Outbreak Control Game\n\nYour mission: Contain disease spread!\n\nüéØ Current high score: 850\nüèÜ Global rank: #47\n‚≠ê Difficulty: Intermediate\n\nReady to play?');
        }

        function startAR(arType) {
            alert('üì± AR Water Source Finder\n\nPoint your camera to discover:\n\nüìç Nearby water sources\n‚úÖ Safety ratings\nüìä Real-time test data\nüß≠ Navigation directions\n\nEnable camera access?');
        }

        function startVR(vrType) {
            alert('ü•Ω Virtual Village Tour\n\n360¬∞ immersive experience:\n\nüèòÔ∏è Explore village layout\nüíß Visit water sources\nüè• Health center tour\nüåßÔ∏è Monsoon challenges\n\nStart VR experience?');
        }

        function joinDiscussion(topic) {
            alert('üí¨ Water Safety Discussion Forum\n\nüìä 45 active members online\nüìù 12 new posts today\nüî• Hot topic: Monsoon preparation\n\nüí° Recent posts:\n‚Ä¢ "Best water storage tips"\n‚Ä¢ "DIY water testing methods"\n‚Ä¢ "Community success story"\n\nJoin discussion?');
        }

        function viewSuccess(type) {
            alert('‚≠ê Local Success Stories\n\nüèÜ Village Kamrup Achievement:\n‚Ä¢ 100% safe water access\n‚Ä¢ Zero disease cases (30 days)\n‚Ä¢ Community-led initiative\n‚Ä¢ 95% participation rate\n\nüìñ Read full story?');
        }

        function joinChallenge(type) {
            alert('üèÉ Weekly Health Challenge\n\nüéØ This week: "Water Source Mapping"\nüë• 234 participants\n‚è∞ 3 days remaining\n\nüèÜ Prizes:\nü•á 1st: Health kit + Certificate\nü•à 2nd: Water testing kit\nü•â 3rd: Educational materials\n\nJoin challenge?');
        }

        function mentorProgram() {
            alert('üë®‚Äçüè´ Peer Mentorship Program\n\nüåü 15 expert mentors available:\n‚Ä¢ Dr. Sharma - Water Quality Expert\n‚Ä¢ Nurse Priya - Disease Prevention\n‚Ä¢ Engineer Raj - Water Systems\n\nüí¨ Get 1-on-1 guidance\nüìÖ Schedule 30-min sessions\nüÜì Completely free\n\nConnect with mentor?');
        }

        function viewCertificate(certType) {
            alert('üèÜ Water Safety Expert Certificate\n\n‚úÖ Earned: March 15, 2024\nüìÖ Valid until: December 2024\nüåç Recognized by WHO standards\nüìä Score: 95/100\n\nüìÑ Certificate features:\n‚Ä¢ Digital verification\n‚Ä¢ LinkedIn integration\n‚Ä¢ Career advancement\n\nDownload certificate?');
        }

        function startCertification(certType) {
            const certs = {
                'disease-prev': 'üìú Disease Prevention Specialist\n\nüìä Progress: 75% complete\nüìö Modules remaining: 2\n‚è∞ Estimated time: 3 hours\n\nNext module: "Outbreak Response"\n\nContinue certification?',
                'community-leader': 'üëë Community Health Leader\n\nüéì Advanced certification\nüìã Prerequisites: ‚úÖ Met\n‚è±Ô∏è Duration: 2 weeks\nüèÜ Recognition: Government approved\n\nStart certification program?'
            };
            alert(certs[certType]);
        }

        function viewBadges() {
            alert('üèÖ Achievement Badges\n\n‚úÖ Earned (12):\nü•á Water Safety Expert\nüî¨ Testing Pro\nüìö Quick Learner\nü§ù Community Helper\n\nüéØ Available (8):\nüåü Water Testing Pro (90% progress)\nüèÜ Disease Detective\nüìä Data Analyst\nüéì Course Completionist\n\nView all badges?');
        }
        
        // Activity Timeline Functions
        function filterActivity(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const items = document.querySelectorAll('.activity-item');
            items.forEach(item => {
                if (type === 'all' || item.dataset.type === type) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        function refreshActivity() {
            alert('üîÑ Activity Feed Refreshed!\n\n‚Ä¢ Latest events loaded\n‚Ä¢ Real-time updates synced\n‚Ä¢ Notifications updated\n\nLast refresh: Just now');
        }
        
        function viewActivityDetails(activityId) {
            const activities = {
                'water-test-1': '‚ö†Ô∏è Water Contamination Alert\n\nüìç Location: Village Kamrup, Tube Well #3\n‚è∞ Detected: 15 minutes ago\nüî¨ Test Results:\n  ‚Ä¢ pH Level: 5.8 (Acidic)\n  ‚Ä¢ E.coli: 1,200 CFU/ml (High)\n  ‚Ä¢ Turbidity: 15 NTU\n\nüö® Actions Taken:\n  ‚Ä¢ Health team dispatched\n  ‚Ä¢ Water source isolated\n  ‚Ä¢ Community alerted\n\nüë• Affected Population: ~450 people',
                'health-case-1': '‚úÖ Cholera Case - Successfully Resolved\n\nüë§ Patient: 45-year-old male\nüìç Location: Village Jorhat\n‚è∞ Reported: 6 hours ago\n‚è∞ Resolved: 1 hour ago\n\nüíä Treatment Timeline:\n  ‚Ä¢ Emergency response: 30 min\n  ‚Ä¢ Hospital admission: 1 hour\n  ‚Ä¢ Full recovery: 6 hours\n\nüè• Medical Team: Dr. Priya\nüìä Recovery Rate: 100%',
                'report-1': 'üì§ Community Feedback Report\n\nüë§ Submitted by: Local Resident\nüìç Location: Village Dibrugarh\n‚è∞ Time: 2 hours ago\n‚≠ê Rating: 4/5 stars\n\nüìù Feedback:\n"Water quality has significantly improved since the new filtration system was installed."\n\nüîß Related Actions:\n  ‚Ä¢ Filtration system installed\n  ‚Ä¢ Follow-up testing completed',
                'outbreak-1': 'ü¶† Disease Outbreak Alert\n\nüìç Location: Village Tezpur\n‚è∞ Alert Issued: 3 hours ago\nüö® Status: Active monitoring\n\nüìä Current Situation:\n  ‚Ä¢ New cases today: 3\n  ‚Ä¢ Total active cases: 8\n  ‚Ä¢ Disease type: Diarrhea\n\nüõ°Ô∏è Prevention Measures:\n  ‚Ä¢ Water boiling advisory issued\n  ‚Ä¢ Health camps set up\n\nüë• Response Team: 6 health workers'
            };
            alert(activities[activityId] || 'Activity details not available.');
        }
        
        function viewAllActivity() {
            alert('üìú Complete Activity Timeline\n\nüìä Last 24 Hours Summary:\n‚Ä¢ Total events: 47\n‚Ä¢ Urgent alerts: 8\n‚Ä¢ Resolved cases: 23\n‚Ä¢ Ongoing issues: 16\n\nüîç Filter Options:\n‚Ä¢ By time period\n‚Ä¢ By village/location\n‚Ä¢ By event type\n‚Ä¢ By priority level\n\nOpen detailed timeline view?');
        }
        
        // Disease Analytics Functions
        function filterDiseaseData() {
            const filter = document.getElementById('diseaseTimeFilter').value;
            alert('üîç Disease Data Filtered\n\nüìÖ Time Period: ' + filter + '\n\nüìä Updated Statistics:\n‚Ä¢ Data refreshed for selected period\n‚Ä¢ Trends recalculated\n‚Ä¢ Comparative analysis updated\n\nFiltered view now active.');
        }
        
        function refreshDiseaseData() {
            alert('üîÑ Disease Data Refreshed!\n\n‚Ä¢ Latest case reports loaded\n‚Ä¢ Real-time statistics updated\n‚Ä¢ Trend indicators refreshed\n‚Ä¢ Recovery rates recalculated\n\nLast update: Just now');
        }
        
        function showDiseaseDetails(diseaseType) {
            const diseases = {
                'diarrhea': 'üî¥ Diarrhea - Detailed Analysis\n\nüìä Current Status:\n‚Ä¢ Active Cases: 18 (40% of total)\n‚Ä¢ Trend: ‚Üë +3 cases this week\n‚Ä¢ Peak Season: Monsoon (Jun-Sep)\n‚Ä¢ Age Group: 5-45 years most affected\n\nüéØ Risk Factors:\n‚Ä¢ Contaminated water sources\n‚Ä¢ Poor sanitation\n‚Ä¢ Monsoon flooding\n\nüíä Treatment Protocol:\n‚Ä¢ ORS therapy\n‚Ä¢ Hydration monitoring\n‚Ä¢ Antibiotic if severe\n\nüìç Affected Villages:\n‚Ä¢ Tezpur: 6 cases\n‚Ä¢ Nagaon: 4 cases\n‚Ä¢ Others: 8 cases',
                'typhoid': 'üü° Typhoid - Detailed Analysis\n\nüìä Current Status:\n‚Ä¢ Active Cases: 12 (25% of total)\n‚Ä¢ Trend: ‚Üì -1 case this week\n‚Ä¢ Status: Stable, under control\n‚Ä¢ Age Group: 15-60 years\n\nüéØ Risk Factors:\n‚Ä¢ Contaminated food/water\n‚Ä¢ Poor hygiene practices\n‚Ä¢ Overcrowded areas\n\nüíä Treatment Protocol:\n‚Ä¢ Antibiotic therapy\n‚Ä¢ Fever management\n‚Ä¢ Isolation if needed\n\nüìç Affected Villages:\n‚Ä¢ Dibrugarh: 4 cases\n‚Ä¢ Silchar: 3 cases\n‚Ä¢ Others: 5 cases',
                'cholera': 'üü† Cholera - Detailed Analysis\n\nüìä Current Status:\n‚Ä¢ Active Cases: 9 (20% of total)\n‚Ä¢ Trend: ‚Üí No change this week\n‚Ä¢ Status: Controlled outbreak\n‚Ä¢ Age Group: All ages at risk\n\nüéØ Risk Factors:\n‚Ä¢ Unsafe water sources\n‚Ä¢ Poor sanitation\n‚Ä¢ Contaminated food\n\nüíä Treatment Protocol:\n‚Ä¢ Immediate ORS\n‚Ä¢ IV fluids if severe\n‚Ä¢ Antibiotic therapy\n‚Ä¢ Isolation measures\n\nüìç Affected Villages:\n‚Ä¢ Tezpur: 3 cases\n‚Ä¢ Nagaon: 5 cases\n‚Ä¢ Others: 1 case',
                'jaundice': 'üü¢ Jaundice - Detailed Analysis\n\nüìä Current Status:\n‚Ä¢ Active Cases: 7 (15% of total)\n‚Ä¢ Trend: ‚Üì -2 cases this week\n‚Ä¢ Status: Decreasing trend\n‚Ä¢ Age Group: 20-50 years\n\nüéØ Risk Factors:\n‚Ä¢ Hepatitis A/E transmission\n‚Ä¢ Contaminated water\n‚Ä¢ Poor food hygiene\n\nüíä Treatment Protocol:\n‚Ä¢ Supportive care\n‚Ä¢ Rest and hydration\n‚Ä¢ Liver function monitoring\n‚Ä¢ Vaccination if available\n\nüìç Affected Villages:\n‚Ä¢ Silchar: 2 cases\n‚Ä¢ Nagaon: 1 case\n‚Ä¢ Others: 4 cases'
            };
            alert(diseases[diseaseType] || 'Disease details not available.');
        }

        function logout() {
            document.getElementById('dashboardPage').classList.remove('active');
            document.getElementById('loginPage').classList.add('active');
            document.getElementById('loginForm').reset();
        }

        // New dashboard functions
        function showNotifications() {
            alert('üîî Notifications:\n\n‚Ä¢ Water test results available for Village Kamrup\n‚Ä¢ Health worker assigned to your area\n‚Ä¢ New prevention guidelines published\n‚Ä¢ Community meeting scheduled for tomorrow\n‚Ä¢ Emergency contact updated');
        }

        function showAnalytics() {
            alert('üìä Analytics Dashboard:\n\nüìà This Week:\n‚Ä¢ Reports submitted: 45 (+12%)\n‚Ä¢ Issues resolved: 38 (+8%)\n‚Ä¢ Response time: 2.3h (-15min)\n‚Ä¢ User engagement: 78% (+5%)\n\nüéØ Key Metrics:\n‚Ä¢ Water safety score: 87%\n‚Ä¢ Community participation: 65%\n‚Ä¢ Health improvement: 23%');
        }

        function showUserDetails() {
            alert('üë• User Statistics:\n\nüìà Total Users: 5,247\n‚Ä¢ Citizens: 4,892 (93%)\n‚Ä¢ Health Workers: 298 (6%)\n‚Ä¢ Admins: 42 (1%)\n‚Ä¢ Researchers: 15 (<1%)\n\nüìÖ Growth:\n‚Ä¢ New registrations today: 23\n‚Ä¢ Active users (24h): 1,847\n‚Ä¢ Monthly growth: +12%');
        }

        function showReportsDetails() {
            alert('üìå Active Reports (89):\n\nüî¥ Urgent (23):\n‚Ä¢ Water contamination: 15\n‚Ä¢ Health emergencies: 8\n\nüü° Normal (66):\n‚Ä¢ Quality feedback: 42\n‚Ä¢ Maintenance requests: 24\n\nüìà Today: 12 new, 8 resolved\nüï∞Ô∏è Avg resolution: 2.3 hours');
        }

        function showTestPoints() {
            alert('üíß Water Test Points (156):\n\n‚úÖ Safe Sources (134):\n‚Ä¢ Tube wells: 89\n‚Ä¢ Government tanks: 28\n‚Ä¢ Community wells: 17\n\n‚ö†Ô∏è Unsafe Sources (22):\n‚Ä¢ Contaminated wells: 15\n‚Ä¢ River sources: 7\n\nüìÖ Today: 23 tests completed\nüéØ Success rate: 86%');
        }

        function showHealthCases() {
            alert('ü¶† Health Cases (23):\n\nüü¢ Active Cases (8):\n‚Ä¢ Diarrhea: 4\n‚Ä¢ Typhoid: 2\n‚Ä¢ Cholera: 1\n‚Ä¢ Jaundice: 1\n\n‚úÖ Resolved (15):\n‚Ä¢ Full recovery: 13\n‚Ä¢ Improving: 2\n\nüìà Recovery rate: 87%\nüï∞Ô∏è Avg treatment: 5.2 days');
        }

        function showWaterQuality() {
            alert('üîç Water Quality Index (87%):\n\nüü¢ Excellent (45%):\n‚Ä¢ pH: 7.0-7.5\n‚Ä¢ No contamination\n‚Ä¢ Safe for consumption\n\nüü° Good (42%):\n‚Ä¢ pH: 6.5-7.0 or 7.5-8.0\n‚Ä¢ Minor treatment needed\n\nüü† Poor (13%):\n‚Ä¢ Requires immediate treatment\n‚Ä¢ Not safe for drinking');
        }

        function showResponseTime() {
            alert('‚è±Ô∏è Response Time Analytics:\n\nüéØ Average: 2.3 hours\n‚Ä¢ Emergency: 45 minutes\n‚Ä¢ Urgent: 1.8 hours\n‚Ä¢ Normal: 4.2 hours\n\nüìà Improvement: -15 minutes\nüÜô Target: <2 hours\nüèÜ Best time: 23 minutes');
        }

        // Health Assistant Chat Functions
        const healthResponses = {
            'water-safe': 'üíß To check if your water is safe:\n‚Ä¢ Look: Clear, no color/particles\n‚Ä¢ Smell: No unusual odors\n‚Ä¢ Taste: No metallic/chemical taste\n‚Ä¢ When in doubt: Boil for 1 minute\n‚Ä¢ Get it tested at nearest center',
            'symptoms': 'ü§¢ Common water-related symptoms:\n‚Ä¢ Diarrhea, vomiting, stomach pain\n‚Ä¢ Fever, headache, weakness\n‚Ä¢ Dehydration signs\nüè• Seek medical help if severe!',
            'prevention': 'üõ°Ô∏è Prevention tips:\n‚Ä¢ Boil water before drinking\n‚Ä¢ Wash hands frequently\n‚Ä¢ Use clean storage containers\n‚Ä¢ Avoid street food during outbreaks\n‚Ä¢ Get vaccinated when available',
            'cholera': 'ü¶† Cholera prevention:\n‚Ä¢ Drink only boiled/bottled water\n‚Ä¢ Eat hot, freshly cooked food\n‚Ä¢ Avoid raw vegetables/fruits\n‚Ä¢ Practice good hygiene\n‚Ä¢ Report cases immediately',
            'typhoid': 'ü§í Typhoid prevention:\n‚Ä¢ Vaccination recommended\n‚Ä¢ Safe water and food only\n‚Ä¢ Wash hands regularly\n‚Ä¢ Avoid ice and street food',
            'diarrhea': 'üí© For diarrhea:\n‚Ä¢ Drink ORS solution\n‚Ä¢ Stay hydrated\n‚Ä¢ Eat bland foods (rice, banana)\n‚Ä¢ Avoid dairy and spicy food\n‚Ä¢ See doctor if blood/fever',
            'emergency': 'üè• Emergency contacts:\n‚Ä¢ Health Emergency: 108\n‚Ä¢ Poison Control: 1066\n‚Ä¢ Local Health Center: Call now\n‚Ä¢ Ambulance: 102',
            'test': 'üî¨ Water testing:\n‚Ä¢ Nearest lab: 2.5km away\n‚Ä¢ Cost: ‚Çπ50-200\n‚Ä¢ Results: 24-48 hours\n‚Ä¢ Book online or walk-in'
        };

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            addMessage(message, 'user');
            input.value = '';
            
            setTimeout(() => {
                const response = getHealthResponse(message);
                addMessage(response, 'bot');
            }, 1000);
        }

        function handleChatEnter(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function addMessage(text, type) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = type + '-message';
            messageDiv.textContent = text;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function getHealthResponse(message) {
            const msg = message.toLowerCase();
            
            if (msg.includes('water') && (msg.includes('safe') || msg.includes('drink'))) {
                return healthResponses['water-safe'];
            } else if (msg.includes('symptom') || msg.includes('sick') || msg.includes('pain')) {
                return healthResponses['symptoms'];
            } else if (msg.includes('prevent') || msg.includes('avoid')) {
                return healthResponses['prevention'];
            } else if (msg.includes('cholera')) {
                return healthResponses['cholera'];
            } else if (msg.includes('typhoid')) {
                return healthResponses['typhoid'];
            } else if (msg.includes('diarrhea') || msg.includes('loose motion')) {
                return healthResponses['diarrhea'];
            } else if (msg.includes('emergency') || msg.includes('help') || msg.includes('urgent')) {
                return healthResponses['emergency'];
            } else if (msg.includes('test') || msg.includes('lab')) {
                return healthResponses['test'];
            } else {
                return 'ü§ñ I can help with:\n‚Ä¢ Water safety questions\n‚Ä¢ Disease symptoms\n‚Ä¢ Prevention tips\n‚Ä¢ Emergency contacts\n‚Ä¢ Testing information\n\nTry asking: "Is my water safe?" or "Cholera prevention"';
            }
        }

        function askQuickQuestion(type) {
            const questions = {
                'water-safe': 'Is my water safe to drink?',
                'symptoms': 'What are water-related disease symptoms?',
                'prevention': 'How to prevent water-borne diseases?'
            };
            
            const question = questions[type];
            addMessage(question, 'user');
            
            setTimeout(() => {
                const response = healthResponses[type];
                addMessage(response, 'bot');
            }, 500);
        }

        function showSection(section) {
            // Hide all sections
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('feedbackSection').style.display = 'none';
            document.getElementById('preventionSection').style.display = 'none';

            // Show selected section
            document.getElementById(section + 'Section').style.display = 'block';

            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        function setRating(rating) {
            currentRating = rating;
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function submitFeedback() {
            const location = document.getElementById('locationDropdown').value;
            const issueType = document.getElementById('issueType').value;
            const description = document.getElementById('issueDescription').value;
            
            if (!location) {
                alert('Please select a location');
                return;
            }
            if (!issueType) {
                alert('Please select an issue type');
                return;
            }
            if (!description.trim()) {
                alert('Please provide a detailed description');
                return;
            }
            if (currentRating === 0) {
                alert('Please provide a water quality rating');
                return;
            }

            const reportId = 'WQ' + Date.now().toString().slice(-6);
            const priority = document.getElementById('priorityLevel').value;
            
            alert(`‚úÖ Enhanced Report Submitted Successfully!\n\nüìã Report ID: ${reportId}\nüìç Location: ${location}\nüö® Priority: ${priority}\n‚≠ê Rating: ${currentRating}/5 stars\n\nüì± SMS alert sent to health workers\nüìß Email confirmation sent\n‚è∞ Expected response: ${priority === 'Emergency' ? '15 min' : priority === 'Urgent' ? '1 hour' : '4 hours'}`);
            
            document.getElementById('feedbackForm').reset();
            currentRating = 0;
            document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
            document.getElementById('photoPreview').innerHTML = '';
        }
        
        function getCurrentLocationForFeedback() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        alert(`üìç GPS Location Added!\n\nLatitude: ${position.coords.latitude.toFixed(6)}\nLongitude: ${position.coords.longitude.toFixed(6)}\n\nLocation will be included in your report.`);
                    },
                    () => {
                        alert('‚ö†Ô∏è Location access denied. Please enable location services.');
                    }
                );
            } else {
                alert('üö´ Geolocation not supported by this browser.');
            }
        }
        
        // Prevention Section Functions
        function showPreventionCategory(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const cards = document.querySelectorAll('.tip-card');
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
        
        function downloadPreventionGuide() {
            alert('üì± Prevention Guide Download\n\nüìù Comprehensive PDF guide includes:\n‚Ä¢ All prevention tips\n‚Ä¢ Emergency procedures\n‚Ä¢ Contact numbers\n‚Ä¢ Seasonal guidelines\n‚Ä¢ Quick reference charts\n\nüìß Guide will be sent to your email\nüì± Also available offline on your device');
        }
        
        function sharePreventionTips() {
            alert('üì§ Share Prevention Tips\n\nüì± Share via:\n‚Ä¢ WhatsApp groups\n‚Ä¢ SMS to contacts\n‚Ä¢ Social media\n‚Ä¢ Print flyers\n\nüåê Help spread awareness in your community!\nüë• Together we can prevent water-borne diseases');
        }
        
        function setReminders() {
            alert('‚è∞ Prevention Reminders Set!\n\nüîî Daily reminders for:\n‚Ä¢ Boil water (6 AM)\n‚Ä¢ Hand washing (before meals)\n‚Ä¢ Water storage check (evening)\n‚Ä¢ Weekly container cleaning\n\nüì± Notifications enabled\n‚öôÔ∏è Customize in settings');
        }

        // Simulate real-time data updates
        setInterval(function() {
            // Update statistics with random variations
            const stats = document.querySelectorAll('.stat-number');
            stats.forEach(stat => {
                const currentValue = parseInt(stat.textContent.replace(',', ''));
                const variation = Math.floor(Math.random() * 10) - 5;
                const newValue = Math.max(0, currentValue + variation);
                stat.textContent = newValue.toLocaleString();
            });
            
            // Update live alerts
            const alerts = [
                'Unsafe water detected in Village Kamrup - Boil water before use',
                'Health camp scheduled tomorrow in Village Jorhat - Free checkups',
                'Water quality improved in Village Tezpur - Safe for consumption',
                'Cholera outbreak contained in District 3 - Preventive measures active',
                'New water testing facility opened in Village Dibrugarh'
            ];
            const randomAlert = alerts[Math.floor(Math.random() * alerts.length)];
            document.getElementById('liveAlert').textContent = randomAlert;
        }, 30000); // Update every 30 seconds
    </script>
</body>
</html>