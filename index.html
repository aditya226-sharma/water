<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Quality Monitor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 24px;
            font-weight: bold;
        }

        .lang-selector {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
        }

        .page {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .page.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Login Page Styles */
        .login-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            margin: 30px auto;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Welcome Section */
        .welcome-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            text-align: center;
        }

        .welcome-title {
            font-size: 24px;
            margin-bottom: 10px;
        }

        .role-greeting {
            font-size: 16px;
            opacity: 0.9;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .quick-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 12px 8px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .quick-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Enhanced Stats */
        .stat-growth {
            font-size: 12px;
            margin-top: 5px;
            opacity: 0.8;
        }

        .growth-positive { color: #4CAF50; }
        .growth-negative { color: #f44336; }

        /* Disease Map */
        .disease-map {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .map-legend {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
        }

        .map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .map-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .map-refresh-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .case-count {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 8px;
            font-weight: bold;
            color: white;
        }

        .map-stats {
            display: flex;
            justify-content: space-around;
            margin: 15px 0;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            display: block;
            font-size: 18px;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 11px;
            color: #666;
        }

        /* Dashboard Content Highlighting */
        .dashboard {
            position: relative;
            overflow: hidden;
        }

        .dashboard::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
            pointer-events: none;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .welcome-section {
            animation: glow 2s ease-in-out infinite alternate;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.3);
        }

        @keyframes glow {
            from { box-shadow: 0 0 20px rgba(102, 126, 234, 0.3); }
            to { box-shadow: 0 0 30px rgba(102, 126, 234, 0.6); }
        }

        .stat-card {
            position: relative;
            overflow: hidden;
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .stat-card:hover::after {
            left: 100%;
        }

        .alerts-bar {
            position: relative;
            overflow: hidden;
        }

        .alerts-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24, #ff6b6b);
            background-size: 200% 200%;
            animation: alertGradient 2s ease infinite;
            z-index: -1;
        }

        @keyframes alertGradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .widget {
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .widget:hover {
            border-color: rgba(102, 126, 234, 0.5);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        .chart-container {
            position: relative;
        }

        .chart-container::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #667eea, #764ba2, #667eea);
            background-size: 200% 200%;
            animation: borderGlow 3s ease infinite;
            border-radius: 17px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .chart-container:hover::before {
            opacity: 1;
        }

        @keyframes borderGlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .disease-map {
            position: relative;
        }

        .interactive-map {
            box-shadow: inset 0 0 20px rgba(102, 126, 234, 0.1);
            transition: box-shadow 0.3s;
        }

        .interactive-map:hover {
            box-shadow: inset 0 0 30px rgba(102, 126, 234, 0.2);
        }

        .village-dot {
            animation: pulse 2s infinite;
        }

        .village-dot.risk {
            animation: urgentPulse 1s infinite;
        }

        @keyframes urgentPulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(244, 67, 54, 0.7); }
            70% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(244, 67, 54, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(244, 67, 54, 0); }
        }

        .safe { background: #4CAF50; }
        .risk { background: #f44336; }
        .warning { background: #FF9800; }

        /* Widgets */
        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .widget {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .widget-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        /* Alerts Bar */
        .alerts-bar {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* Inline Feedback */
        .inline-feedback {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .feedback-options {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .feedback-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }

        /* Enhanced Learning Section */
        .learning-section {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .learning-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .learning-tab {
            background: none;
            border: none;
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s;
            font-weight: 500;
        }

        .learning-tab.active {
            background: #667eea;
            color: white;
        }

        .learning-content {
            display: none;
        }

        .learning-content.active {
            display: block;
        }

        .learning-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .learning-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .learning-item:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .learning-item.video {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
        }

        .learning-item.infographic {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }

        .learning-item.quiz {
            background: linear-gradient(135deg, #FF9800 0%, #f57c00 100%);
            color: white;
        }

        .learning-item.tips {
            background: linear-gradient(135deg, #9C27B0 0%, #7B1FA2 100%);
            color: white;
        }

        .learning-icon {
            font-size: 40px;
            margin-bottom: 15px;
            display: block;
        }

        .learning-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .learning-desc {
            font-size: 12px;
            opacity: 0.9;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: rgba(255,255,255,0.8);
            border-radius: 3px;
            transition: width 0.3s;
        }

        .login-title {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: transform 0.2s;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        /* Dashboard Styles */
        .dashboard {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-status {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 5px;
        }

        .action-count {
            font-size: 10px;
            background: rgba(255,255,255,0.3);
            padding: 2px 6px;
            border-radius: 10px;
            margin-top: 3px;
        }

        .stat-detail {
            font-size: 11px;
            opacity: 0.7;
            margin-top: 3px;
        }

        .stat-card {
            cursor: pointer;
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .stat-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
        }

        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .chart-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .chart {
            height: 200px;
            background: #f8f9fa;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }

        .chart:hover {
            background: #e9ecef;
            transform: scale(1.02);
        }

        .chart-interactive {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-weight: bold;
        }

        .disease-chart {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            height: 100%;
            align-items: center;
        }

        .disease-item {
            background: rgba(255,255,255,0.1);
            padding: 8px;
            border-radius: 5px;
            text-align: center;
            font-size: 12px;
        }

        .cases-chart {
            display: flex;
            justify-content: space-around;
            align-items: end;
            height: 100%;
            padding: 20px;
        }

        .bar {
            width: 40px;
            background: linear-gradient(to top, #ff6b6b, #ee5a24);
            border-radius: 5px 5px 0 0;
            display: flex;
            align-items: end;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .bar.resolved {
            background: linear-gradient(to top, #4CAF50, #45a049);
        }

        /* Enhanced Map */
        .interactive-map {
            height: 200px;
            background: linear-gradient(135deg, #4CAF50 0%, #FF9800 50%, #f44336 100%);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .village-dot {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid white;
        }

        .village-dot:hover {
            transform: scale(1.5);
            z-index: 10;
        }

        .village-tooltip {
            position: absolute;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            display: none;
            z-index: 20;
        }

        /* Water Sources */
        .water-sources {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .water-source {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .water-source:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .water-source.unsafe {
            border-left-color: #f44336;
        }

        .water-source.warning {
            border-left-color: #FF9800;
        }

        .gps-info {
            font-size: 10px;
            color: #666;
            margin-top: 5px;
        }

        /* GPS Map Widget */
        .gps-map-widget {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .map-container {
            width: 100%;
            height: 300px;
            background: linear-gradient(45deg, #e8f5e8 0%, #f0f8ff 50%, #fff5f5 100%);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            border: 2px solid #ddd;
        }

        .water-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 3px solid white;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .water-marker:hover {
            transform: scale(1.3);
            z-index: 10;
        }

        .water-marker.safe {
            background: #4CAF50;
        }

        .water-marker.warning {
            background: #FF9800;
        }

        .water-marker.unsafe {
            background: #f44336;
        }

        .marker-popup {
            position: absolute;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            display: none;
            z-index: 20;
            min-width: 150px;
        }

        .marker-popup::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border: 5px solid transparent;
            border-top-color: rgba(0,0,0,0.9);
        }

        .map-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            justify-content: center;
        }

        .map-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .map-btn:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }

        .distance-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 12px;
        }

        /* Health Assistant Chat Styles */
        .chat-container {
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .chat-messages {
            height: 150px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
        }

        .bot-message, .user-message {
            margin: 8px 0;
            padding: 8px 12px;
            border-radius: 15px;
            max-width: 80%;
            font-size: 13px;
        }

        .bot-message {
            background: #e3f2fd;
            color: #1976d2;
        }

        .user-message {
            background: #667eea;
            color: white;
            margin-left: auto;
            text-align: right;
        }

        .chat-input-container {
            display: flex;
            padding: 10px;
            background: white;
        }

        .chat-input-container input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        .chat-send-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            margin-left: 8px;
            cursor: pointer;
        }

        .quick-questions {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .quick-q-btn {
            background: #f0f0f0;
            border: 1px solid #ddd;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-q-btn:hover {
            background: #667eea;
            color: white;
        }

        /* Enhanced Water Sources Styles */
        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .source-controls {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .filter-btn {
            background: #f0f0f0;
            border: 1px solid #ddd;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .refresh-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 11px;
            cursor: pointer;
        }

        .sources-stats {
            display: flex;
            gap: 8px;
            margin-bottom: 10px;
        }

        .stat-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: bold;
        }

        .safe-count {
            background: #d4edda;
            color: #155724;
        }

        .warning-count {
            background: #fff3cd;
            color: #856404;
        }

        .unsafe-count {
            background: #f8d7da;
            color: #721c24;
        }

        .source-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 3px;
        }

        .source-name {
            font-weight: bold;
            font-size: 13px;
        }

        .source-rating {
            font-size: 11px;
            color: #ff9800;
        }

        .source-details {
            font-size: 11px;
            color: #666;
            margin-bottom: 3px;
        }

        .source-actions {
            display: flex;
            gap: 5px;
            margin-top: 8px;
        }

        .action-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 3px 8px;
            border-radius: 8px;
            font-size: 10px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .action-btn:hover {
            background: #5a6fd8;
        }

        .action-btn.danger {
            background: #dc3545;
        }

        .sources-footer {
            margin-top: 10px;
            text-align: center;
        }

        .view-all-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 15px;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s;
        }

        .view-all-btn:hover {
            background: #e9ecef;
        }

        /* Enhanced Quick Report Styles */
        .report-counter {
            font-size: 12px;
            background: rgba(102, 126, 234, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 10px;
        }

        .form-row-quick {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }

        .quick-select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 13px;
        }

        .report-details textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            resize: vertical;
            font-family: inherit;
        }

        .additional-fields {
            margin-top: 10px;
        }

        .field-group {
            margin: 8px 0;
        }

        .field-group label {
            display: block;
            font-size: 12px;
            margin-bottom: 3px;
            color: #666;
        }

        .field-group input, .field-group select {
            width: 100%;
            padding: 6px;
            border: 1px solid #ddd;
            border-radius: 3px;
            font-size: 12px;
        }

        .attachment-section {
            margin: 10px 0;
        }

        .attachment-preview {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .attachment-item {
            background: #f0f0f0;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .remove-attachment {
            background: #ff4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 16px;
            height: 16px;
            font-size: 10px;
            cursor: pointer;
        }

        .submit-btn {
            background: #28a745 !important;
        }

        .report-progress {
            margin-top: 10px;
        }

        .progress-bar-report {
            width: 100%;
            height: 6px;
            background: #f0f0f0;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill-report {
            height: 100%;
            background: #28a745;
            width: 0%;
            transition: width 0.3s;
        }

        .progress-text {
            font-size: 12px;
            text-align: center;
            margin-top: 5px;
            color: #666;
        }

        /* Enhanced Quick Report */
        .quick-report-form {
            display: grid;
            gap: 10px;
        }

        .report-type-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .report-type {
            background: #f8f9fa;
            border: 2px solid #ddd;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
            position: relative;
        }

        .report-type.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .report-type.emergency {
            background: #ff4444;
            color: white;
            border-color: #ff4444;
            animation: emergencyBlink 1s infinite;
        }

        @keyframes emergencyBlink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.7; }
        }

        /* Prevention Tips Carousel */
        .tips-carousel {
            position: relative;
            overflow: hidden;
            height: 80px;
        }

        .tip-slide {
            position: absolute;
            width: 100%;
            opacity: 0;
            transition: opacity 0.5s;
            padding: 10px;
            text-align: center;
        }

        .tip-slide.active {
            opacity: 1;
        }

        .tip-nav {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin-top: 10px;
        }

        .tip-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #ddd;
            cursor: pointer;
            transition: background 0.3s;
        }

        .tip-dot.active {
            background: #667eea;
        }

        .recent-activity {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .activity-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 18px;
        }

        .activity-safe { background: #d4edda; color: #155724; }
        .activity-unsafe { background: #f8d7da; color: #721c24; }
        .activity-report { background: #fff3cd; color: #856404; }
        
        .activity-item {
            cursor: pointer;
            transition: all 0.3s;
            border-left: 4px solid transparent;
        }
        
        .activity-item:hover {
            background: #f8f9fa;
            border-left-color: #667eea;
            transform: translateX(3px);
        }
        
        .activity-item.urgent {
            border-left-color: #f44336;
            background: rgba(244, 67, 54, 0.05);
        }
        
        .activity-item.resolved {
            border-left-color: #4CAF50;
            background: rgba(76, 175, 80, 0.05);
        }
        
        .activity-status {
            font-size: 18px;
            margin-left: 10px;
        }
        
        .activity-status.urgent {
            animation: pulse 2s infinite;
        }

        /* Feedback Form Styles */
        .feedback-form {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .file-upload {
            border: 2px dashed #667eea;
            padding: 30px;
            text-align: center;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .file-upload:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .rating {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .star {
            font-size: 30px;
            color: #ddd;
            cursor: pointer;
            transition: color 0.2s;
        }

        .star.active, .star:hover {
            color: #ffd700;
        }

        /* Prevention Tips */
        .prevention-tips {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-top: 20px;
        }

        .tips-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .tip-card {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .tip-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        /* Navigation */
        .nav-menu {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .nav-btn.active, .nav-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">💧 Water Quality Monitor</div>
            <select class="lang-selector" id="languageSelect" onchange="changeLanguage()">
                <option value="en">English</option>
                <option value="hi">हिंदी</option>
                <option value="as">অসমীয়া</option>
                <option value="bn">বাংলা</option>
                <option value="mni">মণিপুরী</option>
            </select>
        </div>

        <!-- Login Page -->
        <div id="loginPage" class="page active">
            <div class="login-container">
                <h2 class="login-title" data-translate="login_title">🔑 Complete Registration</h2>
                <form id="loginForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="first_name">First Name:</label>
                            <input type="text" id="firstName" placeholder="Enter first name" required>
                        </div>
                        <div class="form-group">
                            <label data-translate="last_name">Last Name:</label>
                            <input type="text" id="lastName" placeholder="Enter last name" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="age">Age:</label>
                            <input type="number" id="age" placeholder="Age" min="1" max="120" required>
                        </div>
                        <div class="form-group">
                            <label data-translate="gender">Gender:</label>
                            <select id="gender" required>
                                <option value="">Select Gender</option>
                                <option value="male" data-translate="male">Male</option>
                                <option value="female" data-translate="female">Female</option>
                                <option value="other" data-translate="other">Other</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label data-translate="village">Village/Area:</label>
                        <input type="text" id="village" placeholder="Enter your village or area" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="login_method">Login Method:</label>
                            <select id="loginMethod" required>
                                <option value="phone" data-translate="phone_otp">Phone OTP</option>
                                <option value="aadhaar" data-translate="aadhaar_id">Aadhaar ID</option>
                                <option value="email" data-translate="email">Email</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label data-translate="user_role">User Role:</label>
                            <select id="userRole" required>
                                <option value="citizen" data-translate="citizen">Citizen</option>
                                <option value="health_worker" data-translate="health_worker">Health Worker</option>
                                <option value="admin" data-translate="admin">Admin</option>
                                <option value="researcher" data-translate="researcher">Researcher</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label data-translate="contact_info">Contact Information:</label>
                        <input type="text" id="contactInput" placeholder="Enter phone/email/aadhaar" required>
                    </div>
                    
                    <button type="submit" class="btn" data-translate="login_btn">Complete Registration</button>
                </form>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboardPage" class="page">
            <div class="nav-menu">
                <button class="nav-btn active" onclick="showSection('dashboard')" data-translate="dashboard">Dashboard</button>
                <button class="nav-btn" onclick="showSection('feedback')" data-translate="feedback">Feedback</button>
                <button class="nav-btn" onclick="showSection('prevention')" data-translate="prevention">Prevention</button>
                <button class="nav-btn" onclick="logout()" data-translate="logout">Logout</button>
            </div>

            <div id="dashboardSection" class="dashboard">
                <!-- Enhanced Welcome Section -->
                <div class="welcome-section">
                    <div class="welcome-title">
                        <span data-translate="welcome_back">👋 Welcome back,</span> <span id="userName">User</span>!
                        <div class="user-status">🟢 Online • Last active: Now</div>
                    </div>
                    <div class="role-greeting" id="roleGreeting">Stay informed about water safety in your community</div>
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="showSection('feedback')">
                            <div>📤</div>
                            <div data-translate="report_issue">Report Issue</div>
                            <div class="action-count">3 pending</div>
                        </button>
                        <button class="quick-btn" onclick="showAlerts()">
                            <div>🚨</div>
                            <div data-translate="view_alerts">View Alerts</div>
                            <div class="action-count">2 new</div>
                        </button>
                        <button class="quick-btn" onclick="showHealth()">
                            <div>🏥</div>
                            <div data-translate="my_health">My Health</div>
                            <div class="action-count">Updated</div>
                        </button>
                        <button class="quick-btn" onclick="showSettings()">
                            <div>⚙️</div>
                            <div data-translate="settings">Settings</div>
                        </button>
                        <button class="quick-btn" onclick="showNotifications()">
                            <div>🔔</div>
                            <div>Notifications</div>
                            <div class="action-count">5</div>
                        </button>
                        <button class="quick-btn" onclick="showAnalytics()">
                            <div>📊</div>
                            <div>Analytics</div>
                        </button>
                    </div>
                </div>

                <!-- Live Alerts Bar -->
                <div class="alerts-bar">
                    <strong>🚨 ALERT:</strong> <span id="liveAlert">Unsafe water detected in Village Kamrup - Boil water before use</span>
                </div>

                <!-- Enhanced Stats Grid -->
                <div class="stats-grid">
                    <div class="stat-card" onclick="showUserDetails()">
                        <div class="stat-icon">👥</div>
                        <div class="stat-number">5,247</div>
                        <div class="stat-label" data-translate="total_users">Total Users</div>
                        <div class="stat-growth growth-positive">↗ +12% from last month</div>
                        <div class="stat-detail">Click for breakdown</div>
                    </div>
                    <div class="stat-card" onclick="showReportsDetails()">
                        <div class="stat-icon">📌</div>
                        <div class="stat-number">89</div>
                        <div class="stat-label" data-translate="active_reports">Active Reports</div>
                        <div class="stat-growth growth-negative">↘ -5% from yesterday</div>
                        <div class="stat-detail">23 urgent, 66 normal</div>
                    </div>
                    <div class="stat-card" onclick="showTestPoints()">
                        <div class="stat-icon">💧</div>
                        <div class="stat-number">156</div>
                        <div class="stat-label" data-translate="test_points">Test Points</div>
                        <div class="stat-growth">📅 23 tested today</div>
                        <div class="stat-detail">134 safe, 22 unsafe</div>
                    </div>
                    <div class="stat-card" onclick="showHealthCases()">
                        <div class="stat-icon">🦠</div>
                        <div class="stat-number">23</div>
                        <div class="stat-label" data-translate="health_cases">Health Cases</div>
                        <div class="stat-growth growth-positive">↗ +3 new cases</div>
                        <div class="stat-detail">15 resolved, 8 active</div>
                    </div>
                    <div class="stat-card" onclick="showWaterQuality()">
                        <div class="stat-icon">🔍</div>
                        <div class="stat-number">87%</div>
                        <div class="stat-label">Water Quality</div>
                        <div class="stat-growth growth-positive">↗ +2% improvement</div>
                        <div class="stat-detail">Regional average</div>
                    </div>
                    <div class="stat-card" onclick="showResponseTime()">
                        <div class="stat-icon">⏱️</div>
                        <div class="stat-number">2.3h</div>
                        <div class="stat-label">Avg Response</div>
                        <div class="stat-growth growth-positive">↗ 15min faster</div>
                        <div class="stat-detail">Emergency response</div>
                    </div>
                </div>

                <!-- Enhanced GPS Water Sources Map -->
                <div class="gps-map-widget">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div class="widget-title">🗺️ Interactive Water Sources Map</div>
                        <div style="display: flex; gap: 5px;">
                            <select id="mapFilter" onchange="filterMapSources()" style="font-size: 11px; padding: 3px;">
                                <option value="all">All Sources</option>
                                <option value="safe">Safe Only</option>
                                <option value="warning">Caution</option>
                                <option value="unsafe">Unsafe</option>
                            </select>
                            <button class="refresh-btn" onclick="refreshMapData()" style="font-size: 11px; padding: 3px 6px;">🔄</button>
                        </div>
                    </div>
                    <div class="map-container" id="waterSourcesMap">
                        <div class="water-marker safe" style="top: 25%; left: 20%;" data-type="safe"
                             onmouseover="showMarkerPopup(event, 'Tube Well A', '26.1445°N, 91.7362°E', 'Safe - pH: 7.2 | Last Test: 2 days ago')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('tube-well-a')"><span style="font-size: 8px; color: white; font-weight: bold;">A</span></div>
                        
                        <div class="water-marker warning" style="top: 45%; left: 60%;" data-type="warning"
                             onmouseover="showMarkerPopup(event, 'Hand Pump B', '26.1523°N, 91.7445°E', 'Caution - pH: 6.8 | Iron: High')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('hand-pump-b')"><span style="font-size: 8px; color: white; font-weight: bold;">B</span></div>
                        
                        <div class="water-marker unsafe" style="top: 70%; left: 35%;" data-type="unsafe"
                             onmouseover="showMarkerPopup(event, 'River Source', '26.1398°N, 91.7298°E', 'Unsafe - E.coli Present | Avoid Use')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('river-source')"><span style="font-size: 8px; color: white; font-weight: bold;">R</span></div>
                        
                        <div class="water-marker safe" style="top: 15%; left: 75%;" data-type="safe"
                             onmouseover="showMarkerPopup(event, 'Community Well', '26.1567°N, 91.7523°E', 'Safe - Tested Today | pH: 7.1')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('community-well')"><span style="font-size: 8px; color: white; font-weight: bold;">C</span></div>
                        
                        <div class="water-marker safe" style="top: 85%; left: 80%;" data-type="safe"
                             onmouseover="showMarkerPopup(event, 'Government Tank', '26.1234°N, 91.7654°E', 'Safe - Treated Water | Chlorinated')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('gov-tank')"><span style="font-size: 8px; color: white; font-weight: bold;">G</span></div>
                        
                        <div class="water-marker warning" style="top: 55%; left: 15%;" data-type="warning"
                             onmouseover="showMarkerPopup(event, 'Bore Well D', '26.1389°N, 91.7201°E', 'Caution - High TDS | Needs Treatment')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('bore-well-d')"><span style="font-size: 8px; color: white; font-weight: bold;">D</span></div>
                        
                        <div class="water-marker safe" style="top: 35%; left: 90%;" data-type="safe"
                             onmouseover="showMarkerPopup(event, 'Spring Water', '26.1612°N, 91.7678°E', 'Safe - Natural Spring | Excellent Quality')" 
                             onmouseout="hideMarkerPopup()" 
                             onclick="showSourceDetails('spring-water')"><span style="font-size: 8px; color: white; font-weight: bold;">S</span></div>
                        
                        <div class="marker-popup" id="markerPopup"></div>
                    </div>
                    
                    <div style="display: flex; justify-content: space-between; margin: 10px 0; font-size: 11px;">
                        <span style="color: #4CAF50;">✅ Safe: 4 sources</span>
                        <span style="color: #FF9800;">⚠️ Caution: 2 sources</span>
                        <span style="color: #f44336;">❌ Unsafe: 1 source</span>
                        <span style="color: #666;">📊 Coverage: 95%</span>
                    </div>
                    
                    <div class="map-controls">
                        <button class="map-btn" onclick="getCurrentLocation()">📍 My Location</button>
                        <button class="map-btn" onclick="findNearestSafe()">🔍 Nearest Safe</button>
                        <button class="map-btn" onclick="showAllDirections()">🧭 Directions</button>
                        <button class="map-btn" onclick="showMapLegend()">ℹ️ Legend</button>
                    </div>
                    
                    <div class="distance-info" id="distanceInfo">
                        📍 Click "My Location" to see distances to water sources
                    </div>
                </div>

                <!-- Enhanced Disease Spread Map -->
                <div class="disease-map">
                    <div class="map-header">
                        <div class="chart-title">🗺️ Interactive Disease Spread Map</div>
                        <div class="map-controls">
                            <select id="diseaseFilter" onchange="filterByDisease()">
                                <option value="all">All Diseases</option>
                                <option value="cholera">Cholera</option>
                                <option value="typhoid">Typhoid</option>
                                <option value="diarrhea">Diarrhea</option>
                            </select>
                            <button class="map-refresh-btn" onclick="refreshMapData()">🔄 Refresh</button>
                        </div>
                    </div>
                    <div class="interactive-map" onclick="showMapDetails()">
                        <!-- Village dots with enhanced data -->
                        <div class="village-dot safe" style="top: 20%; left: 15%;" 
                             onclick="showVillageDetails('Kamrup')" 
                             onmouseover="showTooltip(event, 'Kamrup: Safe - 0 cases | Pop: 12,450')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">0</div>
                        </div>
                        <div class="village-dot safe" style="top: 40%; left: 25%;" 
                             onclick="showVillageDetails('Jorhat')" 
                             onmouseover="showTooltip(event, 'Jorhat: Safe - 0 cases | Pop: 8,920')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">0</div>
                        </div>
                        <div class="village-dot warning" style="top: 60%; left: 45%;" 
                             onclick="showVillageDetails('Dibrugarh')" 
                             onmouseover="showTooltip(event, 'Dibrugarh: Warning - 2 cases | Pop: 15,670')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">2</div>
                        </div>
                        <div class="village-dot risk" style="top: 30%; left: 70%;" 
                             onclick="showVillageDetails('Tezpur')" 
                             onmouseover="showTooltip(event, 'Tezpur: High Risk - 8 cases | Pop: 22,340')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">8</div>
                        </div>
                        <div class="village-dot safe" style="top: 80%; left: 20%;" 
                             onclick="showVillageDetails('Guwahati')" 
                             onmouseover="showTooltip(event, 'Guwahati: Safe - 0 cases | Pop: 45,890')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">0</div>
                        </div>
                        <div class="village-dot warning" style="top: 50%; left: 80%;" 
                             onclick="showVillageDetails('Silchar')" 
                             onmouseover="showTooltip(event, 'Silchar: Warning - 3 cases | Pop: 18,230')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">3</div>
                        </div>
                        <div class="village-dot risk" style="top: 70%; left: 60%;" 
                             onclick="showVillageDetails('Nagaon')" 
                             onmouseover="showTooltip(event, 'Nagaon: High Risk - 12 cases | Pop: 28,450')" 
                             onmouseout="hideTooltip()">
                            <div class="case-count">12</div>
                        </div>
                        <div class="village-tooltip" id="villageTooltip"></div>
                    </div>
                    <div class="map-stats">
                        <div class="stat-item">
                            <span class="stat-value">102</span>
                            <span class="stat-label">Total Villages</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">25</span>
                            <span class="stat-label">Active Cases</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value">87%</span>
                            <span class="stat-label">Recovery Rate</span>
                        </div>
                    </div>
                    <div class="map-legend">
                        <div class="legend-item">
                            <div class="legend-color safe"></div>
                            <span>Safe (67 villages) - 0 cases</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color warning"></div>
                            <span>Warning (23 villages) - 1-5 cases</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color risk"></div>
                            <span>High Risk (12 villages) - 6+ cases</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Access Widgets -->
                <div class="widgets-grid">
                    <div class="widget">
                        <div class="widget-title">🔍 Best Water Sources Nearby</div>
                        <div class="water-sources">
                            <div class="water-source" onclick="showWaterSource('safe')">
                                <div style="font-weight: bold;">✅ Tube Well A</div>
                                <div style="font-size: 12px;">1.2 km • pH: 7.2 • Safe</div>
                                <div class="gps-info">📍 26.1445°N, 91.7362°E</div>
                            </div>
                            <div class="water-source warning" onclick="showWaterSource('warning')">
                                <div style="font-weight: bold;">⚠️ Hand Pump B</div>
                                <div style="font-size: 12px;">2.1 km • pH: 6.8 • Caution</div>
                                <div class="gps-info">📍 26.1523°N, 91.7445°E</div>
                            </div>
                            <div class="water-source unsafe" onclick="showWaterSource('unsafe')">
                                <div style="font-weight: bold;">❌ River Source</div>
                                <div style="font-size: 12px;">0.8 km • High Bacteria</div>
                                <div class="gps-info">📍 26.1398°N, 91.7298°E</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="widget">
                        <div class="widget-header">
                            <div class="widget-title">🛡️ Prevention Tips</div>
                        </div>
                        <div class="tips-carousel">
                            <div class="tip-slide active">
                                <div>🧼 Wash hands with soap for 20 seconds before eating and after using toilet</div>
                            </div>
                            <div class="tip-slide">
                                <div>🔥 Boil water for at least 1 minute to kill harmful bacteria and viruses</div>
                            </div>
                            <div class="tip-slide">
                                <div>💊 Use water purification tablets when boiling is not possible</div>
                            </div>
                            <div class="tip-slide">
                                <div>🏺 Store treated water in clean, covered containers away from contamination</div>
                            </div>
                            <div class="tip-slide">
                                <div>🚰 Avoid drinking from unknown sources, especially during monsoon season</div>
                            </div>
                            <div class="tip-slide">
                                <div>🧽 Clean water storage containers weekly with soap and hot water</div>
                            </div>
                        </div>
                        <div class="tip-nav">
                            <span class="tip-dot active" onclick="showTip(0)"></span>
                            <span class="tip-dot" onclick="showTip(1)"></span>
                            <span class="tip-dot" onclick="showTip(2)"></span>
                            <span class="tip-dot" onclick="showTip(3)"></span>
                            <span class="tip-dot" onclick="showTip(4)"></span>
                            <span class="tip-dot" onclick="showTip(5)"></span>
                        </div>
                    </div>
                    
                    <div class="widget">
                        <div class="widget-title">🤖 AI Health Assistant</div>
                        <div class="chat-container">
                            <div class="chat-messages" id="chatMessages">
                                <div class="bot-message">👋 Hi! I'm your health assistant. Ask me about water safety, symptoms, or prevention tips!</div>
                            </div>
                            <div class="chat-input-container">
                                <input type="text" id="chatInput" placeholder="Type your question..." onkeypress="handleChatEnter(event)">
                                <button class="chat-send-btn" onclick="sendMessage()">Send</button>
                            </div>
                        </div>
                        <div class="quick-questions">
                            <button class="quick-q-btn" onclick="askQuickQuestion('water-safe')">Is my water safe?</button>
                            <button class="quick-q-btn" onclick="askQuickQuestion('symptoms')">Check symptoms</button>
                            <button class="quick-q-btn" onclick="askQuickQuestion('prevention')">Prevention tips</button>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Quick Report Form -->
                <div class="inline-feedback">
                    <div class="widget-title">📤 Quick Report <span class="report-counter">Reports today: 12</span></div>
                    <div class="quick-report-form">
                        <div class="report-type-selector">
                            <div class="report-type active" onclick="selectReportType('water')">💧 Water Issue</div>
                            <div class="report-type" onclick="selectReportType('health')">🏥 Health Case</div>
                            <div class="report-type" onclick="selectReportType('suggestion')">💡 Suggestion</div>
                            <div class="report-type" onclick="selectReportType('emergency')">🚨 Emergency</div>
                        </div>
                        
                        <div class="form-row-quick">
                            <select id="locationSelect" class="quick-select">
                                <option>Select Location</option>
                                <option>Village Kamrup</option>
                                <option>Village Jorhat</option>
                                <option>Village Dibrugarh</option>
                                <option>Village Tezpur</option>
                                <option>Village Guwahati</option>
                                <option>Village Silchar</option>
                                <option>Village Nagaon</option>
                            </select>
                            <select id="prioritySelect" class="quick-select">
                                <option value="normal">Normal Priority</option>
                                <option value="urgent">Urgent</option>
                                <option value="emergency">Emergency</option>
                            </select>
                        </div>
                        
                        <div class="report-details" id="reportDetails">
                            <textarea id="quickReportText" placeholder="Describe the issue in detail..." rows="3"></textarea>
                            <div class="additional-fields" id="additionalFields"></div>
                        </div>
                        
                        <div class="attachment-section">
                            <div class="attachment-preview" id="attachmentPreview"></div>
                        </div>
                        
                        <div class="feedback-options">
                            <button class="feedback-btn" onclick="addVoiceNote()">🎤 Voice</button>
                            <button class="feedback-btn" onclick="addPhoto()">📷 Photo</button>
                            <button class="feedback-btn" onclick="getCurrentLocationForReport()">📍 GPS</button>
                            <button class="feedback-btn submit-btn" onclick="submitQuickReport()">📤 Submit Report</button>
                        </div>
                        
                        <div class="report-progress" id="reportProgress" style="display: none;">
                            <div class="progress-bar-report">
                                <div class="progress-fill-report"></div>
                            </div>
                            <div class="progress-text">Submitting report...</div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Charts Section -->
                <div class="charts-section">
                    <div class="chart-container">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div class="chart-title">📈 Cases Analytics Dashboard</div>
                            <div style="display: flex; gap: 5px;">
                                <select id="casesTimeFilter" onchange="filterCasesData()" style="font-size: 11px; padding: 3px;">
                                    <option>Last 7 days</option>
                                    <option>Last 30 days</option>
                                    <option>This month</option>
                                </select>
                                <button class="refresh-btn" onclick="refreshCasesData()" style="font-size: 11px; padding: 3px 6px;">🔄</button>
                            </div>
                        </div>
                        <div class="chart chart-interactive">
                            <div class="cases-chart" style="display: flex; justify-content: space-around; align-items: end; height: 120px; padding: 15px;">
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Mon')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 60px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">15</span>
                                        </div>
                                        <div class="bar resolved" style="height: 45px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">12</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Mon</div>
                                    <div style="font-size: 8px; color: #666;">↑ +3</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Tue')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 75px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">20</span>
                                        </div>
                                        <div class="bar resolved" style="height: 64px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">17</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Tue</div>
                                    <div style="font-size: 8px; color: #666;">↓ -3</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Wed')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 53px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">14</span>
                                        </div>
                                        <div class="bar resolved" style="height: 68px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">18</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Wed</div>
                                    <div style="font-size: 8px; color: #4CAF50;">↑ +4</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Thu')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 38px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">10</span>
                                        </div>
                                        <div class="bar resolved" style="height: 57px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">15</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Thu</div>
                                    <div style="font-size: 8px; color: #4CAF50;">↑ +5</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Fri')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 45px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">12</span>
                                        </div>
                                        <div class="bar resolved" style="height: 49px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">13</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Fri</div>
                                    <div style="font-size: 8px; color: #4CAF50;">↑ +1</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Sat')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 30px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">8</span>
                                        </div>
                                        <div class="bar resolved" style="height: 41px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">11</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Sat</div>
                                    <div style="font-size: 8px; color: #4CAF50;">↑ +3</div>
                                </div>
                                <div style="text-align: center; cursor: pointer;" onclick="showDayDetails('Sun')">
                                    <div style="display: flex; flex-direction: column; align-items: center; gap: 2px;">
                                        <div class="bar" style="height: 23px; width: 15px; background: linear-gradient(to top, #ff6b6b, #ee5a24); position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">6</span>
                                        </div>
                                        <div class="bar resolved" style="height: 34px; width: 15px; background: linear-gradient(to top, #4CAF50, #45a049); margin-top: 2px; position: relative;">
                                            <span style="position: absolute; top: -15px; font-size: 9px; color: #333;">9</span>
                                        </div>
                                    </div>
                                    <div style="font-size: 10px; margin-top: 5px; font-weight: bold;">Sun</div>
                                    <div style="font-size: 8px; color: #4CAF50;">↑ +3</div>
                                </div>
                            </div>
                            <div style="margin-top: 10px; font-size: 11px; text-align: center; color: #666; display: flex; justify-content: space-around;">
                                <span style="color: #ff6b6b;">🔴 New Cases: 85</span>
                                <span style="color: #4CAF50;">✅ Resolved: 95</span>
                                <span style="color: #667eea;">📈 Resolution Rate: 89%</span>
                                <span style="color: #666;">🔄 Updated: 5 min ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div class="chart-title">🦠 Disease Analytics Dashboard</div>
                            <div style="display: flex; gap: 5px;">
                                <select id="diseaseTimeFilter" onchange="filterDiseaseData()" style="font-size: 11px; padding: 3px;">
                                    <option>Last 7 days</option>
                                    <option>Last 30 days</option>
                                    <option>Last 3 months</option>
                                </select>
                                <button class="refresh-btn" onclick="refreshDiseaseData()" style="font-size: 11px; padding: 3px 6px;">🔄</button>
                            </div>
                        </div>
                        <div class="chart chart-interactive">
                            <div class="disease-chart">
                                <div class="disease-item" style="background: linear-gradient(135deg, rgba(255,107,107,0.9), rgba(244,67,54,0.7)); cursor: pointer;" onclick="showDiseaseDetails('diarrhea')">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>🔴 Diarrhea</div>
                                        <div style="font-size: 10px; background: rgba(255,255,255,0.3); padding: 1px 4px; border-radius: 8px;">↑ +3</div>
                                    </div>
                                    <div style="font-weight: bold;">40% (18 cases)</div>
                                    <div style="font-size: 9px; opacity: 0.8;">Peak: Monsoon season</div>
                                </div>
                                <div class="disease-item" style="background: linear-gradient(135deg, rgba(255,193,7,0.9), rgba(255,152,0,0.7)); cursor: pointer;" onclick="showDiseaseDetails('typhoid')">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>🟡 Typhoid</div>
                                        <div style="font-size: 10px; background: rgba(255,255,255,0.3); padding: 1px 4px; border-radius: 8px;">↓ -1</div>
                                    </div>
                                    <div style="font-weight: bold;">25% (12 cases)</div>
                                    <div style="font-size: 9px; opacity: 0.8;">Trend: Stable</div>
                                </div>
                                <div class="disease-item" style="background: linear-gradient(135deg, rgba(255,152,0,0.9), rgba(239,108,0,0.7)); cursor: pointer;" onclick="showDiseaseDetails('cholera')">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>🟠 Cholera</div>
                                        <div style="font-size: 10px; background: rgba(255,255,255,0.3); padding: 1px 4px; border-radius: 8px;">→ 0</div>
                                    </div>
                                    <div style="font-weight: bold;">20% (9 cases)</div>
                                    <div style="font-size: 9px; opacity: 0.8;">Status: Controlled</div>
                                </div>
                                <div class="disease-item" style="background: linear-gradient(135deg, rgba(76,175,80,0.9), rgba(56,142,60,0.7)); cursor: pointer;" onclick="showDiseaseDetails('jaundice')">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>🟢 Jaundice</div>
                                        <div style="font-size: 10px; background: rgba(255,255,255,0.3); padding: 1px 4px; border-radius: 8px;">↓ -2</div>
                                    </div>
                                    <div style="font-weight: bold;">15% (7 cases)</div>
                                    <div style="font-size: 9px; opacity: 0.8;">Trend: Decreasing</div>
                                </div>
                            </div>
                            <div style="margin-top: 10px; font-size: 11px; text-align: center; color: #666;">
                                📊 Total Active Cases: 46 • 📈 Recovery Rate: 87% • 🔄 Updated: 2 min ago
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Activity Timeline -->
                <div class="recent-activity">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h3>📋 Live Activity Feed</h3>
                        <div style="display: flex; gap: 5px;">
                            <button class="filter-btn active" onclick="filterActivity('all')">All</button>
                            <button class="filter-btn" onclick="filterActivity('urgent')">Urgent</button>
                            <button class="filter-btn" onclick="filterActivity('resolved')">Resolved</button>
                            <button class="refresh-btn" onclick="refreshActivity()">🔄</button>
                        </div>
                    </div>
                    
                    <div class="activity-item urgent" data-type="urgent" onclick="viewActivityDetails('water-test-1')">
                        <div class="activity-icon activity-unsafe">⚠️</div>
                        <div style="flex: 1;">
                            <div><strong>URGENT: Water contamination detected</strong></div>
                            <div style="font-size: 12px; color: #666;">Village Kamrup • 15 min ago</div>
                            <div style="font-size: 11px; color: #f44336;">📊 pH: 5.8, E.coli: High • 🏥 Health team dispatched</div>
                        </div>
                        <div class="activity-status urgent">🚨</div>
                    </div>
                    
                    <div class="activity-item resolved" data-type="resolved" onclick="viewActivityDetails('health-case-1')">
                        <div class="activity-icon activity-safe">✅</div>
                        <div style="flex: 1;">
                            <div><strong>Cholera case resolved successfully</strong></div>
                            <div style="font-size: 12px; color: #666;">Village Jorhat • 1 hour ago</div>
                            <div style="font-size: 11px; color: #4CAF50;">👨⚕️ Patient recovered • 💊 Treatment completed</div>
                        </div>
                        <div class="activity-status resolved">✅</div>
                    </div>
                    
                    <div class="activity-item normal" data-type="normal" onclick="viewActivityDetails('report-1')">
                        <div class="activity-icon activity-report">📤</div>
                        <div style="flex: 1;">
                            <div><strong>Community feedback submitted</strong></div>
                            <div style="font-size: 12px; color: #666;">Village Dibrugarh • 2 hours ago</div>
                            <div style="font-size: 11px; color: #666;">⭐ Rating: 4/5 • 📝 "Water quality improved"</div>
                        </div>
                        <div class="activity-status normal">📋</div>
                    </div>
                    
                    <div class="activity-item urgent" data-type="urgent" onclick="viewActivityDetails('outbreak-1')">
                        <div class="activity-icon activity-unsafe">🦠</div>
                        <div style="flex: 1;">
                            <div><strong>Disease outbreak alert issued</strong></div>
                            <div style="font-size: 12px; color: #666;">Village Tezpur • 3 hours ago</div>
                            <div style="font-size: 11px; color: #FF9800;">🚨 3 new cases • 📢 Prevention measures activated</div>
                        </div>
                        <div class="activity-status urgent">⚠️</div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 15px;">
                        <button class="view-all-btn" onclick="viewAllActivity()">📜 View Complete Timeline</button>
                    </div>
                </div>

                <!-- Enhanced Learning Section -->
                <div class="learning-section">
                    <div class="widget-title">🎓 Interactive Learning Hub <span style="font-size: 12px; background: #4CAF50; color: white; padding: 2px 8px; border-radius: 10px; margin-left: 10px;">New Content</span></div>
                    
                    <div class="learning-tabs">
                        <button class="learning-tab active" onclick="showLearningTab('courses')">📖 Courses</button>
                        <button class="learning-tab" onclick="showLearningTab('interactive')">🎮 Interactive</button>
                        <button class="learning-tab" onclick="showLearningTab('community')">👥 Community</button>
                        <button class="learning-tab" onclick="showLearningTab('certificates')">🏅 Certificates</button>
                    </div>

                    <!-- Courses Tab -->
                    <div id="courses" class="learning-content active">
                        <div class="learning-grid">
                            <div class="learning-item video" onclick="startCourse('water-basics')">
                                <span class="learning-icon">💧</span>
                                <div class="learning-title">Water Safety Fundamentals</div>
                                <div class="learning-desc">6 lessons • 45 min • Beginner</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 75%;"></div></div>
                                <div style="font-size: 10px; margin-top: 5px; color: #666;">⭐ 4.8/5 • 1,234 learners</div>
                            </div>
                            <div class="learning-item infographic" onclick="startCourse('disease-master')">
                                <span class="learning-icon">🦠</span>
                                <div class="learning-title">Disease Prevention Mastery</div>
                                <div class="learning-desc">8 lessons • 1.2 hrs • Intermediate</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 30%;"></div></div>
                                <div style="font-size: 10px; margin-top: 5px; color: #666;">⭐ 4.9/5 • 892 learners</div>
                            </div>
                            <div class="learning-item quiz" onclick="startCourse('emergency-response')">
                                <span class="learning-icon">🚨</span>
                                <div class="learning-title">Emergency Response</div>
                                <div class="learning-desc">5 lessons • 30 min • Advanced</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%;"></div></div>
                                <div style="font-size: 10px; margin-top: 5px; color: #666;">⭐ 4.7/5 • 567 learners</div>
                            </div>
                            <div class="learning-item tips" onclick="startCourse('community-health')">
                                <span class="learning-icon">🏘️</span>
                                <div class="learning-title">Community Health Leader</div>
                                <div class="learning-desc">12 lessons • 2 hrs • Expert</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%;"></div></div>
                                <div style="font-size: 10px; margin-top: 5px; color: #666;">⭐ 5.0/5 • 234 learners</div>
                            </div>
                        </div>
                    </div>

                    <!-- Interactive Tab -->
                    <div id="interactive" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item video" onclick="startSimulation('water-test')">
                                <span class="learning-icon">🔬</span>
                                <div class="learning-title">Virtual Water Testing Lab</div>
                                <div class="learning-desc">Hands-on simulation • 15 min</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #4CAF50;">🎯 Try different test methods</div>
                            </div>
                            <div class="learning-item infographic" onclick="startGame('outbreak-control')">
                                <span class="learning-icon">🎮</span>
                                <div class="learning-title">Outbreak Control Game</div>
                                <div class="learning-desc">Strategy game • 20 min</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #FF9800;">🏆 Beat your high score: 850</div>
                            </div>
                            <div class="learning-item quiz" onclick="startAR('water-sources')">
                                <span class="learning-icon">📱</span>
                                <div class="learning-title">AR Water Source Finder</div>
                                <div class="learning-desc">Augmented reality • Real-time</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #9C27B0;">📍 Use your camera</div>
                            </div>
                            <div class="learning-item tips" onclick="startVR('village-tour')">
                                <span class="learning-icon">🥽</span>
                                <div class="learning-title">Virtual Village Tour</div>
                                <div class="learning-desc">360° experience • 10 min</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #f44336;">🌟 New: Monsoon scenario</div>
                            </div>
                        </div>
                    </div>

                    <!-- Community Tab -->
                    <div id="community" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item video" onclick="joinDiscussion('water-safety')">
                                <span class="learning-icon">💬</span>
                                <div class="learning-title">Water Safety Discussion</div>
                                <div class="learning-desc">45 active members • 12 new posts</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #2196F3;">💡 Latest: Monsoon preparation tips</div>
                            </div>
                            <div class="learning-item infographic" onclick="viewSuccess('local-heroes')">
                                <span class="learning-icon">🌟</span>
                                <div class="learning-title">Local Success Stories</div>
                                <div class="learning-desc">8 inspiring stories • Updated daily</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #4CAF50;">📖 New: Village Kamrup's journey</div>
                            </div>
                            <div class="learning-item quiz" onclick="joinChallenge('weekly')">
                                <span class="learning-icon">🏃</span>
                                <div class="learning-title">Weekly Health Challenge</div>
                                <div class="learning-desc">234 participants • 3 days left</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #FF9800;">🎯 Goal: Test 5 water sources</div>
                            </div>
                            <div class="learning-item tips" onclick="mentorProgram()">
                                <span class="learning-icon">👨‍🏫</span>
                                <div class="learning-title">Peer Mentorship</div>
                                <div class="learning-desc">Connect with experts • 1-on-1 help</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #9C27B0;">✨ 15 mentors available now</div>
                            </div>
                        </div>
                    </div>

                    <!-- Certificates Tab -->
                    <div id="certificates" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item video" onclick="viewCertificate('water-safety')">
                                <span class="learning-icon">🏆</span>
                                <div class="learning-title">Water Safety Expert</div>
                                <div class="learning-desc">Earned • Valid until Dec 2024</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #4CAF50;">✅ Verified by WHO standards</div>
                            </div>
                            <div class="learning-item infographic" onclick="startCertification('disease-prev')">
                                <span class="learning-icon">📜</span>
                                <div class="learning-title">Disease Prevention Specialist</div>
                                <div class="learning-desc">In progress • 75% complete</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #FF9800;">⏰ 2 modules remaining</div>
                            </div>
                            <div class="learning-item quiz" onclick="startCertification('community-leader')">
                                <span class="learning-icon">👑</span>
                                <div class="learning-title">Community Health Leader</div>
                                <div class="learning-desc">Available • Prerequisites met</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #2196F3;">🎓 Advanced certification</div>
                            </div>
                            <div class="learning-item tips" onclick="viewBadges()">
                                <span class="learning-icon">🎖️</span>
                                <div class="learning-title">Achievement Badges</div>
                                <div class="learning-desc">12 earned • 8 available</div>
                                <div style="font-size: 10px; margin-top: 5px; color: #9C27B0;">🌟 Next: Water Testing Pro</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>iv class="progress-bar"><div class="progress-fill" style="width: 25%;"></div></div>
                            </div>
                        </div>
                    </div>

                    <!-- Infographics Tab -->
                    <div id="infographics" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item infographic" onclick="viewInfographic('cholera')">
                                <span class="learning-icon">📊</span>
                                <div class="learning-title" data-translate="cholera_info">Cholera Prevention Guide</div>
                                <div class="learning-desc">Visual Guide • PDF</div>
                            </div>
                            <div class="learning-item infographic" onclick="viewInfographic('typhoid')">
                                <span class="learning-icon">📈</span>
                                <div class="learning-title" data-translate="typhoid_info">Typhoid Awareness</div>
                                <div class="learning-desc">Symptoms & Prevention</div>
                            </div>
                            <div class="learning-item infographic" onclick="viewInfographic('diarrhea')">
                                <span class="learning-icon">📋</span>
                                <div class="learning-title" data-translate="diarrhea_info">Diarrhea Prevention</div>
                                <div class="learning-desc">Quick Reference</div>
                            </div>
                            <div class="learning-item infographic" onclick="viewInfographic('water-testing')">
                                <span class="learning-icon">🔬</span>
                                <div class="learning-title" data-translate="water_testing">Water Testing Guide</div>
                                <div class="learning-desc">Step-by-step Process</div>
                            </div>
                        </div>
                    </div>

                    <!-- Quiz Tab -->
                    <div id="quiz" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item quiz" onclick="startQuiz('weekly')">
                                <span class="learning-icon">🏆</span>
                                <div class="learning-title" data-translate="weekly_quiz">Weekly Health Quiz</div>
                                <div class="learning-desc">10 Questions • 5 min</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 80%;"></div></div>
                            </div>
                            <div class="learning-item quiz" onclick="startQuiz('water')">
                                <span class="learning-icon">💧</span>
                                <div class="learning-title" data-translate="water_quiz">Water Safety Quiz</div>
                                <div class="learning-desc">15 Questions • 8 min</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 100%;"></div></div>
                            </div>
                            <div class="learning-item quiz" onclick="startQuiz('disease')">
                                <span class="learning-icon">🦠</span>
                                <div class="learning-title" data-translate="disease_quiz">Disease Prevention Quiz</div>
                                <div class="learning-desc">12 Questions • 6 min</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 40%;"></div></div>
                            </div>
                            <div class="learning-item quiz" onclick="startQuiz('safety')">
                                <span class="learning-icon">🛡️</span>
                                <div class="learning-title" data-translate="safety_quiz">Community Safety Quiz</div>
                                <div class="learning-desc">8 Questions • 4 min</div>
                                <div class="progress-bar"><div class="progress-fill" style="width: 0%;"></div></div>
                            </div>
                        </div>
                    </div>

                    <!-- Resources Tab -->
                    <div id="resources" class="learning-content">
                        <div class="learning-grid">
                            <div class="learning-item tips" onclick="viewResource('who-guidelines')">
                                <span class="learning-icon">🌍</span>
                                <div class="learning-title" data-translate="who_guidelines">WHO Water Guidelines</div>
                                <div class="learning-desc">Official Guidelines</div>
                            </div>
                            <div class="learning-item tips" onclick="viewResource('emergency')">
                                <span class="learning-icon">🚨</span>
                                <div class="learning-title" data-translate="emergency_contacts">Emergency Contacts</div>
                                <div class="learning-desc">24/7 Helplines</div>
                            </div>
                            <div class="learning-item tips" onclick="viewResource('health-centers')">
                                <span class="learning-icon">🏥</span>
                                <div class="learning-title" data-translate="health_centers">Nearby Health Centers</div>
                                <div class="learning-desc">Location & Timings</div>
                            </div>
                            <div class="learning-item tips" onclick="viewResource('water-sources')">
                                <span class="learning-icon">💧</span>
                                <div class="learning-title" data-translate="water_sources">Safe Water Sources</div>
                                <div class="learning-desc">Verified Locations</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enhanced Feedback Form Section -->
            <div id="feedbackSection" class="feedback-form" style="display: none;">
                <h2 data-translate="feedback_title">📤 Enhanced Water Quality Report</h2>
                <form id="feedbackForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="location">Location:</label>
                            <select id="locationDropdown" required>
                                <option value="">Select Village/Area</option>
                                <option>Village Kamrup</option>
                                <option>Village Jorhat</option>
                                <option>Village Dibrugarh</option>
                                <option>Village Tezpur</option>
                                <option>Village Guwahati</option>
                                <option>Village Silchar</option>
                                <option>Village Nagaon</option>
                                <option>Other (specify below)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Issue Type:</label>
                            <select id="issueType" required>
                                <option value="">Select Issue Type</option>
                                <option>Water Quality</option>
                                <option>Health Emergency</option>
                                <option>Infrastructure Problem</option>
                                <option>General Feedback</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label data-translate="water_source">Water Source:</label>
                            <select id="waterSource">
                                <option>Tube Well</option>
                                <option>Hand Pump</option>
                                <option>River</option>
                                <option>Pond</option>
                                <option>Government Tank</option>
                                <option>Community Well</option>
                                <option>Bore Well</option>
                                <option>Spring Water</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Priority Level:</label>
                            <select id="priorityLevel">
                                <option>Normal</option>
                                <option>Urgent</option>
                                <option>Emergency</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label data-translate="description">Detailed Description:</label>
                        <textarea id="issueDescription" rows="4" placeholder="Describe the issue in detail..." required></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Affected People:</label>
                            <input type="number" id="affectedCount" placeholder="Number of people affected" min="1">
                        </div>
                        <div class="form-group">
                            <label>Contact Number:</label>
                            <input type="tel" id="contactNumber" placeholder="Your phone number">
                        </div>
                    </div>

                    <div class="form-group">
                        <label data-translate="water_rating">Water Quality Rating:</label>
                        <div class="rating">
                            <span class="star" onclick="setRating(1)">⭐</span>
                            <span class="star" onclick="setRating(2)">⭐</span>
                            <span class="star" onclick="setRating(3)">⭐</span>
                            <span class="star" onclick="setRating(4)">⭐</span>
                            <span class="star" onclick="setRating(5)">⭐</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="file-upload" onclick="document.getElementById('photoUpload').click()">
                            <div>📷 Upload Photos (Multiple allowed)</div>
                            <div style="font-size: 12px; margin-top: 10px;">Click to select images</div>
                            <input type="file" id="photoUpload" accept="image/*" multiple style="display: none;">
                        </div>
                        <div id="photoPreview" style="margin-top: 10px;"></div>
                    </div>

                    <div class="form-row">
                        <button type="button" class="btn" onclick="getCurrentLocationForFeedback()" style="background: #28a745;">📍 Add GPS Location</button>
                        <button type="submit" class="btn" data-translate="submit_report">📤 Submit Enhanced Report</button>
                    </div>
                </form>
            </div>

            <!-- Enhanced Prevention Section -->
            <div id="preventionSection" class="prevention-tips" style="display: none;">
                <h2 data-translate="prevention_title">🛡️ Comprehensive Water Safety & Prevention Guide</h2>
                
                <!-- Prevention Categories -->
                <div style="display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap;">
                    <button class="filter-btn active" onclick="showPreventionCategory('all')">All Tips</button>
                    <button class="filter-btn" onclick="showPreventionCategory('water')">Water Safety</button>
                    <button class="filter-btn" onclick="showPreventionCategory('hygiene')">Hygiene</button>
                    <button class="filter-btn" onclick="showPreventionCategory('emergency')">Emergency</button>
                    <button class="filter-btn" onclick="showPreventionCategory('seasonal')">Seasonal</button>
                </div>

                <div class="tips-grid">
                    <!-- Water Safety Tips -->
                    <div class="tip-card" data-category="water">
                        <div class="tip-icon">🔥</div>
                        <h3 data-translate="boil_water">Boil Water Properly</h3>
                        <p data-translate="boil_water_tip">Boil water for 1 minute (3 minutes at high altitude) to kill harmful bacteria and viruses</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">✅ Kills 99.9% of pathogens</div>
                    </div>
                    
                    <div class="tip-card" data-category="water">
                        <div class="tip-icon">💊</div>
                        <h3 data-translate="chlorine_tablets">Water Purification</h3>
                        <p data-translate="chlorine_tip">Use chlorine tablets (1 tablet per liter) or add 2 drops of bleach per liter of clear water</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">⏰ Wait 30 minutes before drinking</div>
                    </div>
                    
                    <div class="tip-card" data-category="water">
                        <div class="tip-icon">🏺</div>
                        <h3 data-translate="safe_storage">Safe Water Storage</h3>
                        <p data-translate="storage_tip">Store treated water in clean, covered containers. Clean storage weekly with soap</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">🔄 Replace every 3 days</div>
                    </div>
                    
                    <div class="tip-card" data-category="water">
                        <div class="tip-icon">🔍</div>
                        <h3>Water Quality Check</h3>
                        <p>Before drinking: Check color (clear), smell (odorless), taste (no metallic/chemical flavor)</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">⚠️ When in doubt, don't drink</div>
                    </div>

                    <!-- Hygiene Tips -->
                    <div class="tip-card" data-category="hygiene">
                        <div class="tip-icon">🧼</div>
                        <h3 data-translate="handwashing">Proper Hand Washing</h3>
                        <p data-translate="handwashing_tip">Wash hands with soap for 20 seconds before eating, after toilet, and after handling animals</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">🎵 Sing "Happy Birthday" twice</div>
                    </div>
                    
                    <div class="tip-card" data-category="hygiene">
                        <div class="tip-icon">🍽️</div>
                        <h3>Food Safety</h3>
                        <p>Eat hot, freshly cooked food. Avoid raw vegetables, street food, and ice during outbreaks</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">🌡️ Cook it, peel it, or forget it</div>
                    </div>
                    
                    <div class="tip-card" data-category="hygiene">
                        <div class="tip-icon">🧴</div>
                        <h3>Personal Hygiene</h3>
                        <p>Keep fingernails short, bathe daily, wear clean clothes, and avoid touching face with dirty hands</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">💪 Builds immunity</div>
                    </div>
                    
                    <div class="tip-card" data-category="hygiene">
                        <div class="tip-icon">🏠</div>
                        <h3>Home Sanitation</h3>
                        <p>Keep surroundings clean, dispose waste properly, maintain clean toilets, control flies and mosquitoes</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">🚫 Prevents disease spread</div>
                    </div>

                    <!-- Emergency Tips -->
                    <div class="tip-card" data-category="emergency">
                        <div class="tip-icon">🌡️</div>
                        <h3>Fever Management</h3>
                        <p>For fever: Rest, drink fluids, use ORS, take paracetamol. Seek medical help if fever persists >3 days</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">🌡️ Normal: 98.6°F (37°C)</div>
                    </div>
                    
                    <div class="tip-card" data-category="emergency">
                        <div class="tip-icon">💧</div>
                        <h3>Dehydration Signs</h3>
                        <p>Watch for: Dry mouth, less urination, dizziness, weakness. Drink ORS immediately</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">🎯 8-10 glasses daily</div>
                    </div>
                    
                    <div class="tip-card" data-category="emergency">
                        <div class="tip-icon">📞</div>
                        <h3>Emergency Contacts</h3>
                        <p>Health Emergency: 108 | Ambulance: 102 | Poison Control: 1066 | Local Health Center</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">🔄 Available 24/7</div>
                    </div>
                    
                    <div class="tip-card" data-category="emergency">
                        <div class="tip-icon">🎆</div>
                        <h3>ORS Preparation</h3>
                        <p>Mix 1 packet ORS in 1 liter clean water. If unavailable: 1 tsp salt + 2 tbsp sugar in 1 liter water</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">⏰ Use within 24 hours</div>
                    </div>

                    <!-- Seasonal Tips -->
                    <div class="tip-card" data-category="seasonal">
                        <div class="tip-icon">🌧️</div>
                        <h3>Monsoon Precautions</h3>
                        <p>Extra vigilant during rains: Boil all water, avoid flooded areas, check water sources regularly</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">📈 Risk increases 3x</div>
                    </div>
                    
                    <div class="tip-card" data-category="seasonal">
                        <div class="tip-icon">☀️</div>
                        <h3>Summer Care</h3>
                        <p>Drink more water, avoid direct sun, keep water cool but not with ice, check for algae growth</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">🌡️ Stay hydrated</div>
                    </div>
                    
                    <div class="tip-card" data-category="seasonal">
                        <div class="tip-icon">🍁</div>
                        <h3>Festival Season</h3>
                        <p>During festivals: Be extra careful with street food, carry your own water, wash hands frequently</p>
                        <div style="font-size: 12px; color: #666; margin-top: 10px;">🎉 Enjoy safely</div>
                    </div>
                </div>
                
                <!-- Quick Action Buttons -->
                <div style="margin-top: 30px; text-align: center;">
                    <button class="btn" onclick="downloadPreventionGuide()" style="margin: 5px;">📱 Download Guide</button>
                    <button class="btn" onclick="sharePreventionTips()" style="margin: 5px;">📤 Share Tips</button>
                    <button class="btn" onclick="setReminders()" style="margin: 5px;">⏰ Set Reminders</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                login_title: "🔑 Complete Registration",
                first_name: "First Name:",
                last_name: "Last Name:",
                age: "Age:",
                gender: "Gender:",
                male: "Male",
                female: "Female",
                other: "Other",
                village: "Village/Area:",
                login_method: "Login Method:",
                phone_otp: "Phone OTP",
                aadhaar_id: "Aadhaar ID",
                email: "Email",
                user_role: "User Role:",
                citizen: "Citizen",
                health_worker: "Health Worker",
                admin: "Admin",
                researcher: "Researcher",
                contact_info: "Contact Information:",
                login_btn: "Complete Registration",
                welcome_back: "👋 Welcome back,",
                report_issue: "Report Issue",
                view_alerts: "View Alerts",
                my_health: "My Health",
                settings: "Settings",
                activity_timeline: "📋 Activity Timeline",
                daily_cases: "📈 Daily Cases vs Resolved (Click to view details)",
                dashboard: "Dashboard",
                feedback: "Feedback",
                prevention: "Prevention",
                logout: "Logout",
                dashboard_title: "📊 Dashboard",
                welcome: "Welcome,",
                total_users: "Total Users",
                active_reports: "Active Reports",
                test_points: "Test Points",
                health_cases: "Health Cases",
                recent_activity: "📈 Recent Activity",
                disease_distribution: "🦠 Disease Distribution",
                learning_title: "📚 Awareness & Learning Hub",
                videos_tab: "Videos",
                infographics_tab: "Infographics",
                quiz_tab: "Quiz",
                resources_tab: "Resources",
                gps_map_title: "🗺️ GPS Water Sources Map",
                my_location: "My Location",
                nearest_safe: "Nearest Safe",
                directions: "Directions",
                refresh: "Refresh",
                water_safety_video: "Water Safety Basics",
                disease_prevention: "Disease Prevention",
                proper_handwashing: "Proper Handwashing",
                water_treatment: "Water Treatment Methods",
                cholera_info: "Cholera Prevention Guide",
                typhoid_info: "Typhoid Awareness",
                diarrhea_info: "Diarrhea Prevention",
                water_testing: "Water Testing Guide",
                weekly_quiz: "Weekly Health Quiz",
                water_quiz: "Water Safety Quiz",
                disease_quiz: "Disease Prevention Quiz",
                safety_quiz: "Community Safety Quiz",
                who_guidelines: "WHO Water Guidelines",
                emergency_contacts: "Emergency Contacts",
                health_centers: "Nearby Health Centers",
                water_sources: "Safe Water Sources",
                latest_complaints: "Latest Complaints",
                feedback_title: "📤 Report Water Quality Issue",
                location: "Location:",
                water_source: "Water Source:",
                description: "Description:",
                water_rating: "Water Quality Rating:",
                submit_report: "Submit Report",
                prevention_title: "🛡️ Water Safety & Prevention Tips",
                handwashing: "Hand Washing",
                handwashing_tip: "Wash hands with soap for 20 seconds before eating and after using toilet",
                boil_water: "Boil Water",
                boil_water_tip: "Boil water for 1 minute before drinking to kill harmful bacteria",
                chlorine_tablets: "Chlorine Tablets",
                chlorine_tip: "Use water purification tablets as directed for safe drinking water",
                safe_storage: "Safe Storage",
                storage_tip: "Store treated water in clean, covered containers"
            },
            hi: {
                login_title: "🔑 लॉगिन / पंजीकरण",
                login_method: "लॉगिन विधि:",
                phone_otp: "फोन OTP",
                aadhaar_id: "आधार ID",
                email: "ईमेल",
                user_role: "उपयोगकर्ता भूमिका:",
                citizen: "नागरिक",
                health_worker: "स्वास्थ्य कार्यकर्ता",
                admin: "प्रशासक",
                researcher: "शोधकर्ता",
                contact_info: "संपर्क जानकारी:",
                login_btn: "लॉगिन / पंजीकरण",
                dashboard: "डैशबोर्ड",
                feedback: "फीडबैक",
                prevention: "रोकथाम",
                logout: "लॉगआउट",
                dashboard_title: "📊 डैशबोर्ड",
                welcome: "स्वागत है,",
                total_users: "कुल उपयोगकर्ता",
                active_reports: "सक्रिय रिपोर्ट",
                test_points: "परीक्षण बिंदु",
                health_cases: "स्वास्थ्य मामले",
                recent_activity: "📈 हाल की गतिविधि",
                disease_distribution: "🦠 रोग वितरण",
                learning_title: "📚 जागरूकता और शिक्षा केंद्र",
                videos_tab: "वीडियो",
                infographics_tab: "इन्फोग्राफिक्स",
                quiz_tab: "प्रश्नोत्तरी",
                resources_tab: "संसाधन",
                water_safety_video: "पानी की सुरक्षा मूल बातें",
                disease_prevention: "रोग की रोकथाम",
                proper_handwashing: "उचित हाथ धोना",
                water_treatment: "पानी उपचार के तरीके",
                cholera_info: "हैजा रोकथाम गाइड",
                typhoid_info: "टाइफाइड जागरूकता",
                diarrhea_info: "दस्त की रोकथाम",
                water_testing: "पानी परीक्षण गाइड",
                weekly_quiz: "साप्ताहिक स्वास्थ्य प्रश्नोत्तरी",
                water_quiz: "पानी सुरक्षा प्रश्नोत्तरी",
                disease_quiz: "रोग रोकथाम प्रश्नोत्तरी",
                safety_quiz: "सामुदायिक सुरक्षा प्रश्नोत्तरी",
                who_guidelines: "WHO पानी दिशानिर्देश",
                emergency_contacts: "आपातकालीन संपर्क",
                health_centers: "नजदीकी स्वास्थ्य केंद्र",
                water_sources: "सुरक्षित पानी के स्रोत",
                latest_complaints: "नवीनतम शिकायतें",
                feedback_title: "📤 पानी की गुणवत्ता की समस्या रिपोर्ट करें",
                location: "स्थान:",
                water_source: "पानी का स्रोत:",
                description: "विवरण:",
                water_rating: "पानी की गुणवत्ता रेटिंग:",
                submit_report: "रिपोर्ट जमा करें",
                prevention_title: "🛡️ पानी की सुरक्षा और रोकथाम के सुझाव",
                handwashing: "हाथ धोना",
                handwashing_tip: "खाने से पहले और शौचालय के बाद 20 सेकंड तक साबुन से हाथ धोएं",
                boil_water: "पानी उबालें",
                boil_water_tip: "हानिकारक बैक्टीरिया को मारने के लिए पीने से पहले 1 मिनट तक पानी उबालें",
                chlorine_tablets: "क्लोरीन की गोलियां",
                chlorine_tip: "सुरक्षित पेयजल के लिए निर्देशानुसार पानी शुद्धीकरण गोलियों का उपयोग करें",
                safe_storage: "सुरक्षित भंडारण",
                storage_tip: "उपचारित पानी को साफ, ढके हुए कंटेनरों में स्टोर करें"
            }
        };

        let currentLanguage = 'en';
        let currentRating = 0;

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                login();
            });

            if (document.getElementById('feedbackForm')) {
                document.getElementById('feedbackForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    submitFeedback();
                });
                
                document.getElementById('photoUpload').addEventListener('change', function(e) {
                    const files = e.target.files;
                    const preview = document.getElementById('photoPreview');
                    preview.innerHTML = '';
                    
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        const div = document.createElement('div');
                        div.style.cssText = 'display: inline-block; margin: 5px; padding: 5px; background: #f0f0f0; border-radius: 5px; font-size: 12px;';
                        div.textContent = `📷 ${file.name}`;
                        preview.appendChild(div);
                    }
                });
            }
            
            // Initialize quick report
            updateAdditionalFields('water');
            
            updateTranslations();
        });

        function changeLanguage() {
            currentLanguage = document.getElementById('languageSelect').value;
            updateTranslations();
        }

        function updateTranslations() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                        element.placeholder = translations[currentLanguage][key];
                    } else if (element.tagName === 'OPTION') {
                        element.textContent = translations[currentLanguage][key];
                    } else {
                        element.textContent = translations[currentLanguage][key];
                    }
                }
            });
            updateDynamicContent();
        }

        function updateDynamicContent() {
            const roleGreetings = {
                en: {
                    citizen: "Stay informed about water safety in your community",
                    health_worker: "Monitor health reports and assist your community",
                    admin: "Oversee system statistics and manage operations",
                    researcher: "Analyze data patterns and health trends"
                },
                hi: {
                    citizen: "अपने समुदाय में पानी की सुरक्षा के बारे में जानकारी रखें",
                    health_worker: "स्वास्थ्य रिपोर्ट की निगरानी करें और अपने समुदाय की सहायता करें",
                    admin: "सिस्टम आंकड़ों की देखरेख करें और संचालन का प्रबंधन करें",
                    researcher: "डेटा पैटर्न और स्वास्थ्य रुझानों का विश्लेषण करें"
                }
            };
            
            const alerts = {
                en: [
                    'Unsafe water detected in Village Kamrup - Boil water before use',
                    'Health camp scheduled tomorrow in Village Jorhat - Free checkups',
                    'Water quality improved in Village Tezpur - Safe for consumption'
                ],
                hi: [
                    'गांव कामरूप में असुरक्षित पानी - उपयोग से पहले पानी उबालें',
                    'गांव जोरहाट में कल स्वास्थ्य शिविर - मुफ्त जांच',
                    'गांव तेजपुर में पानी की गुणवत्ता में सुधार'
                ]
            };
            
            const alertElement = document.getElementById('liveAlert');
            if (alertElement && alerts[currentLanguage]) {
                const currentAlert = alerts[currentLanguage][Math.floor(Math.random() * alerts[currentLanguage].length)];
                alertElement.textContent = currentAlert;
            }
        }

        function login() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const age = document.getElementById('age').value;
            const gender = document.getElementById('gender').value;
            const village = document.getElementById('village').value;
            const loginMethod = document.getElementById('loginMethod').value;
            const userRole = document.getElementById('userRole').value;
            const contactInput = document.getElementById('contactInput').value;

            if (!firstName || !lastName || !age || !gender || !village || !contactInput) {
                alert('Please fill in all required fields');
                return;
            }

            // Store user data
            const userData = {
                firstName, lastName, age, gender, village, loginMethod, userRole, contactInput
            };
            localStorage.setItem('userData', JSON.stringify(userData));

            // Update UI with user info
            document.getElementById('userName').textContent = firstName + ' ' + lastName;
            updateRoleGreeting(userRole);
            
            // Switch to dashboard
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById('dashboardPage').classList.add('active');
        }

        function updateRoleGreeting(role) {
            const greetings = {
                citizen: "Stay informed about water safety in your community",
                health_worker: "Monitor health reports and assist your community",
                admin: "Oversee system statistics and manage operations",
                researcher: "Analyze data patterns and health trends"
            };
            document.getElementById('roleGreeting').textContent = greetings[role] || greetings.citizen;
        }

        function showAlerts() {
            alert('🚨 Current Alerts:\n• Unsafe water in Village Kamrup\n• Health camp tomorrow in Village Jorhat\n• Cholera outbreak warning in District 3');
        }

        function showHealth() {
            alert('🏥 Your Health Status:\n• No recent reports\n• Last checkup: 2 weeks ago\n• Recommended: Water quality test');
        }

        function showSettings() {
            alert('⚙️ Settings:\n• Language: ' + currentLanguage.toUpperCase() + '\n• Notifications: Enabled\n• Location: Auto-detect');
        }




        // Enhanced Cases Chart Functions
        function filterCasesData() {
            const filter = document.getElementById('casesTimeFilter').value;
            alert('🔍 Cases Data Filtered\n\n📅 Time Period: ' + filter + '\n\n📊 Updated Analytics:\n• Data refreshed for selected period\n• Trends recalculated\n• Resolution rates updated\n• Comparative analysis refreshed\n\nFiltered view now active.');
        }
        
        function refreshCasesData() {
            alert('🔄 Cases Data Refreshed!\n\n• Latest case reports loaded\n• Real-time statistics updated\n• Resolution tracking refreshed\n• Trend analysis recalculated\n\nLast update: Just now');
        }
        
        function showDayDetails(day) {
            const dayData = {
                'Mon': {
                    newCases: 15,
                    resolved: 12,
                    pending: 3,
                    types: ['Diarrhea: 8', 'Typhoid: 4', 'Cholera: 3'],
                    villages: ['Tezpur: 6', 'Nagaon: 5', 'Silchar: 4'],
                    responseTime: '2.1 hours'
                },
                'Tue': {
                    newCases: 20,
                    resolved: 17,
                    pending: 3,
                    types: ['Diarrhea: 12', 'Typhoid: 5', 'Jaundice: 3'],
                    villages: ['Tezpur: 8', 'Dibrugarh: 7', 'Nagaon: 5'],
                    responseTime: '1.8 hours'
                },
                'Wed': {
                    newCases: 14,
                    resolved: 18,
                    pending: -4,
                    types: ['Diarrhea: 7', 'Typhoid: 4', 'Cholera: 3'],
                    villages: ['Silchar: 6', 'Tezpur: 4', 'Jorhat: 4'],
                    responseTime: '2.3 hours'
                },
                'Thu': {
                    newCases: 10,
                    resolved: 15,
                    pending: -5,
                    types: ['Diarrhea: 5', 'Typhoid: 3', 'Jaundice: 2'],
                    villages: ['Nagaon: 4', 'Dibrugarh: 3', 'Tezpur: 3'],
                    responseTime: '1.9 hours'
                },
                'Fri': {
                    newCases: 12,
                    resolved: 13,
                    pending: -1,
                    types: ['Diarrhea: 6', 'Typhoid: 4', 'Cholera: 2'],
                    villages: ['Silchar: 5', 'Tezpur: 4', 'Nagaon: 3'],
                    responseTime: '2.0 hours'
                },
                'Sat': {
                    newCases: 8,
                    resolved: 11,
                    pending: -3,
                    types: ['Diarrhea: 4', 'Typhoid: 2', 'Jaundice: 2'],
                    villages: ['Dibrugarh: 3', 'Jorhat: 3', 'Silchar: 2'],
                    responseTime: '1.7 hours'
                },
                'Sun': {
                    newCases: 6,
                    resolved: 9,
                    pending: -3,
                    types: ['Diarrhea: 3', 'Typhoid: 2', 'Cholera: 1'],
                    villages: ['Tezpur: 2', 'Nagaon: 2', 'Silchar: 2'],
                    responseTime: '1.5 hours'
                }
            };
            
            const data = dayData[day];
            let message = `📊 ${day} - Detailed Case Analysis:\n\n`;
            message += `📈 New Cases: ${data.newCases}\n`;
            message += `✅ Resolved: ${data.resolved}\n`;
            message += `📋 Net Change: ${data.pending > 0 ? '+' + data.pending : data.pending}\n`;
            message += `⏱️ Avg Response: ${data.responseTime}\n\n`;
            
            message += `🦠 Disease Breakdown:\n`;
            data.types.forEach(type => {
                message += `• ${type}\n`;
            });
            
            message += `\n📍 Village Distribution:\n`;
            data.villages.forEach(village => {
                message += `• ${village}\n`;
            });
            
            const resolutionRate = Math.round((data.resolved / (data.newCases + data.resolved)) * 100);
            message += `\n📊 Resolution Rate: ${resolutionRate}%`;
            
            alert(message);
        }

        function showDiseaseChart() {
            alert('🦠 Disease Distribution Details:\n\n🔴 Diarrhea: 18 cases (40%)\n   - Age group: 5-45 years\n   - Peak: Monsoon season\n\n🟡 Typhoid: 12 cases (25%)\n   - Age group: 15-60 years\n   - Source: Contaminated water\n\n🟠 Cholera: 9 cases (20%)\n   - Age group: All ages\n   - Status: Under control\n\n🟢 Jaundice: 7 cases (15%)\n   - Age group: 20-50 years\n   - Trend: Decreasing');
        }

        function showMapDetails() {
            alert('🗺️ Interactive Map Details:\n\n📍 Click on village dots for details:\n• Green: Safe areas (0 cases)\n• Yellow: Warning areas (1-5 cases)\n• Red: High risk areas (6+ cases)\n\nTotal Villages: 102\nAffected Villages: 35\nRecovery Rate: 87%');
        }

        function showVillageDetails(villageName) {
            const villageData = {
                'Kamrup': {
                    cases: 0,
                    population: 12450,
                    status: 'Safe',
                    lastTest: '2 days ago',
                    waterSources: 8,
                    healthWorkers: 3
                },
                'Jorhat': {
                    cases: 0,
                    population: 8920,
                    status: 'Safe',
                    lastTest: '1 day ago',
                    waterSources: 5,
                    healthWorkers: 2
                },
                'Dibrugarh': {
                    cases: 2,
                    population: 15670,
                    status: 'Warning',
                    lastTest: '6 hours ago',
                    waterSources: 12,
                    healthWorkers: 4,
                    diseases: ['Diarrhea: 1', 'Typhoid: 1']
                },
                'Tezpur': {
                    cases: 8,
                    population: 22340,
                    status: 'High Risk',
                    lastTest: '3 hours ago',
                    waterSources: 18,
                    healthWorkers: 6,
                    diseases: ['Cholera: 3', 'Diarrhea: 4', 'Typhoid: 1']
                },
                'Guwahati': {
                    cases: 0,
                    population: 45890,
                    status: 'Safe',
                    lastTest: '4 hours ago',
                    waterSources: 35,
                    healthWorkers: 12
                },
                'Silchar': {
                    cases: 3,
                    population: 18230,
                    status: 'Warning',
                    lastTest: '8 hours ago',
                    waterSources: 14,
                    healthWorkers: 5,
                    diseases: ['Diarrhea: 2', 'Jaundice: 1']
                },
                'Nagaon': {
                    cases: 12,
                    population: 28450,
                    status: 'High Risk',
                    lastTest: '2 hours ago',
                    waterSources: 22,
                    healthWorkers: 8,
                    diseases: ['Cholera: 5', 'Diarrhea: 4', 'Typhoid: 2', 'Jaundice: 1']
                }
            };
            
            const data = villageData[villageName];
            let message = `🏡 ${villageName} Village Details:\n\n`;
            message += `🟢 Status: ${data.status}\n`;
            message += `🦠 Active Cases: ${data.cases}\n`;
            message += `👥 Population: ${data.population.toLocaleString()}\n`;
            message += `💧 Water Sources: ${data.waterSources}\n`;
            message += `👩‍⚕️ Health Workers: ${data.healthWorkers}\n`;
            message += `🕰️ Last Test: ${data.lastTest}\n`;
            
            if (data.diseases) {
                message += `\n🦠 Disease Breakdown:\n`;
                data.diseases.forEach(disease => {
                    message += `• ${disease}\n`;
                });
            }
            
            alert(message);
        }

        function filterByDisease() {
            const filter = document.getElementById('diseaseFilter').value;
            alert(`🔍 Filtering map by: ${filter.toUpperCase()}\n\nThis would show only villages affected by ${filter === 'all' ? 'all diseases' : filter}.\n\nFiltered results would highlight relevant villages and update statistics accordingly.`);
        }

        function refreshMapData() {
            alert('🔄 Map Data Refreshed!\n\n• Latest case reports loaded\n• Village status updated\n• Real-time data synchronized\n• Health worker locations updated\n\nLast update: Just now');
            
            // Simulate data refresh with slight changes
            const dots = document.querySelectorAll('.village-dot');
            dots.forEach(dot => {
                dot.style.animation = 'pulse 0.5s';
            });
        }

        function showTooltip(event, text) {
            const tooltip = document.getElementById('villageTooltip');
            tooltip.textContent = text;
            tooltip.style.display = 'block';
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY - 30 + 'px';
        }

        function hideTooltip() {
            document.getElementById('villageTooltip').style.display = 'none';
        }

        function filterSources(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const sources = document.querySelectorAll('.water-source');
            sources.forEach(source => {
                if (type === 'all' || source.dataset.type === type) {
                    source.style.display = 'block';
                } else {
                    source.style.display = 'none';
                }
            });
        }

        function refreshSources() {
            alert('🔄 Water Sources Refreshed!\n\n• Latest test results loaded\n• Distance calculations updated\n• Availability status verified\n• New sources added to database\n\nLast update: Just now');
        }

        function getDirections(lat, lng, sourceName) {
            const googleMapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
            
            if (confirm(`🧭 Get directions to ${sourceName}?\n\nThis will open in your maps app.`)) {
                window.open(googleMapsUrl, '_blank');
            }
        }

        function reportIssue(sourceName) {
            alert(`📢 Report Issue - ${sourceName}\n\nIssue types:\n1. Water quality changed\n2. Source not working\n3. Contamination suspected\n4. Maintenance needed\n\nYour report will be sent to local authorities.`);
        }

        function viewAllSources() {
            alert('🗺️ All Water Sources Map\n\n• Interactive map with all 156 sources\n• Real-time status updates\n• Filter by safety level\n• Get directions to any source\n\nOpening full map view...');
        }

        // Water source functions
        function showWaterSource(type) {
            const messages = {
                safe: '✅ Tube Well A - SAFE\n\n📊 Test Results:\n• pH Level: 7.2 (Good)\n• Bacteria: None detected\n• Chlorine: 0.5 ppm\n• Last tested: 2 days ago\n\n📍 GPS: 26.1445°N, 91.7362°E\n📍 Distance: 1.2 km North\n🕒 Available: 24/7\n\n🧭 Get Directions?',
                warning: '⚠️ Hand Pump B - CAUTION\n\n📊 Test Results:\n• pH Level: 6.8 (Slightly acidic)\n• Bacteria: Low levels\n• Iron content: High\n• Last tested: 1 week ago\n\n📍 GPS: 26.1523°N, 91.7445°E\n📍 Distance: 2.1 km East\n💡 Recommendation: Boil before use\n\n🧭 Get Directions?',
                unsafe: '❌ River Source - UNSAFE\n\n📊 Test Results:\n• pH Level: 5.9 (Acidic)\n• Bacteria: High levels detected\n• E.coli: Present\n• Last tested: 3 days ago\n\n📍 GPS: 26.1398°N, 91.7298°E\n📍 Distance: 0.8 km South\n🚫 DO NOT USE for drinking'
            };
            alert(messages[type]);
        }

        // GPS Map Functions
        let userLocation = null;
        const waterSources = [
            { name: 'Tube Well A', lat: 26.1445, lng: 91.7362, status: 'safe', distance: 1.2 },
            { name: 'Hand Pump B', lat: 26.1523, lng: 91.7445, status: 'warning', distance: 2.1 },
            { name: 'River Source', lat: 26.1398, lng: 91.7298, status: 'unsafe', distance: 0.8 },
            { name: 'Community Well', lat: 26.1567, lng: 91.7523, status: 'safe', distance: 3.2 },
            { name: 'Government Tank', lat: 26.1234, lng: 91.7654, status: 'safe', distance: 4.1 }
        ];

        function showMarkerPopup(event, name, coords, status) {
            const popup = document.getElementById('markerPopup');
            popup.innerHTML = `<strong>${name}</strong><br>${coords}<br>${status}`;
            popup.style.display = 'block';
            popup.style.left = event.pageX - popup.offsetWidth/2 + 'px';
            popup.style.top = event.pageY - popup.offsetHeight - 10 + 'px';
        }

        function hideMarkerPopup() {
            document.getElementById('markerPopup').style.display = 'none';
        }

        function openGPSLocation(lat, lng, name) {
            const googleMapsUrl = `https://www.google.com/maps?q=${lat},${lng}`;
            const appleMapsUrl = `http://maps.apple.com/?q=${lat},${lng}`;
            
            if (confirm(`Open ${name} location in maps?\n\nGPS: ${lat}°N, ${lng}°E`)) {
                if (navigator.userAgent.includes('iPhone') || navigator.userAgent.includes('iPad')) {
                    window.open(appleMapsUrl, '_blank');
                } else {
                    window.open(googleMapsUrl, '_blank');
                }
            }
        }

        function getCurrentLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        updateDistances();
                        alert(`📍 Your Location Found!\n\nGPS: ${userLocation.lat.toFixed(4)}°N, ${userLocation.lng.toFixed(4)}°E\n\nDistances updated below.`);
                    },
                    (error) => {
                        alert('⚠️ Location access denied or unavailable.\nUsing approximate location for distance calculations.');
                        userLocation = { lat: 26.1400, lng: 91.7350 }; // Default Guwahati location
                        updateDistances();
                    }
                );
            } else {
                alert('🚫 Geolocation not supported by this browser.');
            }
        }

        function updateDistances() {
            if (!userLocation) return;
            
            const distanceInfo = document.getElementById('distanceInfo');
            let html = '📍 Distances from your location:\n';
            
            waterSources.forEach(source => {
                const distance = calculateDistance(userLocation.lat, userLocation.lng, source.lat, source.lng);
                const statusIcon = source.status === 'safe' ? '✅' : source.status === 'warning' ? '⚠️' : '❌';
                html += `\n${statusIcon} ${source.name}: ${distance.toFixed(1)} km`;
            });
            
            distanceInfo.textContent = html;
        }

        function calculateDistance(lat1, lng1, lat2, lng2) {
            const R = 6371; // Earth's radius in km
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLng/2) * Math.sin(dLng/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        function findNearestSafe() {
            if (!userLocation) {
                alert('📍 Please get your location first!');
                return;
            }
            
            const safeWaterSources = waterSources.filter(source => source.status === 'safe');
            let nearest = safeWaterSources[0];
            let minDistance = calculateDistance(userLocation.lat, userLocation.lng, nearest.lat, nearest.lng);
            
            safeWaterSources.forEach(source => {
                const distance = calculateDistance(userLocation.lat, userLocation.lng, source.lat, source.lng);
                if (distance < minDistance) {
                    minDistance = distance;
                    nearest = source;
                }
            });
            
            alert(`🔍 Nearest Safe Water Source:\n\n✅ ${nearest.name}\nDistance: ${minDistance.toFixed(1)} km\nGPS: ${nearest.lat}°N, ${nearest.lng}°E\n\nOpen in maps?`);
            
            if (confirm('Get directions?')) {
                openGPSLocation(nearest.lat, nearest.lng, nearest.name);
            }
        }

        function showAllDirections() {
            if (!userLocation) {
                alert('📍 Please get your location first!');
                return;
            }
            
            let directionsText = '🧭 Directions to All Water Sources:\n\n';
            
            waterSources.forEach(source => {
                const distance = calculateDistance(userLocation.lat, userLocation.lng, source.lat, source.lng);
                const statusIcon = source.status === 'safe' ? '✅' : source.status === 'warning' ? '⚠️' : '❌';
                const bearing = calculateBearing(userLocation.lat, userLocation.lng, source.lat, source.lng);
                directionsText += `${statusIcon} ${source.name}\n   ${distance.toFixed(1)} km ${bearing}\n   GPS: ${source.lat}°N, ${source.lng}°E\n\n`;
            });
            
            alert(directionsText);
        }

        function calculateBearing(lat1, lng1, lat2, lng2) {
            const dLng = (lng2 - lng1) * Math.PI / 180;
            const lat1Rad = lat1 * Math.PI / 180;
            const lat2Rad = lat2 * Math.PI / 180;
            
            const y = Math.sin(dLng) * Math.cos(lat2Rad);
            const x = Math.cos(lat1Rad) * Math.sin(lat2Rad) - Math.sin(lat1Rad) * Math.cos(lat2Rad) * Math.cos(dLng);
            
            let bearing = Math.atan2(y, x) * 180 / Math.PI;
            bearing = (bearing + 360) % 360;
            
            const directions = ['North', 'Northeast', 'East', 'Southeast', 'South', 'Southwest', 'West', 'Northwest'];
            return directions[Math.round(bearing / 45) % 8];
        }

        function refreshMap() {
            alert('🔄 Map refreshed!\n\nLatest water source data loaded.\nAll GPS coordinates updated.');
            if (userLocation) {
                updateDistances();
            }
        }

        // Enhanced Map Functions
        function filterMapSources() {
            const filter = document.getElementById('mapFilter').value;
            const markers = document.querySelectorAll('.water-marker');
            
            markers.forEach(marker => {
                if (filter === 'all' || marker.dataset.type === filter) {
                    marker.style.display = 'block';
                } else {
                    marker.style.display = 'none';
                }
            });
            
            alert(`🔍 Map filtered to show: ${filter === 'all' ? 'All water sources' : filter + ' sources only'}\n\nVisible markers updated on map.`);
        }

        function refreshMapData() {
            alert('🔄 Map Data Refreshed!\n\n• Latest test results loaded\n• New water sources added\n• GPS coordinates verified\n• Safety status updated\n\nLast update: Just now');
        }

        function showSourceDetails(sourceId) {
            const sources = {
                'tube-well-a': '✅ Tube Well A - Detailed Report\n\n📍 Location: 26.1445°N, 91.7362°E\n📊 Distance: 1.2 km North\n\n🗓️ Test Results (2 days ago):\n• pH Level: 7.2 (Excellent)\n• TDS: 180 ppm (Good)\n• Bacteria: None detected\n• Chlorine: 0.5 ppm\n• Fluoride: 0.8 ppm\n\n🕰️ Availability: 24/7\n👥 Daily Users: ~150 people\n🔧 Last Maintenance: 1 week ago\n\n🎯 Recommendation: Safe for direct consumption',
                'hand-pump-b': '⚠️ Hand Pump B - Detailed Report\n\n📍 Location: 26.1523°N, 91.7445°E\n📊 Distance: 2.1 km East\n\n🗓️ Test Results (1 week ago):\n• pH Level: 6.8 (Slightly acidic)\n• TDS: 420 ppm (High)\n• Iron: 2.1 ppm (High)\n• Bacteria: Low levels\n• Turbidity: 8 NTU\n\n🕰️ Availability: 6 AM - 8 PM\n👥 Daily Users: ~80 people\n🔧 Maintenance Needed: Iron filter\n\n🎯 Recommendation: Boil before use or use iron removal filter',
                'river-source': '❌ River Source - Detailed Report\n\n📍 Location: 26.1398°N, 91.7298°E\n📊 Distance: 0.8 km South\n\n🗓️ Test Results (3 days ago):\n• pH Level: 5.9 (Acidic)\n• E.coli: 1,200 CFU/ml (Very High)\n• Coliform: Present\n• Turbidity: 25 NTU (High)\n• Heavy metals: Detected\n\n🚫 Status: UNSAFE - DO NOT USE\n🚨 Health Risk: High\n🔧 Action Required: Source isolation\n\n🎯 Recommendation: Avoid completely - seek alternative sources',
                'community-well': '✅ Community Well - Detailed Report\n\n📍 Location: 26.1567°N, 91.7523°E\n📊 Distance: 3.2 km Northeast\n\n🗓️ Test Results (Today):\n• pH Level: 7.1 (Good)\n• TDS: 220 ppm (Acceptable)\n• Bacteria: None detected\n• Nitrates: 15 ppm (Safe)\n• Hardness: 180 ppm (Moderate)\n\n🕰️ Availability: 24/7\n👥 Daily Users: ~300 people\n🔧 Last Cleaned: 3 days ago\n\n🎯 Recommendation: Safe for consumption',
                'gov-tank': '✅ Government Tank - Detailed Report\n\n📍 Location: 26.1234°N, 91.7654°E\n📊 Distance: 4.1 km Southwest\n\n🗓️ Test Results (1 day ago):\n• pH Level: 7.3 (Excellent)\n• Chlorine: 1.2 ppm (Treated)\n• TDS: 150 ppm (Low)\n• Bacteria: None (Chlorinated)\n• Turbidity: 2 NTU (Clear)\n\n🕰️ Availability: 6 AM - 10 PM\n👥 Daily Users: ~500 people\n🔧 Treatment: Chlorination system\n\n🎯 Recommendation: Excellent quality, treated water',
                'bore-well-d': '⚠️ Bore Well D - Detailed Report\n\n📍 Location: 26.1389°N, 91.7201°E\n📊 Distance: 2.8 km West\n\n🗓️ Test Results (5 days ago):\n• pH Level: 7.0 (Good)\n• TDS: 850 ppm (Very High)\n• Salinity: High\n• Bacteria: None detected\n• Minerals: Excess dissolved solids\n\n🕰️ Availability: 24/7\n👥 Daily Users: ~120 people\n🔧 Treatment Needed: RO filtration\n\n🎯 Recommendation: Install RO system or use for non-drinking purposes',
                'spring-water': '✅ Spring Water - Detailed Report\n\n📍 Location: 26.1612°N, 91.7678°E\n📊 Distance: 4.5 km Northeast\n\n🗓️ Test Results (1 day ago):\n• pH Level: 7.4 (Excellent)\n• TDS: 120 ppm (Low)\n• Natural minerals: Balanced\n• Bacteria: None detected\n• Purity: 99.2%\n\n🕰️ Availability: 24/7 (Natural flow)\n👥 Daily Users: ~200 people\n🌿 Source: Natural mountain spring\n\n🎯 Recommendation: Premium quality natural water'
            };
            
            alert(sources[sourceId] || 'Source details not available.');
        }

        function showMapLegend() {
            alert('ℹ️ Map Legend & Information\n\n🟢 Green Markers (Safe):\n• pH: 6.5-8.5\n• No harmful bacteria\n• Safe for direct consumption\n\n🟡 Yellow Markers (Caution):\n• Minor quality issues\n• Treatment recommended\n• Boiling advised\n\n🔴 Red Markers (Unsafe):\n• Contaminated water\n• Health risk present\n• Avoid consumption\n\n📍 Marker Labels:\nA=Tube Well, B=Hand Pump, C=Community Well\nG=Government Tank, D=Bore Well, R=River, S=Spring\n\n📊 Coverage Area: 15 km radius\n🔄 Update Frequency: Every 6 hours');
        }

        // Prevention tips carousel
        let currentTip = 0;
        const tips = document.querySelectorAll('.tip-slide');
        const tipDots = document.querySelectorAll('.tip-dot');

        function showTip(index) {
            tips[currentTip].classList.remove('active');
            tipDots[currentTip].classList.remove('active');
            currentTip = index;
            tips[currentTip].classList.add('active');
            tipDots[currentTip].classList.add('active');
        }

        // Auto-rotate tips every 5 seconds
        setInterval(() => {
            const nextTip = (currentTip + 1) % tips.length;
            showTip(nextTip);
        }, 5000);

        // Enhanced Quick report functions
        let selectedReportType = 'water';
        let attachments = [];
        let currentLocation = null;

        function selectReportType(type) {
            selectedReportType = type;
            document.querySelectorAll('.report-type').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateAdditionalFields(type);
        }



        function updateAdditionalFields(type) {
            const fieldsContainer = document.getElementById('additionalFields');
            fieldsContainer.innerHTML = '';
            
            const fields = {
                water: [
                    { label: 'Water Source Type', type: 'select', options: ['Tube Well', 'Hand Pump', 'River', 'Pond', 'Tank', 'Other'] },
                    { label: 'Affected People Count', type: 'number', placeholder: 'Number of people affected' }
                ],
                health: [
                    { label: 'Patient Age', type: 'number', placeholder: 'Age in years' },
                    { label: 'Symptoms Duration', type: 'select', options: ['< 1 day', '1-3 days', '3-7 days', '> 1 week'] },
                    { label: 'Severity', type: 'select', options: ['Mild', 'Moderate', 'Severe', 'Critical'] }
                ],
                emergency: [
                    { label: 'Emergency Type', type: 'select', options: ['Water Contamination', 'Disease Outbreak', 'Infrastructure Failure', 'Other'] },
                    { label: 'People at Risk', type: 'number', placeholder: 'Number of people at risk' }
                ]
            };
            
            if (fields[type]) {
                fields[type].forEach(field => {
                    const fieldDiv = document.createElement('div');
                    fieldDiv.className = 'field-group';
                    
                    const label = document.createElement('label');
                    label.textContent = field.label;
                    fieldDiv.appendChild(label);
                    
                    if (field.type === 'select') {
                        const select = document.createElement('select');
                        field.options.forEach(option => {
                            const optionEl = document.createElement('option');
                            optionEl.value = option;
                            optionEl.textContent = option;
                            select.appendChild(optionEl);
                        });
                        fieldDiv.appendChild(select);
                    } else {
                        const input = document.createElement('input');
                        input.type = field.type;
                        input.placeholder = field.placeholder || '';
                        fieldDiv.appendChild(input);
                    }
                    
                    fieldsContainer.appendChild(fieldDiv);
                });
            }
        }

        function getCurrentLocationForReport() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        currentLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        addAttachment('📍 GPS Location', 'location');
                    },
                    () => {
                        alert('⚠️ Location access denied. Please enable location services.');
                    }
                );
            } else {
                alert('🚫 Geolocation not supported by this browser.');
            }
        }

        function addAttachment(name, type) {
            attachments.push({ name, type });
            updateAttachmentPreview();
        }

        function updateAttachmentPreview() {
            const preview = document.getElementById('attachmentPreview');
            preview.innerHTML = '';
            
            attachments.forEach((attachment, index) => {
                const item = document.createElement('div');
                item.className = 'attachment-item';
                item.innerHTML = `
                    <span>${attachment.name}</span>
                    <button class="remove-attachment" onclick="removeAttachment(${index})">×</button>
                `;
                preview.appendChild(item);
            });
        }

        function removeAttachment(index) {
            attachments.splice(index, 1);
            updateAttachmentPreview();
        }

        function addVoiceNote() {
            addAttachment('🎤 Voice Note (2:30)', 'voice');
            alert('🎤 Voice Recording Started\n\nRecording... (Max 2 minutes)\nPress stop when finished.');
        }

        function addPhoto() {
            addAttachment('📷 Photo Evidence', 'photo');
            alert('📷 Photo Captured\n\nImage added to report.\nYou can add multiple photos.');
        }

        function submitQuickReport() {
            const location = document.getElementById('locationSelect').value;
            const priority = document.getElementById('prioritySelect').value;
            const description = document.getElementById('quickReportText').value;
            
            if (!location || location === 'Select Location') {
                alert('Please select a location');
                return;
            }
            
            if (!description.trim()) {
                alert('Please describe the issue');
                return;
            }
            
            // Show progress
            const progressDiv = document.getElementById('reportProgress');
            const progressFill = document.querySelector('.progress-fill-report');
            const progressText = document.querySelector('.progress-text');
            
            progressDiv.style.display = 'block';
            
            // Simulate submission progress
            let progress = 0;
            const interval = setInterval(() => {
                progress += 20;
                progressFill.style.width = progress + '%';
                
                if (progress === 20) progressText.textContent = 'Validating data...';
                else if (progress === 40) progressText.textContent = 'Uploading attachments...';
                else if (progress === 60) progressText.textContent = 'Notifying health workers...';
                else if (progress === 80) progressText.textContent = 'Generating report ID...';
                else if (progress === 100) {
                    progressText.textContent = 'Report submitted successfully!';
                    clearInterval(interval);
                    
                    setTimeout(() => {
                        const reportId = 'WQ' + Date.now().toString().slice(-6);
                        const priorityIcon = priority === 'emergency' ? '🚨' : priority === 'urgent' ? '⚠️' : '📋';
                        
                        alert(`✅ Report Submitted Successfully!\n\n${priorityIcon} Priority: ${priority.toUpperCase()}\n📍 Location: ${location}\n📝 Type: ${selectedReportType.toUpperCase()}\n📎 Attachments: ${attachments.length}\n${currentLocation ? '🗺️ GPS: Included' : ''}\n\n📱 SMS alert sent to health workers\n📧 Email confirmation sent\n🆔 Report ID: ${reportId}\n⏰ ETA Response: ${priority === 'emergency' ? '15 min' : priority === 'urgent' ? '1 hour' : '4 hours'}`);
                        
                        // Reset form
                        document.getElementById('quickReportText').value = '';
                        document.getElementById('locationSelect').value = 'Select Location';
                        document.getElementById('prioritySelect').value = 'normal';
                        attachments = [];
                        currentLocation = null;
                        updateAttachmentPreview();
                        document.getElementById('additionalFields').innerHTML = '';
                        progressDiv.style.display = 'none';
                        progressFill.style.width = '0%';
                    }, 1000);
                }
            }, 500);
        }



        // Learning section functions
        function showLearningTab(tabName) {
            document.querySelectorAll('.learning-content').forEach(content => content.classList.remove('active'));
            document.querySelectorAll('.learning-tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function playVideo(videoType) {
            const videos = {
                'water-safety': '🎥 Water Safety Basics\n\n• Always boil water for 1 minute\n• Use clean containers for storage\n• Check water color and smell\n• Avoid stagnant water sources\n\nDuration: 5 minutes\nProgress: 100% Complete',
                'disease-prevention': '🦠 Disease Prevention\n\n• Wash hands frequently\n• Drink only safe water\n• Eat properly cooked food\n• Maintain hygiene\n\nDuration: 8 minutes\nProgress: 60% Complete',
                'handwashing': '🧼 Proper Handwashing Technique\n\n• Wet hands with clean water\n• Apply soap and lather\n• Scrub for 20 seconds\n• Rinse and dry\n\nDuration: 3 minutes\nProgress: Not started',
                'water-treatment': '💧 Water Treatment Methods\n\n• Boiling method\n• Chlorination process\n• UV treatment\n• Filtration systems\n\nDuration: 12 minutes\nProgress: 25% Complete'
            };
            alert(videos[videoType]);
        }

        function viewInfographic(type) {
            const infographics = {
                'cholera': '📊 Cholera Prevention Guide\n\n• Symptoms: Severe diarrhea, vomiting\n• Prevention: Safe water, good hygiene\n• Treatment: ORS, medical care\n• High-risk areas: Flood-prone regions\n\nDownload PDF available',
                'typhoid': '📈 Typhoid Awareness\n\n• Symptoms: High fever, headache\n• Transmission: Contaminated food/water\n• Prevention: Vaccination, safe practices\n• Duration: 2-4 weeks if untreated\n\nView detailed infographic',
                'diarrhea': '📋 Diarrhea Prevention\n\n• Causes: Contaminated water, poor hygiene\n• Prevention: Clean water, handwashing\n• Treatment: ORS, fluids\n• When to seek help: Severe dehydration\n\nQuick reference guide',
                'water-testing': '🔬 Water Testing Guide\n\n• Visual inspection\n• pH testing\n• Bacteria testing\n• Chemical analysis\n\nStep-by-step process with images'
            };
            alert(infographics[type]);
        }

        function startQuiz(quizType) {
            const quizzes = {
                'weekly': '🏆 Weekly Health Quiz\n\nQuestions: 10\nTime: 5 minutes\nYour Score: 8/10 (80%)\nBest Score: 9/10\n\nTopics: Water safety, hygiene, disease prevention\n\nReady to retake?',
                'water': '💧 Water Safety Quiz\n\nQuestions: 15\nTime: 8 minutes\nYour Score: 15/15 (100%)\nBadge Earned: Water Safety Expert\n\nCongratulations! Perfect score!',
                'disease': '🦠 Disease Prevention Quiz\n\nQuestions: 12\nTime: 6 minutes\nYour Score: 5/12 (42%)\nStatus: Needs improvement\n\nRecommended: Review disease prevention videos',
                'safety': '🛡️ Community Safety Quiz\n\nQuestions: 8\nTime: 4 minutes\nStatus: Not attempted\n\nTopics: Emergency response, community health\n\nStart quiz now?'
            };
            alert(quizzes[quizType]);
        }

        function viewResource(resourceType) {
            const resources = {
                'who-guidelines': '🌍 WHO Water Quality Guidelines\n\n• Safe drinking water standards\n• Water treatment recommendations\n• Health-based targets\n• Monitoring protocols\n\nOfficial WHO document available',
                'emergency': '🚨 Emergency Contacts\n\n• Health Emergency: 108\n• Water Contamination: 1800-XXX-XXXX\n• District Health Officer: +91-XXXXX-XXXXX\n• Nearest Hospital: +91-XXXXX-XXXXX\n\n24/7 Available',
                'health-centers': '🏥 Nearby Health Centers\n\n• Primary Health Center - 2.5 km\n  Timing: 8 AM - 8 PM\n• Community Health Center - 5.2 km\n  Timing: 24/7\n• District Hospital - 12.8 km\n  Timing: 24/7 Emergency',
                'water-sources': '💧 Verified Safe Water Sources\n\n• Tube Well A - 1.2 km (Safe)\n• Government Tank - 2.1 km (Treated)\n• Community Well - 3.5 km (Tested)\n• Bottled Water Vendor - 0.8 km\n\nUpdated: Today'
            };
            alert(resources[resourceType]);
        }

        // New Learning Hub Functions
        function startCourse(courseType) {
            const courses = {
                'water-basics': '📚 Water Safety Fundamentals\n\nLesson 5/6: Water Storage Methods\n• Progress: 75% complete\n• Next: Final assessment\n• Estimated time: 8 minutes\n\nContinue learning?',
                'disease-master': '🦠 Disease Prevention Mastery\n\nLesson 3/8: Cholera Prevention\n• Progress: 30% complete\n• Current topic: Transmission routes\n• Estimated time: 12 minutes\n\nStart lesson?',
                'emergency-response': '🚨 Emergency Response Course\n\nNot started\n• 5 interactive lessons\n• Real-world scenarios\n• Certificate upon completion\n\nBegin course?',
                'community-health': '🏘️ Community Health Leader\n\nAdvanced certification program\n• 12 comprehensive modules\n• Mentorship included\n• WHO recognized certificate\n\nEnroll now?'
            };
            alert(courses[courseType]);
        }

        function startSimulation(simType) {
            alert('🔬 Virtual Water Testing Lab\n\nInteractive simulation starting...\n\n• Test pH levels\n• Check for bacteria\n• Analyze chemical content\n• Generate test report\n\nUse mouse to interact with lab equipment!');
        }

        function startGame(gameType) {
            alert('🎮 Outbreak Control Game\n\nYour mission: Contain disease spread!\n\n🎯 Current high score: 850\n🏆 Global rank: #47\n⭐ Difficulty: Intermediate\n\nReady to play?');
        }

        function startAR(arType) {
            alert('📱 AR Water Source Finder\n\nPoint your camera to discover:\n\n📍 Nearby water sources\n✅ Safety ratings\n📊 Real-time test data\n🧭 Navigation directions\n\nEnable camera access?');
        }

        function startVR(vrType) {
            alert('🥽 Virtual Village Tour\n\n360° immersive experience:\n\n🏘️ Explore village layout\n💧 Visit water sources\n🏥 Health center tour\n🌧️ Monsoon challenges\n\nStart VR experience?');
        }

        function joinDiscussion(topic) {
            alert('💬 Water Safety Discussion Forum\n\n📊 45 active members online\n📝 12 new posts today\n🔥 Hot topic: Monsoon preparation\n\n💡 Recent posts:\n• "Best water storage tips"\n• "DIY water testing methods"\n• "Community success story"\n\nJoin discussion?');
        }

        function viewSuccess(type) {
            alert('⭐ Local Success Stories\n\n🏆 Village Kamrup Achievement:\n• 100% safe water access\n• Zero disease cases (30 days)\n• Community-led initiative\n• 95% participation rate\n\n📖 Read full story?');
        }

        function joinChallenge(type) {
            alert('🏃 Weekly Health Challenge\n\n🎯 This week: "Water Source Mapping"\n👥 234 participants\n⏰ 3 days remaining\n\n🏆 Prizes:\n🥇 1st: Health kit + Certificate\n🥈 2nd: Water testing kit\n🥉 3rd: Educational materials\n\nJoin challenge?');
        }

        function mentorProgram() {
            alert('👨‍🏫 Peer Mentorship Program\n\n🌟 15 expert mentors available:\n• Dr. Sharma - Water Quality Expert\n• Nurse Priya - Disease Prevention\n• Engineer Raj - Water Systems\n\n💬 Get 1-on-1 guidance\n📅 Schedule 30-min sessions\n🆓 Completely free\n\nConnect with mentor?');
        }

        function viewCertificate(certType) {
            alert('🏆 Water Safety Expert Certificate\n\n✅ Earned: March 15, 2024\n📅 Valid until: December 2024\n🌍 Recognized by WHO standards\n📊 Score: 95/100\n\n📄 Certificate features:\n• Digital verification\n• LinkedIn integration\n• Career advancement\n\nDownload certificate?');
        }

        function startCertification(certType) {
            const certs = {
                'disease-prev': '📜 Disease Prevention Specialist\n\n📊 Progress: 75% complete\n📚 Modules remaining: 2\n⏰ Estimated time: 3 hours\n\nNext module: "Outbreak Response"\n\nContinue certification?',
                'community-leader': '👑 Community Health Leader\n\n🎓 Advanced certification\n📋 Prerequisites: ✅ Met\n⏱️ Duration: 2 weeks\n🏆 Recognition: Government approved\n\nStart certification program?'
            };
            alert(certs[certType]);
        }

        function viewBadges() {
            alert('🏅 Achievement Badges\n\n✅ Earned (12):\n🥇 Water Safety Expert\n🔬 Testing Pro\n📚 Quick Learner\n🤝 Community Helper\n\n🎯 Available (8):\n🌟 Water Testing Pro (90% progress)\n🏆 Disease Detective\n📊 Data Analyst\n🎓 Course Completionist\n\nView all badges?');
        }
        
        // Activity Timeline Functions
        function filterActivity(type) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const items = document.querySelectorAll('.activity-item');
            items.forEach(item => {
                if (type === 'all' || item.dataset.type === type) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }
        
        function refreshActivity() {
            alert('🔄 Activity Feed Refreshed!\n\n• Latest events loaded\n• Real-time updates synced\n• Notifications updated\n\nLast refresh: Just now');
        }
        
        function viewActivityDetails(activityId) {
            const activities = {
                'water-test-1': '⚠️ Water Contamination Alert\n\n📍 Location: Village Kamrup, Tube Well #3\n⏰ Detected: 15 minutes ago\n🔬 Test Results:\n  • pH Level: 5.8 (Acidic)\n  • E.coli: 1,200 CFU/ml (High)\n  • Turbidity: 15 NTU\n\n🚨 Actions Taken:\n  • Health team dispatched\n  • Water source isolated\n  • Community alerted\n\n👥 Affected Population: ~450 people',
                'health-case-1': '✅ Cholera Case - Successfully Resolved\n\n👤 Patient: 45-year-old male\n📍 Location: Village Jorhat\n⏰ Reported: 6 hours ago\n⏰ Resolved: 1 hour ago\n\n💊 Treatment Timeline:\n  • Emergency response: 30 min\n  • Hospital admission: 1 hour\n  • Full recovery: 6 hours\n\n🏥 Medical Team: Dr. Priya\n📊 Recovery Rate: 100%',
                'report-1': '📤 Community Feedback Report\n\n👤 Submitted by: Local Resident\n📍 Location: Village Dibrugarh\n⏰ Time: 2 hours ago\n⭐ Rating: 4/5 stars\n\n📝 Feedback:\n"Water quality has significantly improved since the new filtration system was installed."\n\n🔧 Related Actions:\n  • Filtration system installed\n  • Follow-up testing completed',
                'outbreak-1': '🦠 Disease Outbreak Alert\n\n📍 Location: Village Tezpur\n⏰ Alert Issued: 3 hours ago\n🚨 Status: Active monitoring\n\n📊 Current Situation:\n  • New cases today: 3\n  • Total active cases: 8\n  • Disease type: Diarrhea\n\n🛡️ Prevention Measures:\n  • Water boiling advisory issued\n  • Health camps set up\n\n👥 Response Team: 6 health workers'
            };
            alert(activities[activityId] || 'Activity details not available.');
        }
        
        function viewAllActivity() {
            alert('📜 Complete Activity Timeline\n\n📊 Last 24 Hours Summary:\n• Total events: 47\n• Urgent alerts: 8\n• Resolved cases: 23\n• Ongoing issues: 16\n\n🔍 Filter Options:\n• By time period\n• By village/location\n• By event type\n• By priority level\n\nOpen detailed timeline view?');
        }
        
        // Disease Analytics Functions
        function filterDiseaseData() {
            const filter = document.getElementById('diseaseTimeFilter').value;
            alert('🔍 Disease Data Filtered\n\n📅 Time Period: ' + filter + '\n\n📊 Updated Statistics:\n• Data refreshed for selected period\n• Trends recalculated\n• Comparative analysis updated\n\nFiltered view now active.');
        }
        
        function refreshDiseaseData() {
            alert('🔄 Disease Data Refreshed!\n\n• Latest case reports loaded\n• Real-time statistics updated\n• Trend indicators refreshed\n• Recovery rates recalculated\n\nLast update: Just now');
        }
        
        function showDiseaseDetails(diseaseType) {
            const diseases = {
                'diarrhea': '🔴 Diarrhea - Detailed Analysis\n\n📊 Current Status:\n• Active Cases: 18 (40% of total)\n• Trend: ↑ +3 cases this week\n• Peak Season: Monsoon (Jun-Sep)\n• Age Group: 5-45 years most affected\n\n🎯 Risk Factors:\n• Contaminated water sources\n• Poor sanitation\n• Monsoon flooding\n\n💊 Treatment Protocol:\n• ORS therapy\n• Hydration monitoring\n• Antibiotic if severe\n\n📍 Affected Villages:\n• Tezpur: 6 cases\n• Nagaon: 4 cases\n• Others: 8 cases',
                'typhoid': '🟡 Typhoid - Detailed Analysis\n\n📊 Current Status:\n• Active Cases: 12 (25% of total)\n• Trend: ↓ -1 case this week\n• Status: Stable, under control\n• Age Group: 15-60 years\n\n🎯 Risk Factors:\n• Contaminated food/water\n• Poor hygiene practices\n• Overcrowded areas\n\n💊 Treatment Protocol:\n• Antibiotic therapy\n• Fever management\n• Isolation if needed\n\n📍 Affected Villages:\n• Dibrugarh: 4 cases\n• Silchar: 3 cases\n• Others: 5 cases',
                'cholera': '🟠 Cholera - Detailed Analysis\n\n📊 Current Status:\n• Active Cases: 9 (20% of total)\n• Trend: → No change this week\n• Status: Controlled outbreak\n• Age Group: All ages at risk\n\n🎯 Risk Factors:\n• Unsafe water sources\n• Poor sanitation\n• Contaminated food\n\n💊 Treatment Protocol:\n• Immediate ORS\n• IV fluids if severe\n• Antibiotic therapy\n• Isolation measures\n\n📍 Affected Villages:\n• Tezpur: 3 cases\n• Nagaon: 5 cases\n• Others: 1 case',
                'jaundice': '🟢 Jaundice - Detailed Analysis\n\n📊 Current Status:\n• Active Cases: 7 (15% of total)\n• Trend: ↓ -2 cases this week\n• Status: Decreasing trend\n• Age Group: 20-50 years\n\n🎯 Risk Factors:\n• Hepatitis A/E transmission\n• Contaminated water\n• Poor food hygiene\n\n💊 Treatment Protocol:\n• Supportive care\n• Rest and hydration\n• Liver function monitoring\n• Vaccination if available\n\n📍 Affected Villages:\n• Silchar: 2 cases\n• Nagaon: 1 case\n• Others: 4 cases'
            };
            alert(diseases[diseaseType] || 'Disease details not available.');
        }

        function logout() {
            document.getElementById('dashboardPage').classList.remove('active');
            document.getElementById('loginPage').classList.add('active');
            document.getElementById('loginForm').reset();
        }

        // New dashboard functions
        function showNotifications() {
            alert('🔔 Notifications:\n\n• Water test results available for Village Kamrup\n• Health worker assigned to your area\n• New prevention guidelines published\n• Community meeting scheduled for tomorrow\n• Emergency contact updated');
        }

        function showAnalytics() {
            alert('📊 Analytics Dashboard:\n\n📈 This Week:\n• Reports submitted: 45 (+12%)\n• Issues resolved: 38 (+8%)\n• Response time: 2.3h (-15min)\n• User engagement: 78% (+5%)\n\n🎯 Key Metrics:\n• Water safety score: 87%\n• Community participation: 65%\n• Health improvement: 23%');
        }

        function showUserDetails() {
            alert('👥 User Statistics:\n\n📈 Total Users: 5,247\n• Citizens: 4,892 (93%)\n• Health Workers: 298 (6%)\n• Admins: 42 (1%)\n• Researchers: 15 (<1%)\n\n📅 Growth:\n• New registrations today: 23\n• Active users (24h): 1,847\n• Monthly growth: +12%');
        }

        function showReportsDetails() {
            alert('📌 Active Reports (89):\n\n🔴 Urgent (23):\n• Water contamination: 15\n• Health emergencies: 8\n\n🟡 Normal (66):\n• Quality feedback: 42\n• Maintenance requests: 24\n\n📈 Today: 12 new, 8 resolved\n🕰️ Avg resolution: 2.3 hours');
        }

        function showTestPoints() {
            alert('💧 Water Test Points (156):\n\n✅ Safe Sources (134):\n• Tube wells: 89\n• Government tanks: 28\n• Community wells: 17\n\n⚠️ Unsafe Sources (22):\n• Contaminated wells: 15\n• River sources: 7\n\n📅 Today: 23 tests completed\n🎯 Success rate: 86%');
        }

        function showHealthCases() {
            alert('🦠 Health Cases (23):\n\n🟢 Active Cases (8):\n• Diarrhea: 4\n• Typhoid: 2\n• Cholera: 1\n• Jaundice: 1\n\n✅ Resolved (15):\n• Full recovery: 13\n• Improving: 2\n\n📈 Recovery rate: 87%\n🕰️ Avg treatment: 5.2 days');
        }

        function showWaterQuality() {
            alert('🔍 Water Quality Index (87%):\n\n🟢 Excellent (45%):\n• pH: 7.0-7.5\n• No contamination\n• Safe for consumption\n\n🟡 Good (42%):\n• pH: 6.5-7.0 or 7.5-8.0\n• Minor treatment needed\n\n🟠 Poor (13%):\n• Requires immediate treatment\n• Not safe for drinking');
        }

        function showResponseTime() {
            alert('⏱️ Response Time Analytics:\n\n🎯 Average: 2.3 hours\n• Emergency: 45 minutes\n• Urgent: 1.8 hours\n• Normal: 4.2 hours\n\n📈 Improvement: -15 minutes\n🆙 Target: <2 hours\n🏆 Best time: 23 minutes');
        }

        // Health Assistant Chat Functions
        const healthResponses = {
            'water-safe': '💧 To check if your water is safe:\n• Look: Clear, no color/particles\n• Smell: No unusual odors\n• Taste: No metallic/chemical taste\n• When in doubt: Boil for 1 minute\n• Get it tested at nearest center',
            'symptoms': '🤢 Common water-related symptoms:\n• Diarrhea, vomiting, stomach pain\n• Fever, headache, weakness\n• Dehydration signs\n🏥 Seek medical help if severe!',
            'prevention': '🛡️ Prevention tips:\n• Boil water before drinking\n• Wash hands frequently\n• Use clean storage containers\n• Avoid street food during outbreaks\n• Get vaccinated when available',
            'cholera': '🦠 Cholera prevention:\n• Drink only boiled/bottled water\n• Eat hot, freshly cooked food\n• Avoid raw vegetables/fruits\n• Practice good hygiene\n• Report cases immediately',
            'typhoid': '🤒 Typhoid prevention:\n• Vaccination recommended\n• Safe water and food only\n• Wash hands regularly\n• Avoid ice and street food',
            'diarrhea': '💩 For diarrhea:\n• Drink ORS solution\n• Stay hydrated\n• Eat bland foods (rice, banana)\n• Avoid dairy and spicy food\n• See doctor if blood/fever',
            'emergency': '🏥 Emergency contacts:\n• Health Emergency: 108\n• Poison Control: 1066\n• Local Health Center: Call now\n• Ambulance: 102',
            'test': '🔬 Water testing:\n• Nearest lab: 2.5km away\n• Cost: ₹50-200\n• Results: 24-48 hours\n• Book online or walk-in'
        };

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            addMessage(message, 'user');
            input.value = '';
            
            setTimeout(() => {
                const response = getHealthResponse(message);
                addMessage(response, 'bot');
            }, 1000);
        }

        function handleChatEnter(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function addMessage(text, type) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = type + '-message';
            messageDiv.textContent = text;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function getHealthResponse(message) {
            const msg = message.toLowerCase();
            
            if (msg.includes('water') && (msg.includes('safe') || msg.includes('drink'))) {
                return healthResponses['water-safe'];
            } else if (msg.includes('symptom') || msg.includes('sick') || msg.includes('pain')) {
                return healthResponses['symptoms'];
            } else if (msg.includes('prevent') || msg.includes('avoid')) {
                return healthResponses['prevention'];
            } else if (msg.includes('cholera')) {
                return healthResponses['cholera'];
            } else if (msg.includes('typhoid')) {
                return healthResponses['typhoid'];
            } else if (msg.includes('diarrhea') || msg.includes('loose motion')) {
                return healthResponses['diarrhea'];
            } else if (msg.includes('emergency') || msg.includes('help') || msg.includes('urgent')) {
                return healthResponses['emergency'];
            } else if (msg.includes('test') || msg.includes('lab')) {
                return healthResponses['test'];
            } else {
                return '🤖 I can help with:\n• Water safety questions\n• Disease symptoms\n• Prevention tips\n• Emergency contacts\n• Testing information\n\nTry asking: "Is my water safe?" or "Cholera prevention"';
            }
        }

        function askQuickQuestion(type) {
            const questions = {
                'water-safe': 'Is my water safe to drink?',
                'symptoms': 'What are water-related disease symptoms?',
                'prevention': 'How to prevent water-borne diseases?'
            };
            
            const question = questions[type];
            addMessage(question, 'user');
            
            setTimeout(() => {
                const response = healthResponses[type];
                addMessage(response, 'bot');
            }, 500);
        }

        function showSection(section) {
            // Hide all sections
            document.getElementById('dashboardSection').style.display = 'none';
            document.getElementById('feedbackSection').style.display = 'none';
            document.getElementById('preventionSection').style.display = 'none';

            // Show selected section
            document.getElementById(section + 'Section').style.display = 'block';

            // Update nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            if (event && event.target) {
                event.target.classList.add('active');
            }
        }

        function setRating(rating) {
            currentRating = rating;
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function submitFeedback() {
            const location = document.getElementById('locationDropdown').value;
            const issueType = document.getElementById('issueType').value;
            const description = document.getElementById('issueDescription').value;
            
            if (!location) {
                alert('Please select a location');
                return;
            }
            if (!issueType) {
                alert('Please select an issue type');
                return;
            }
            if (!description.trim()) {
                alert('Please provide a detailed description');
                return;
            }
            if (currentRating === 0) {
                alert('Please provide a water quality rating');
                return;
            }

            const reportId = 'WQ' + Date.now().toString().slice(-6);
            const priority = document.getElementById('priorityLevel').value;
            
            alert(`✅ Enhanced Report Submitted Successfully!\n\n📋 Report ID: ${reportId}\n📍 Location: ${location}\n🚨 Priority: ${priority}\n⭐ Rating: ${currentRating}/5 stars\n\n📱 SMS alert sent to health workers\n📧 Email confirmation sent\n⏰ Expected response: ${priority === 'Emergency' ? '15 min' : priority === 'Urgent' ? '1 hour' : '4 hours'}`);
            
            document.getElementById('feedbackForm').reset();
            currentRating = 0;
            document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
            document.getElementById('photoPreview').innerHTML = '';
        }
        
        function getCurrentLocationForFeedback() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        alert(`📍 GPS Location Added!\n\nLatitude: ${position.coords.latitude.toFixed(6)}\nLongitude: ${position.coords.longitude.toFixed(6)}\n\nLocation will be included in your report.`);
                    },
                    () => {
                        alert('⚠️ Location access denied. Please enable location services.');
                    }
                );
            } else {
                alert('🚫 Geolocation not supported by this browser.');
            }
        }
        
        // Prevention Section Functions
        function showPreventionCategory(category) {
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const cards = document.querySelectorAll('.tip-card');
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
        
        function downloadPreventionGuide() {
            alert('📱 Prevention Guide Download\n\n📝 Comprehensive PDF guide includes:\n• All prevention tips\n• Emergency procedures\n• Contact numbers\n• Seasonal guidelines\n• Quick reference charts\n\n📧 Guide will be sent to your email\n📱 Also available offline on your device');
        }
        
        function sharePreventionTips() {
            alert('📤 Share Prevention Tips\n\n📱 Share via:\n• WhatsApp groups\n• SMS to contacts\n• Social media\n• Print flyers\n\n🌐 Help spread awareness in your community!\n👥 Together we can prevent water-borne diseases');
        }
        
        function setReminders() {
            alert('⏰ Prevention Reminders Set!\n\n🔔 Daily reminders for:\n• Boil water (6 AM)\n• Hand washing (before meals)\n• Water storage check (evening)\n• Weekly container cleaning\n\n📱 Notifications enabled\n⚙️ Customize in settings');
        }

        // Simulate real-time data updates
        setInterval(function() {
            // Update statistics with random variations
            const stats = document.querySelectorAll('.stat-number');
            stats.forEach(stat => {
                const currentValue = parseInt(stat.textContent.replace(',', ''));
                const variation = Math.floor(Math.random() * 10) - 5;
                const newValue = Math.max(0, currentValue + variation);
                stat.textContent = newValue.toLocaleString();
            });
            
            // Update live alerts
            const alerts = [
                'Unsafe water detected in Village Kamrup - Boil water before use',
                'Health camp scheduled tomorrow in Village Jorhat - Free checkups',
                'Water quality improved in Village Tezpur - Safe for consumption',
                'Cholera outbreak contained in District 3 - Preventive measures active',
                'New water testing facility opened in Village Dibrugarh'
            ];
            const randomAlert = alerts[Math.floor(Math.random() * alerts.length)];
            document.getElementById('liveAlert').textContent = randomAlert;
        }, 30000); // Update every 30 seconds
    </script>
</body>
</html>